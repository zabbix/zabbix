Zabbix frontend installation on CentOS 6

1. Add official Zabbix repository:
    rpm -ivh http://repo.zabbix.com/zabbix/2.0/rhel/6/x86_64/zabbix-release-2.0-1.el6.noarch.rpm

Actual information about repository can be founded at https://www.zabbix.com/documentation/2.0/manual/installation/install_from_packages

2. Install Zabbix agent:
    yum install zabbix-agent

3. Add official Nginx repository to /etc/yum.repo.d/Nginx.repo:
    [nginx]
    name=nginx repo
    baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
    gpgcheck=0
    enabled=1

Actual information about repository can be founded at http://wiki.nginx.org/Install

4. Install nginx and php-fpm:
    yum install nginx php-fpm php-bcmath php-common php-gd php-mbstring php-mysql php-pdo php-xml

5. Checkout SVN repository (there is always actual source code) and go to zbx-2.0 folder:
    mkdir -p zbx-2.0 && svn co svn://svn.zabbix.com/branches/2.0.rsm/ ./zbx-2.0 && cd zbx-2.0

6. Replace default nginx configuration by suggested configuration:
    cp ./zbx-2.0/opt/zabbix/docs/config/nginx.conf /etc/nginx/nginx.conf

6. Remove all default Nginx configurations:
    rm /etc/nginx/conf.d/*

7. Add virtual host to Nginx configuration from Appendix B â€” Virtual host configuration:
    cp ./zbx-2.0/opt/zabbix/docs/config/zbx_vhost.conf /etc/nginx/conf.d/zabbix.conf

8. Create folder /usr/share/zabbix for Web-interface and copy to the folder web-interface from SVN:
    mkdir -p /usr/share/zabbix/
    cd /usr/share/zabbix/
    svn co svn://svn.zabbix.com/branches/2.0.rsm/frontends/php/ ./
    chown -R nginx:nginx /usr/share/zabbix/

9. Generate own certificates or use company certificates:
    cd /etc/ssl/ && mkdir -p nginx && cd nginx
    openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout zabbix.key -out zabbix.crt
    chown -R nginx:nginx /etc/ssl/nginx/

10. Change/add default parameters in /etc/php-fpm.d/www.conf:
    listen = /var/run/php-fpm/php-fpm.sock
    listen.owner = nginx
    listen.group = nginx
    user = nginx
    group = nginx
    php_admin_value[memory_limit] = 2048M
    php_admin_value[post_max_size] = 128M
    php_admin_value[upload_max_filesize] = 16M
    php_admin_value[max_execution_time] = 6000
    php_admin_value[max_input_time] = 600
    php_admin_value[session.auto_start] = 0
    php_admin_value[max_input_vars]=100000
    php_admin_value[date.timezone]=Europe/London

11. Add temporary permissions for 'zbx_web' user on database side:
    GRANT CREATE,DROP,SELECT,UPDATE,DELETE,INSERT ON zabbix.* TO 'zbx_web'@'<IP of each frontend server>';
    FLUSH PRIVILEGES;

12. Enable autostart for Zabbix agent:
    chkconfig zabbix-agent on

13. Enable autostart for Nginx and php-fpm and disable autostart for Apache:
    chkconfig php-fpm on
    chkconfig nginx on

14. Start nginx and php-fpm:
    service nginx start
    service php-fpm start

15. Try to open web-interface (https://<server_name>/).

16. Check prerequisites. If something missed, please, change /etc/php-fpm.d/www.conf or install additional PHP modules.

17. Input database connection information.

18. Fill information about Zabbix server (Server IP and port) and take server name.

19. Check specified data. Summary of information.

21. Now, you will see Welcome window (Login: Admin, Password: zabbix):

22. Return standard permissions for zbx_web user on database side:
    GRANT SELECT,UPDATE,DELETE,INSERT ON zabbix.* TO 'zbx_web'@'<IP of each frontend server>';
    FLUSH PRIVILEGES;
