datadir=/var/lib/mysql/

local_infile = 0
symbolic_links = 0

default-storage-engine = InnoDB
skip-name-resolve
key_buffer      = 32M
key_buffer_size = 32M
max_allowed_packet = 32M
table_open_cache = 1024
table_definition_cache = 1024
max_connections = 2000
join_buffer_size = 1M
sort_buffer_size = 2M
read_buffer_size = 256K
read_rnd_buffer_size = 256K
myisam_sort_buffer_size = 1M
thread_cache_size = 512
query_cache_type = 0
open_files_limit = 65535
wait_timeout = 86400

tmp_table_size = 64M
max_heap_table_size = 64M

log-bin = mysql-bin
binlog_format=mixed
binlog_cache_size = 64M
max_binlog_size = 1G
expire_logs_days = 3

innodb_buffer_pool_size = 586G
innodb_log_file_size = 14G
innodb_log_buffer_size = 256M
innodb_file_per_table = 1
innodb_flush_method = O_DIRECT
innodb_buffer_pool_instances = 32
innodb_write_io_threads = 8
innodb_read_io_threads = 8
innodb_purge_threads = 1
innodb_adaptive_flushing = 1
innodb_lock_wait_timeout = 50

innodb_flush_log_at_trx_commit = 2

innodb_io_capacity = 10000
innodb_io_capacity_max = 16000
innodb_flush_neighbors = 0

large-pages

innodb_checksums = 1
innodb_doublewrite = 1
innodb_support_xa = 0
innodb_thread_concurrency = 0
# Possible bug in MySQL https://mariadb.atlassian.net/browse/MDEV-4972 and http://bugs.mysql.com/bug.php?id=69058
#innodb_adaptive_hash_index = 1
#innodb_adaptive_hash_index_partitions = 16

innodb_purge_threads = 8

gtid_domain_id = 1
server_id = 1
binlog_checksum = crc32

max_allowed_packet = 256M
innodb_lru_scan_depth = 512
#innodb_flushing_avg_loops = 60

innodb_stats_on_metadata = 0
innodb_stats_sample_pages = 32
innodb_max_dirty_pages_pct = 50
