steps:
    step1:
        request:
            method: user.get
            params: []
        expect: response
        response:
            _equals:
                -
                    userid: 1
                    alias: Admin
                    name:
                    surname:
                    url:
                    autologin: 0
                    autologout: 900
                    lang: en_GB
                    refresh: 30
                    type: 3
                    theme: default
                    attempt_failed: 0
                    attempt_ip:
                    attempt_clock: 0
                    rows_per_page: 50
        sqlAssertions:
            -
                sqlQuery: select count(*) from users
                singleScalarResult: 1
            -
                sqlQuery: select * from users
                rowResult:
                    -
                        userid: 1
                        alias: Admin
                        name:
                        surname:
                        passwd: 5fce1b3e34b520afeffb37ce08c7cd66
                        url:
                        autologin: 0
                        autologout: 900
                        lang: en_GB
                        refresh: 30
                        type: 3
                        theme: default
                        attempt_failed: 0
                        attempt_ip:
                        attempt_clock: 0
                        rows_per_page: 50
    step2:
        request:
            method: user.create
            params:
                alias: new_user
                passwd: 123456
                usrgrps: 1

        expect: response
        response:
            _assert:
                userids:
                    _each: notEmpty|int
        sqlAssertions:
            -
                sqlQuery: select count(*) from users
                singleScalarResult: 2
            -
                sqlQuery: select * from users
                rowResult:
                    -
                        lang: en_GB
                        refresh: 30
                        type: 1
                        theme: default
                        attempt_failed: 0
                        userid: @step2.response.result.userids[0]@
                        alias: new_user
                        name:
                        rows_per_page: 50
                        surname:
                        passwd: e10adc3949ba59abbe56e057f20f883e
                        url:
                        autologin: 0
                        autologout: 900
                        attempt_ip:
                        attempt_clock: 0
                    -
                        theme: default
                        attempt_failed: 0
                        attempt_ip:
                        alias: Admin
                        name:
                        userid: 1
                        lang: en_GB
                        refresh: 30
                        type: 3
                        surname:
                        passwd: 5fce1b3e34b520afeffb37ce08c7cd66
                        url:
                        autologin: 0
                        autologout: 900
                        attempt_clock: 0
                        rows_per_page: 50
    step3:
        request:
            method: user.get
            params: []
        expect: response
        response:
            _equals:
                -
                    userid: 1
                    alias: Admin
                    name:
                    surname:
                    url:
                    autologin: 0
                    autologout: 900
                    lang: en_GB
                    refresh: 30
                    type: 3
                    theme: default
                    attempt_failed: 0
                    attempt_ip:
                    attempt_clock: 0
                    rows_per_page: 50
                -
                    userid: @step2.response.result.userids[0]@
                    alias: new_user
                    name:
                    surname:
                    url:
                    autologin: 0
                    autologout: 900
                    lang: en_GB
                    refresh: 30
                    type: 1
                    theme: default
                    attempt_failed: 0
                    attempt_ip:
                    attempt_clock: 0
                    rows_per_page: 50
