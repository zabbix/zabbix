zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 3dcd5bbe90534f9e8eb5c2d53756af63
      name: Templates/Power
  templates:
    - uuid: 32d3c78ff44c4c3c9ff5b893ad7f5fc9
      template: 'APC Smart-UPS RT 1000 XL by SNMP'
      name: 'APC Smart-UPS RT 1000 XL by SNMP'
      description: |
        Template Power APC Smart-UPS RT 1000 XL
        
        MIBs used:
        HOST-RESOURCES-MIB
        PowerNet-MIB
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420730-discussion-thread-for-official-zabbix-template-apc-ups
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: Templates/Power
      items:
        - uuid: 6ac68411ef214cc7aa49d39d58ce3c6a
          name: 'Battery capacity'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.1.0]'
          key: 'battery.capacity[upsHighPrecBatteryCapacity]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The remaining battery capacity expressed as
             percentage of full capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: b5d618c6090447429191fe4d07e85afa
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/battery.capacity[upsHighPrecBatteryCapacity]) < {$BATTERY.CAPACITY.MIN.WARN}'
              name: 'APC Smart-UPS: Battery has low capacity'
              event_name: 'APC Smart-UPS: Battery has low capacity (below {$BATTERY.CAPACITY.MIN.WARN}%)'
              opdata: 'Current capacity: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: capacity
        - uuid: 7f3b05afa58142d5b8670c40c196baf8
          name: 'External battery packs count'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.5.0]'
          key: 'battery.external_packs_count[upsAdvBatteryNumOfBattPacks]'
          delay: 1h
          description: |
            MIB: PowerNet-MIB
            The number of external battery packs connected to the UPS. If
             the UPS does not use smart cells then the agent reports
             ERROR_NO_SUCH_NAME.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 87b91005f5ff4ba5b0086e25eaa799bd
          name: 'Battery last replace date'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.3.0]'
          key: 'battery.last_replace_date[upsBasicBatteryLastReplaceDate]'
          delay: 1h
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The date when the UPS system's batteries were last replaced
             in mm/dd/yy (or yyyy) format. For Smart-UPS models, this value
             is originally set at the factory. When the UPS batteries
             are replaced, this value should be reset by the administrator.
             For Symmetra PX 250/500 this OID is read-only and is configurable in the local display only.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 44a33eba233e4bd7ac51ca2dcabf2939
          name: 'Battery replace indicator'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.4.0]'
          key: 'battery.replace_indicator[upsAdvBatteryReplaceIndicator]'
          description: |
            MIB: PowerNet-MIB
            Indicates whether the UPS batteries need replacement.
          valuemap:
            name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: dc92c19a5b7e43a4b155d6d51912aaf8
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/battery.replace_indicator[upsAdvBatteryReplaceIndicator])=2'
              name: 'APC Smart-UPS: Battery needs replacement'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 95749270e6234d6cbd1edb0c5e1118e0
          name: 'Battery runtime remaining'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.3.0]'
          key: 'battery.runtime_remaining[upsAdvBatteryRunTimeRemaining]'
          value_type: FLOAT
          units: s
          description: |
            MIB: PowerNet-MIB
            The UPS battery run time remaining before battery
             exhaustion.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 047a5a3a957949d288588eb11f36f25e
          name: 'Battery status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.1.0]'
          key: 'battery.status[upsBasicBatteryStatus]'
          description: |
            MIB: PowerNet-MIB
            The status of the UPS batteries. A batteryLow(3) value
             indicates the UPS will be unable to sustain the current
             load, and its services will be lost if power is not restored.
             The amount of run time in reserve at the time of low battery
             can be configured by the upsAdvConfigLowBatteryRunTime.
             A batteryInFaultCondition(4)value indicates that a battery
             installed has an internal error condition.
          valuemap:
            name: 'PowerNet-MIB::upsBasicBatteryStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: 70c32834ea40487c8f13a55b7ed7c88f
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/battery.status[upsBasicBatteryStatus])=4'
              name: 'APC Smart-UPS: Battery has an internal error condition'
              priority: AVERAGE
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
            - uuid: e7aeaae896664729b66b42a94f626f9b
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/battery.status[upsBasicBatteryStatus])=3'
              name: 'APC Smart-UPS: Battery is Low'
              priority: AVERAGE
              description: 'The UPS will be unable to sustain the current load, and its services will be lost if power is not restored.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 04cd5e06823846b58ad57e2c358f346e
          name: 'Battery temperature'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.2.0]'
          key: 'battery.temperature[upsHighPrecBatteryTemperature]'
          value_type: FLOAT
          units: ℃
          description: |
            MIB: PowerNet-MIB
            The current internal UPS temperature in Celsius.
            Temperatures below zero read as 0.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: temperature
          triggers:
            - uuid: 33695c02cf6141f78e21ca899af10c03
              expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/battery.temperature[upsHighPrecBatteryTemperature],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
              name: 'APC Smart-UPS: Battery has high temperature'
              event_name: 'APC Smart-UPS: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
              opdata: 'Current temperature: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 8ee98deaf4bf46afb06f694d19757237
          name: 'Battery voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.4.0]'
          key: 'battery.voltage[upsHighPrecBatteryActualVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The actual battery bus voltage in Volts.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 4cb80c94f3d14674bc7a3933c7571eac
          name: 'Input fail cause'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.2.5.0]'
          key: 'input.fail[upsAdvInputLineFailCause]'
          description: |
            MIB: PowerNet-MIB
            The reason for the occurrence of the last transfer to UPS
            battery power.  The variable is set to:
            - noTransfer(1) -- if there is no transfer yet.
            - highLineVoltage(2) -- if the transfer to battery is caused
            by an over voltage greater than the high transfer voltage.
            - brownout(3) -- if the duration of the outage is greater than
            five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - blackout(4) -- if the duration of the outage is greater than five
            seconds and the line voltage is between 40% of the rated
            output voltage and ground.
            - smallMomentarySag(5) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - deepMomentarySag(6) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and ground.  The variable is set to
            - smallMomentarySpike(7) -- if the line failure is caused by a
            rate of change of input voltage less than ten volts per cycle.
            - largeMomentarySpike(8) -- if the line failure is caused by
            a rate of change of input voltage greater than ten volts per cycle.
            - selfTest(9) -- if the UPS was commanded to do a self test.
            - rateOfVoltageChange(10) -- if the failure is due to the rate of change of
            the line voltage.
          valuemap:
            name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 700a78a4ab3c441496ecafc5ddde6a9d
          name: 'Input frequency'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.4.0]'
          key: 'input.frequency[upsHighPrecInputFrequency]'
          value_type: FLOAT
          units: Hz
          description: |
            MIB: PowerNet-MIB
            The current input frequency to the UPS system in Hz.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 167de2d832984944878767571b0b5fe4
              expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > 0 and (min(/APC Smart-UPS RT 1000 XL by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > {$UPS.INPUT_FREQ.MAX.WARN} or max(/APC Smart-UPS RT 1000 XL by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) < {$UPS.INPUT_FREQ.MIN.WARN})'
              name: 'APC Smart-UPS: Unacceptable input frequency'
              event_name: 'APC Smart-UPS: Unacceptable input frequency (out of range {$UPS.INPUT_FREQ.MIN.WARN}-{$UPS.INPUT_FREQ.MAX.WARN}Hz for {$TIME.PERIOD})'
              opdata: 'Current frequency: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: e2b5b824c4704293ad68185971e9fb03
          name: 'Input voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.1.0]'
          key: 'input.voltage[upsHighPrecInputLineVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The current utility line voltage in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: b8741bc0081a4a9db2824c9f93ecb399
              expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > 0 and (min(/APC Smart-UPS RT 1000 XL by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC Smart-UPS RT 1000 XL by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN})'
              name: 'APC Smart-UPS: Unacceptable input voltage'
              event_name: 'APC Smart-UPS: Unacceptable input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
              opdata: 'Current voltage: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 861757e4bb1a4dc6ac1c8ef94d973328
          name: 'Output current'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.4.0]'
          key: 'output.current[upsHighPrecOutputCurrent]'
          value_type: FLOAT
          units: A
          description: |
            MIB: PowerNet-MIB
            The current in amperes drawn by the load on the UPS.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 1d9d7ef724ff41eda4fd536df6af93cb
          name: 'Output load'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.3.0]'
          key: 'output.load[upsHighPrecOutputLoad]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The current UPS load expressed as percentage
            of rated capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: a4faec3975134cd59e83f1ca7fa3ef7d
              expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/output.load[upsHighPrecOutputLoad],{$TIME.PERIOD}) > {$UPS.OUTPUT.MAX.WARN}'
              name: 'APC Smart-UPS: Output load is high'
              event_name: 'APC Smart-UPS: Output load is high (over {$UPS.OUTPUT.MAX.WARN}% for {$TIME.PERIOD})'
              opdata: 'Current load: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 3edf5e7776ae4cc6aebcedcbf4ab8d78
          name: 'Output status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.1.1.0]'
          key: 'output.status[upsBasicOutputStatus]'
          description: |
            MIB: PowerNet-MIB
            The current state of the UPS. If the UPS is unable to
             determine the state of the UPS this variable is set
             to unknown(1).
            During self-test most UPSes report onBattery(3) but
             some that support it will report onBatteryTest(15).
             To determine self-test status across all UPSes, refer
             to the upsBasicStateOutputState OID.
          valuemap:
            name: 'PowerNet-MIB::upsBasicOutputStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: deedd977f1ed4b9fbb5cc161dde0c116
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=16'
              name: 'APC Smart-UPS: UPS is Emergency Static Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: a7bbe6ca410743919f7c611a6faec9ba
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=10'
              name: 'APC Smart-UPS: UPS is Hardware Failure Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 974042a124b945068c6c16c4a01433dc
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=7'
              name: 'APC Smart-UPS: UPS is Off'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 90e810043e41467b8460278fc7923397
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=3'
              name: 'APC Smart-UPS: UPS is on battery'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 656ae233f3a946799c3ed3d48914c0b0
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=4'
              name: 'APC Smart-UPS: UPS is on Smart Boost'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 3fcbd14931854831ac603a254ffea0c3
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=12'
              name: 'APC Smart-UPS: UPS is On Smart Trim'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 65085178eef54189afdaf4937de49177
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=8'
              name: 'APC Smart-UPS: UPS is Rebooting'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 0aa402907ee446c0a13fa086b500fa87
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=11'
              name: 'APC Smart-UPS: UPS is Sleeping Until Power Return'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: be6cdd1fc22a4f0eacdbce4361cd6788
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=6'
              name: 'APC Smart-UPS: UPS is Software Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: b4375fc980ae4bee87531d18ea9a5397
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=9'
              name: 'APC Smart-UPS: UPS is Switched Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 7ae9e31ac32944928065d1cefb2c4e2f
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/output.status[upsBasicOutputStatus])=5'
              name: 'APC Smart-UPS: UPS is Timed Sleeping'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
        - uuid: bcb28618699448ea8d9d056bad203a0e
          name: 'Output voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.1.0]'
          key: 'output.voltage[upsHighPrecOutputVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The output voltage of the UPS system in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: d633cd3273e74209a1b0c6b761028e0a
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: 50cc8e7cea0c40948c006623dfa94dae
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.4.0]'
          key: 'system.contact[sysContact.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed
            node, together with information on how to contact this person.  If no contact
            information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: e0d638ab398f40e8a9555925cd8ba907
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'system.descr[sysDescr.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 4def354a520e42d78d67b2e8b1cd8eb4
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.25.1.1.0]'
          key: 'system.hw.uptime[hrSystemUptime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 031b9d385cae4641b9ecfb76c4174262
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.6.0]'
          key: 'system.location[sysLocation.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: 320221ba30744ca78b8dce03dccd549b
          name: Model
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.1.1.0]'
          key: 'system.model[upsBasicIdentModel]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The UPS model name (e.g. 'APC Smart-UPS 600').
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: e4d9441075954c068b6fd92bbff49cef
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.5.0]'
          key: 'system.name[sysName.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 31bb0ff1ea334cd59d9f8b8f489611ef
              expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/system.name[sysName.0],#1)<>last(/APC Smart-UPS RT 1000 XL by SNMP/system.name[sysName.0],#2) and length(last(/APC Smart-UPS RT 1000 XL by SNMP/system.name[sysName.0]))>0'
              name: 'APC Smart-UPS: System name has changed'
              event_name: 'APC Smart-UPS: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: bbcb555846df4169bc7aead77403e8eb
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.3.0]'
          key: 'system.net.uptime[sysUpTime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 4e7a9b6aa8dd4371b83bf47f8246cebf
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.2.0]'
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: 9ebb979a5e4a45fd9acf956df034f9be
          name: 'Serial number'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.2.3.0]'
          key: 'system.sn[upsAdvIdentSerialNumber]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            An 8-character string identifying the serial number of
             the UPS internal microprocessor.  This number is set at
             the factory.  NOTE: This number does NOT correspond to
             the serial number on the rear of the UPS.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: f24fc7ed9ffa4884891a01a0f1565fc4
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible values:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 21fc3a198f3b423fa14676278f53a4be
              expression: 'max(/APC Smart-UPS RT 1000 XL by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'APC Smart-UPS: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 9389b159502e4242b02a11104124bae5
          name: 'External bad battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_PACKS},1.3.6.1.4.1.318.1.1.1.2.2.6]'
          key: battery.packs.bad.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#EXTERNAL_PACKS}'
                value: '-1'
                operator: NOT_MATCHES_REGEX
          description: 'Discovery of the number of external defective battery packs.'
          item_prototypes:
            - uuid: 202a5c9f91c64011a915157a07245a6d
              name: '{#SNMPINDEX}: External battery packs bad'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.6.0]'
              key: 'battery.external_packs_bad[upsAdvBatteryNumOfBadBattPacks.{#SNMPINDEX}]'
              delay: 15m
              description: |
                MIB: PowerNet-MIB
                The number of external battery packs connected to the UPS that
                are defective. If the UPS does not use smart cells then the
                agent reports ERROR_NO_SUCH_NAME.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: ec66331f2ae64801a3ef51d6dec5a00f
          name: 'External battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CARTRIDGE_STATUS},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7,{#BATTERY_PACK},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.1,{#CARTRIDGE_INDEX},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.2]'
          key: battery.packs.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#CARTRIDGE_STATUS}'
                value: ^$
                operator: NOT_MATCHES_REGEX
          item_prototypes:
            - uuid: 8d1574f1c1d442529509580309153564
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery estimated replace date'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.8.{#SNMPINDEX}]'
              key: 'battery.estimated_replace_date[upsHighPrecBatteryPackCartridgeReplaceDate.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 1h
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge estimated battery replace date.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
                - tag: component
                  value: power
            - uuid: 3c829e3adec64fb39334dbacc03a3229
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery pack cartridge health'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7.{#SNMPINDEX}]'
              key: 'battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge health.
                  bit 0 Battery lifetime okay
                  bit 1 Battery lifetime near end, order replacement cartridge
                  bit 2 Battery lifetime exceeded, replace battery
                  bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                  bit 4 Battery lifetime exceeded acknowledged, replace battery
                  bit 5 Battery measured lifetime near end, order replacement cartridge
                  bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: c353d8e0b0584c6c8ba81514f5c66995
                  expression: 'find(/APC Smart-UPS RT 1000 XL by SNMP/battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0)[0|1]{15}$")=1'
                  name: 'APC Smart-UPS: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery lifetime is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge health.
                      bit 0 Battery lifetime okay
                      bit 1 Battery lifetime near end, order replacement cartridge
                      bit 2 Battery lifetime exceeded, replace battery
                      bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                      bit 4 Battery lifetime exceeded acknowledged, replace battery
                      bit 5 Battery measured lifetime near end, order replacement cartridge
                      bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 15f52cb076cb414fb794113e9981fdde
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.10.{#SNMPINDEX}]'
              key: 'battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The status of the UPS batteries. A batteryLow(3) value
                 indicates the UPS will be unable to sustain the current
                 load, and its services will be lost if power is not restored.
                 The amount of run time in reserve at the time of low battery
                 can be configured by the upsAdvConfigLowBatteryRunTime.
                 A batteryInFaultCondition(4)value indicates that a battery
                 installed has an internal error condition.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 26535b11c27b4fbe92285b56cbbf5a73
                  expression: 'find(/APC Smart-UPS RT 1000 XL by SNMP/battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0{16})$")=0'
                  name: 'APC Smart-UPS: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge status:
                    bit 0 Disconnected
                    bit 1 Overvoltage
                    bit 2 NeedsReplacement
                    bit 3 OvertemperatureCritical
                    bit 4 Charger
                    bit 5 TemperatureSensor
                    bit 6 BusSoftStart
                    bit 7 OvertemperatureWarning
                    bit 8 GeneralError
                    bit 9 Communication
                    bit 10 DisconnectedFrame
                    bit 11 FirmwareMismatch
                  tags:
                    - tag: scope
                      value: notice
            - uuid: e0d8f68302264c1b9420284f3e3a0272
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery temperature'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.5.{#SNMPINDEX}]'
              key: 'battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The current internal UPS temperature in Celsius.
                Temperatures below zero read as 0.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: 7f8613d752524d588e60aa1cab2c60bd
                  expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
                  name: 'APC Smart-UPS: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature'
                  event_name: 'APC Smart-UPS: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
                  opdata: 'Current temperature: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
            - uuid: bca352c952174256b9cfbcffb86fbf90
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Serial number'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.4.{#SNMPINDEX}]'
              key: 'system.sn[upsHighPrecBatteryPackSerialNumber.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 15m
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                An 8-character string identifying the serial number of
                 the UPS internal microprocessor.  This number is set at
                 the factory.  NOTE: This number does NOT correspond to
                 the serial number on the rear of the UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: 19379361227740c3bf8bc9852886538d
          name: 'External sensor port 1 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR1_NAME},1.3.6.1.4.1.318.1.1.25.1.2.1.3]'
          key: external.sensor1.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: d9c8acbf3a90411582404c9d5cfa9f70
              name: '{#EXTERNAL_SENSOR1_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: 1a475822bc324bbf8c4aa15c34734270
              name: '{#EXTERNAL_SENSOR1_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 40e22c5379f34edf87d1ea52ffae60b8
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=3'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: a482de04a5d34807874fc7a7c506dd40
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=4'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: dca875c511b04dc1857de74223c4f27b
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=2'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 6d1005b2b6ad41369174d93b1ebe1959
              name: '{#EXTERNAL_SENSOR1_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                evaltype: AND
                conditions:
                  - macro: '{#EXTERNAL_SENSOR1_NAME}'
                    value: Temp
              operations:
                - operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: c4df3e0e0eba4585bdd01358f9d7f5d9
          name: 'External sensor port 2 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR2_NAME},1.3.6.1.4.1.318.1.1.25.1.2.2.3]'
          key: external.sensor2.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: 7d08e2a5df41454f863f5b50a911f819
              name: '{#EXTERNAL_SENSOR2_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: 4774fd152aab49de9064490cf7ec1d0a
              name: '{#EXTERNAL_SENSOR2_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 650a1d16e56c45188c6246e960d62857
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=3'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 7518ae06e3a14866b9e6d90a224055f7
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=4'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 65aa8a5380f141498dd9c718972110b3
                  expression: 'last(/APC Smart-UPS RT 1000 XL by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=2'
                  name: 'APC Smart-UPS: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: d94425f2025045459af40e8fcb72734e
              name: '{#EXTERNAL_SENSOR2_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                conditions:
                  - macro: '{#EXTERNAL_SENSOR2_NAME}'
                    value: Temp
              operations:
                - operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: 68610f5b6df44229bcb0ad4b0fa1c3f8
          name: 'Input phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.2.3.1.2.1.1]'
          key: input.phases.discovery
          delay: 1h
          description: 'The input phase identifier. OID upsPhaseInputPhaseIndex.1.1'
          item_prototypes:
            - uuid: d17e9bb868b143dca508c4f79092cd6e
              name: '{#PHASEINDEX}: Phase input current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.6.1.1.{#PHASEINDEX}]'
              key: 'phase.input.current[upsPhaseInputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The input current in 0.1 amperes, or -0.1 if it's
                 unsupported by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: cf03abf328754a4082017f480051292f
              name: '{#PHASEINDEX}: Phase input voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The input voltage in VAC, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 8c9226411afb4b32ba3e9d6232ff4710
                  expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC Smart-UPS RT 1000 XL by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC Smart-UPS: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage'
                  event_name: 'APC Smart-UPS: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
        - uuid: a7b39188df294ec182c3e1f2a2417154
          name: 'Output phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.3.3.1.2.1.1]'
          key: output.phases.discovery
          delay: 1h
          description: 'The output phase identifier. OID upsPhaseOutputPhaseIndex.1.1'
          item_prototypes:
            - uuid: 638c63c2f4ad4cad8ed71a796d78705b
              name: '{#PHASEINDEX}: Phase output current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.4.1.1.{#PHASEINDEX}]'
              key: 'phase.output.current[upsPhaseOutputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The output current in 0.1 amperes drawn
                 by the load on the UPS, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: ba4a2ae8abea4e2692b9a43231783648
              name: '{#PHASEINDEX}: Phase output load, %'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.10.1.1.{#PHASEINDEX}]'
              key: 'phase.output.load.percent[upsPhaseOutputPercentLoad.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The percentage of the UPS load capacity in VA at
                 redundancy @ (n + x) presently being used on this
                 output phase, or -1 if it's unsupported by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: 4e22c7f6d7e14b20b3720e082042fd4f
              name: '{#PHASEINDEX}: Phase output voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The output voltage in VAC, or -1 if it's unsupported
                by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 58e0697a9a9147a4b1dfda251f2b593e
                  expression: 'min(/APC Smart-UPS RT 1000 XL by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC Smart-UPS RT 1000 XL by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC Smart-UPS: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage'
                  event_name: 'APC Smart-UPS: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
      tags:
        - tag: class
          value: power
        - tag: target
          value: apc
        - tag: target
          value: apc-smart-ups-rt-1000-xl
      macros:
        - macro: '{$BATTERY.CAPACITY.MIN.WARN}'
          value: '50'
          description: 'Minimum battery capacity percentage for trigger expression.'
        - macro: '{$BATTERY.TEMP.MAX.WARN}'
          value: '55'
          description: 'Maximum battery temperature for trigger expression.'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        - macro: '{$TIME.PERIOD}'
          value: 15m
          description: 'Time period for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MAX.WARN}'
          value: '50.3'
          description: 'Maximum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MIN.WARN}'
          value: '49.7'
          description: 'Minimum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MAX.WARN}'
          value: '243'
          description: 'Maximum input voltage for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MIN.WARN}'
          value: '197'
          description: 'Minimum input voltage for trigger expression.'
        - macro: '{$UPS.OUTPUT.MAX.WARN}'
          value: '80'
          description: 'Maximum output load in % for trigger expression.'
      dashboards:
        - uuid: 498b4d5a91574c25a798e90c529eb100
          name: 'APC Smart-UPS RT 1000 XL: General'
          pages:
            - name: 'APC Smart-UPS RT 1000 XL: General'
              widgets:
                - type: graph
                  name: Voltage
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC Smart-UPS RT 1000 XL by SNMP'
                        name: 'APC Smart-UPS RT 1000 XL: Voltage'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  name: 'Capacity of the UPS batteries'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC Smart-UPS RT 1000 XL by SNMP'
                        name: 'APC Smart-UPS RT 1000 XL: Capacity of the UPS batteries'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  name: Output
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC Smart-UPS RT 1000 XL by SNMP'
                        name: 'APC Smart-UPS RT 1000 XL: Output'
                    - type: STRING
                      name: reference
                      value: AAAAB
      valuemaps:
        - uuid: b2af1e2dcb874d43949c383f9b347f36
          name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
          mappings:
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Warning
            - value: '3'
              newvalue: Critical
            - value: '4'
              newvalue: 'Not applicable'
        - uuid: b06b54b07e6840e5a0c52ba7a6acf86a
          name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          mappings:
            - value: '1'
              newvalue: 'no Battery Needs Replacing'
            - value: '2'
              newvalue: 'battery Needs Replacing'
        - uuid: a62f96735c47467da94b6bcf98cc013d
          name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          mappings:
            - value: '1'
              newvalue: 'no Transfer'
            - value: '2'
              newvalue: 'High Line Voltage'
            - value: '3'
              newvalue: Brownout
            - value: '4'
              newvalue: Blackout
            - value: '5'
              newvalue: 'Small Momentary Sag'
            - value: '6'
              newvalue: 'Deep Momentary Sag'
            - value: '7'
              newvalue: 'Small Momentary Spike'
            - value: '8'
              newvalue: 'Large Momentary Spike'
            - value: '9'
              newvalue: 'Self Test'
            - value: '10'
              newvalue: 'Rate of Voltage Change'
        - uuid: ed12e8780c384caba8035fbb1c78e115
          name: 'PowerNet-MIB::upsBasicBatteryStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Normal
            - value: '3'
              newvalue: Low
            - value: '4'
              newvalue: 'In Fault Condition'
        - uuid: ae2ed0c2c99a4ad496f7a35226e3d4f0
          name: 'PowerNet-MIB::upsBasicOutputStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Online
            - value: '3'
              newvalue: 'On Battery'
            - value: '4'
              newvalue: 'On Smart Boost'
            - value: '5'
              newvalue: 'Timed Sleeping'
            - value: '6'
              newvalue: 'Software Bypass'
            - value: '7'
              newvalue: 'Off'
            - value: '8'
              newvalue: Rebooting
            - value: '9'
              newvalue: 'Switched Bypass'
            - value: '10'
              newvalue: 'Hardware Failure Bypass'
            - value: '11'
              newvalue: 'Sleeping Until Power Return'
            - value: '12'
              newvalue: 'On Smart Trim'
            - value: '13'
              newvalue: 'Eco Mode'
            - value: '14'
              newvalue: 'Hot Standby'
            - value: '15'
              newvalue: 'On Battery Test'
            - value: '16'
              newvalue: 'Emergency Static Bypass'
            - value: '17'
              newvalue: 'Static Bypass Standby'
            - value: '18'
              newvalue: 'Power Saving Mode'
            - value: '19'
              newvalue: 'Spot Mode'
            - value: '20'
              newvalue: E-Conversion
            - value: '21'
              newvalue: 'Charger Spotmode'
            - value: '22'
              newvalue: 'Inverter Spotmode'
            - value: '23'
              newvalue: 'Active Load'
            - value: '24'
              newvalue: 'Battery Discharge Spotmode'
            - value: '25'
              newvalue: 'Inverter Standby'
            - value: '26'
              newvalue: 'Charger Only'
        - uuid: 8cddc4f99ecb4866b1638b82b145ea8b
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: 860d3beb50c0400283a71c2c4b4ea5e2
      expression: |
        (last(/APC Smart-UPS RT 1000 XL by SNMP/system.hw.uptime[hrSystemUptime.0])>0 and last(/APC Smart-UPS RT 1000 XL by SNMP/system.hw.uptime[hrSystemUptime.0])<10m)
        or (last(/APC Smart-UPS RT 1000 XL by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/APC Smart-UPS RT 1000 XL by SNMP/system.net.uptime[sysUpTime.0])<10m)
      name: 'APC Smart-UPS: Host has been restarted'
      event_name: 'APC Smart-UPS: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'APC Smart-UPS: No SNMP data collection'
          expression: 'max(/APC Smart-UPS RT 1000 XL by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: a0d8e0338b8d4fd2bd6fdf537373d63c
      name: 'APC Smart-UPS RT 1000 XL: Capacity of the UPS batteries'
      type: PIE
      graph_items:
        - color: 199C0D
          item:
            host: 'APC Smart-UPS RT 1000 XL by SNMP'
            key: 'battery.capacity[upsHighPrecBatteryCapacity]'
    - uuid: 0817d2550d9642fe95ce182dce5cefd8
      name: 'APC Smart-UPS RT 1000 XL: Output'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC Smart-UPS RT 1000 XL by SNMP'
            key: 'output.current[upsHighPrecOutputCurrent]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC Smart-UPS RT 1000 XL by SNMP'
            key: 'output.load[upsHighPrecOutputLoad]'
    - uuid: ce2f4070e7a14d8283d0a8aff0fcd5e6
      name: 'APC Smart-UPS RT 1000 XL: Voltage'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC Smart-UPS RT 1000 XL by SNMP'
            key: 'input.voltage[upsHighPrecInputLineVoltage]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC Smart-UPS RT 1000 XL by SNMP'
            key: 'output.voltage[upsHighPrecOutputVoltage]'
