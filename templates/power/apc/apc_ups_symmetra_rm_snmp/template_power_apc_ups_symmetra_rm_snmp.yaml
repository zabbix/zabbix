zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: 3dcd5bbe90534f9e8eb5c2d53756af63
      name: Templates/Power
  templates:
    - uuid: 1dac0a88c3774315b90622a48031e369
      template: 'APC UPS Symmetra RM by SNMP'
      name: 'APC UPS Symmetra RM by SNMP'
      description: |
        Template Power APC UPS Symmetra RM
        
        MIBs used:
        HOST-RESOURCES-MIB
        PowerNet-MIB
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420730-discussion-thread-for-official-zabbix-template-apc-ups
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.0-3
      groups:
        - name: Templates/Power
      items:
        - uuid: e8257d78c2e24e3cb152886d39bca4fe
          name: 'Battery capacity'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.1.0]'
          key: 'battery.capacity[upsHighPrecBatteryCapacity]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The remaining battery capacity expressed as
             percentage of full capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: dbfdc4e6eaca4d65adcde13b0682c1c2
              expression: 'last(/APC UPS Symmetra RM by SNMP/battery.capacity[upsHighPrecBatteryCapacity]) < {$BATTERY.CAPACITY.MIN.WARN}'
              name: 'APC UPS Symmetra: Battery has low capacity'
              event_name: 'APC UPS Symmetra: Battery has low capacity (below {$BATTERY.CAPACITY.MIN.WARN}%)'
              opdata: 'Current capacity: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: capacity
        - uuid: d26227e3d5754d8493ddaa9c3f5f2b5a
          name: 'External battery packs count'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.5.0]'
          key: 'battery.external_packs_count[upsAdvBatteryNumOfBattPacks]'
          delay: 1h
          description: |
            MIB: PowerNet-MIB
            The number of external battery packs connected to the UPS. If
             the UPS does not use smart cells then the agent reports
             ERROR_NO_SUCH_NAME.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 138afef586634623974c1cefd45281e9
          name: 'Battery last replace date'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.3.0]'
          key: 'battery.last_replace_date[upsBasicBatteryLastReplaceDate]'
          delay: 1h
          value_type: CHAR
          trends: '0'
          description: |
            MIB: PowerNet-MIB
            The date when the UPS system's batteries were last replaced
             in mm/dd/yy (or yyyy) format. For Smart-UPS models, this value
             is originally set at the factory. When the UPS batteries
             are replaced, this value should be reset by the administrator.
             For Symmetra PX 250/500 this OID is read-only and is configurable in the local display only.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: abb901813d91481baef234496ddece33
          name: 'Battery replace indicator'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.4.0]'
          key: 'battery.replace_indicator[upsAdvBatteryReplaceIndicator]'
          description: |
            MIB: PowerNet-MIB
            Indicates whether the UPS batteries need replacement.
          valuemap:
            name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 0af287bae1ee44ba997a02ae585bdd4b
              expression: 'last(/APC UPS Symmetra RM by SNMP/battery.replace_indicator[upsAdvBatteryReplaceIndicator])=2'
              name: 'APC UPS Symmetra: Battery needs replacement'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 80a4e6cf09a147a7b166755aa182fdcd
          name: 'Battery runtime remaining'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.3.0]'
          key: 'battery.runtime_remaining[upsAdvBatteryRunTimeRemaining]'
          value_type: FLOAT
          units: s
          description: |
            MIB: PowerNet-MIB
            The UPS battery run time remaining before battery
             exhaustion.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 322c3b48bcb74fa5829ef41015308d97
          name: 'Battery status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.1.0]'
          key: 'battery.status[upsBasicBatteryStatus]'
          description: |
            MIB: PowerNet-MIB
            The status of the UPS batteries. A batteryLow(3) value
             indicates the UPS will be unable to sustain the current
             load, and its services will be lost if power is not restored.
             The amount of run time in reserve at the time of low battery
             can be configured by the upsAdvConfigLowBatteryRunTime.
             A batteryInFaultCondition(4)value indicates that a battery
             installed has an internal error condition.
          valuemap:
            name: 'PowerNet-MIB::upsBasicBatteryStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: aedb557acbe44390809a27b95919e10f
              expression: 'last(/APC UPS Symmetra RM by SNMP/battery.status[upsBasicBatteryStatus])=4'
              name: 'APC UPS Symmetra: Battery has an internal error condition'
              priority: AVERAGE
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
            - uuid: 1afe1859563f481faa623781028a38ca
              expression: 'last(/APC UPS Symmetra RM by SNMP/battery.status[upsBasicBatteryStatus])=3'
              name: 'APC UPS Symmetra: Battery is Low'
              priority: AVERAGE
              description: 'The UPS will be unable to sustain the current load, and its services will be lost if power is not restored.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 17ffb34351da46e59d2288cd291a7912
          name: 'Battery temperature'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.2.0]'
          key: 'battery.temperature[upsHighPrecBatteryTemperature]'
          value_type: FLOAT
          units: ℃
          description: |
            MIB: PowerNet-MIB
            The current internal UPS temperature in Celsius.
            Temperatures below zero read as 0.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: temperature
          triggers:
            - uuid: 0b4490eaaf964fdabf228d34d2992d30
              expression: 'min(/APC UPS Symmetra RM by SNMP/battery.temperature[upsHighPrecBatteryTemperature],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
              name: 'APC UPS Symmetra: Battery has high temperature'
              event_name: 'APC UPS Symmetra: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
              opdata: 'Current temperature: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 9ab2309be6cc4eea8697f17e80b015d8
          name: 'Battery voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.4.0]'
          key: 'battery.voltage[upsHighPrecBatteryActualVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The actual battery bus voltage in Volts.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 439c87539027462c9b8210a056887885
          name: 'Input fail cause'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.2.5.0]'
          key: 'input.fail[upsAdvInputLineFailCause]'
          description: |
            MIB: PowerNet-MIB
            The reason for the occurrence of the last transfer to UPS
            battery power.  The variable is set to:
            - noTransfer(1) -- if there is no transfer yet.
            - highLineVoltage(2) -- if the transfer to battery is caused
            by an over voltage greater than the high transfer voltage.
            - brownout(3) -- if the duration of the outage is greater than
            five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - blackout(4) -- if the duration of the outage is greater than five
            seconds and the line voltage is between 40% of the rated
            output voltage and ground.
            - smallMomentarySag(5) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - deepMomentarySag(6) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and ground.  The variable is set to
            - smallMomentarySpike(7) -- if the line failure is caused by a
            rate of change of input voltage less than ten volts per cycle.
            - largeMomentarySpike(8) -- if the line failure is caused by
            a rate of change of input voltage greater than ten volts per cycle.
            - selfTest(9) -- if the UPS was commanded to do a self test.
            - rateOfVoltageChange(10) -- if the failure is due to the rate of change of
            the line voltage.
          valuemap:
            name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: e16be6095dc24b48bc541325b1675dd0
          name: 'Input frequency'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.4.0]'
          key: 'input.frequency[upsHighPrecInputFrequency]'
          value_type: FLOAT
          units: Hz
          description: |
            MIB: PowerNet-MIB
            The current input frequency to the UPS system in Hz.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: af166242e3674f2da489a232c7bba6f1
              expression: 'min(/APC UPS Symmetra RM by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > 0 and (min(/APC UPS Symmetra RM by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > {$UPS.INPUT_FREQ.MAX.WARN} or max(/APC UPS Symmetra RM by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) < {$UPS.INPUT_FREQ.MIN.WARN})'
              name: 'APC UPS Symmetra: Unacceptable input frequency'
              event_name: 'APC UPS Symmetra: Unacceptable input frequency (out of range {$UPS.INPUT_FREQ.MIN.WARN}-{$UPS.INPUT_FREQ.MAX.WARN}Hz for {$TIME.PERIOD})'
              opdata: 'Current frequency: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: c658b02eea284fcf8e302c20a2256cf0
          name: 'Input voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.1.0]'
          key: 'input.voltage[upsHighPrecInputLineVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The current utility line voltage in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 3b51bbae66914b19a93e7a2da289b056
              expression: 'min(/APC UPS Symmetra RM by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > 0 and (min(/APC UPS Symmetra RM by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra RM by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN})'
              name: 'APC UPS Symmetra: Unacceptable input voltage'
              event_name: 'APC UPS Symmetra: Unacceptable input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
              opdata: 'Current voltage: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 9bcae00165414f4aa15a40bc078aa44d
          name: 'Output current'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.4.0]'
          key: 'output.current[upsHighPrecOutputCurrent]'
          value_type: FLOAT
          units: A
          description: |
            MIB: PowerNet-MIB
            The current in amperes drawn by the load on the UPS.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 0e5240e578d043609fba4024db8c8df1
          name: 'Output load'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.3.0]'
          key: 'output.load[upsHighPrecOutputLoad]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The current UPS load expressed as percentage
            of rated capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: a25499c49d0043cda248136eb6307ef9
              expression: 'min(/APC UPS Symmetra RM by SNMP/output.load[upsHighPrecOutputLoad],{$TIME.PERIOD}) > {$UPS.OUTPUT.MAX.WARN}'
              name: 'APC UPS Symmetra: Output load is high'
              event_name: 'APC UPS Symmetra: Output load is high (over {$UPS.OUTPUT.MAX.WARN}% for {$TIME.PERIOD})'
              opdata: 'Current load: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 7655b8ff3d5e41f0a5409fcfd646933a
          name: 'Output status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.1.1.0]'
          key: 'output.status[upsBasicOutputStatus]'
          description: |
            MIB: PowerNet-MIB
            The current state of the UPS. If the UPS is unable to
             determine the state of the UPS this variable is set
             to unknown(1).
            During self-test most UPSes report onBattery(3) but
             some that support it will report onBatteryTest(15).
             To determine self-test status across all UPSes, refer
             to the upsBasicStateOutputState OID.
          valuemap:
            name: 'PowerNet-MIB::upsBasicOutputStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: f7b0e2f05c9b4b14916f99ecb89fcd49
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=16'
              name: 'APC UPS Symmetra: UPS is Emergency Static Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 77081726414047a5a1c698fcfbf19e73
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=10'
              name: 'APC UPS Symmetra: UPS is Hardware Failure Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 87beb54ac57848e3896fd715a5918a88
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=7'
              name: 'APC UPS Symmetra: UPS is Off'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 5f46c436fab741ec86cb32339e8bd7b4
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=3'
              name: 'APC UPS Symmetra: UPS is on battery'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: a7457e3d6c6f4e99a3ccc08a1436d34a
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=4'
              name: 'APC UPS Symmetra: UPS is on Smart Boost'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 976395b6acea4f5cb4f7f3d4f0bc67af
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=12'
              name: 'APC UPS Symmetra: UPS is On Smart Trim'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 72c9677a2157412ebd14004a5e024a3a
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=8'
              name: 'APC UPS Symmetra: UPS is Rebooting'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 75d189cd8b5944c4b7987931c834e949
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=11'
              name: 'APC UPS Symmetra: UPS is Sleeping Until Power Return'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 24e1cfde22da48b0bf28ca2cdf8cd917
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=6'
              name: 'APC UPS Symmetra: UPS is Software Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 4fff7b4a29b84cdea245b2704e357f5d
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=9'
              name: 'APC UPS Symmetra: UPS is Switched Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 647178a4cb674815a65517c073b4adee
              expression: 'last(/APC UPS Symmetra RM by SNMP/output.status[upsBasicOutputStatus])=5'
              name: 'APC UPS Symmetra: UPS is Timed Sleeping'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
        - uuid: 8d93b482d7c549f593c41abb9380ce2f
          name: 'Output voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.1.0]'
          key: 'output.voltage[upsHighPrecOutputVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The output voltage of the UPS system in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 39dd21c0f2194acaa9fddbdfccde05dd
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          delay: '0'
          value_type: LOG
          trends: '0'
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: 2d22b58a5c9f4fedbd03862398113546
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.4.0]'
          key: 'system.contact[sysContact.0]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed
            node, together with information on how to contact this person.  If no contact
            information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 251cc61592f543e3929aef3cb46f1b34
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'system.descr[sysDescr.0]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: b3021bc8a0324d4d9683f676131bf136
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.25.1.1.0]'
          key: 'system.hw.uptime[hrSystemUptime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 49b8ef5ff3a3400d8f412d4440040461
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.6.0]'
          key: 'system.location[sysLocation.0]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: bd0dc104ded94e4cbba3a8557e642caf
          name: Model
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.1.1.0]'
          key: 'system.model[upsBasicIdentModel]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: PowerNet-MIB
            The UPS model name (e.g. 'APC Smart-UPS 600').
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 155feccece4a4625b98efa206ad5e0b1
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.5.0]'
          key: 'system.name[sysName.0]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: e3cf119c19b54dddb3d26d9b789ea4f5
              expression: 'last(/APC UPS Symmetra RM by SNMP/system.name[sysName.0],#1)<>last(/APC UPS Symmetra RM by SNMP/system.name[sysName.0],#2) and length(last(/APC UPS Symmetra RM by SNMP/system.name[sysName.0]))>0'
              name: 'APC UPS Symmetra: System name has changed'
              event_name: 'APC UPS Symmetra: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: b4ca2f993709413b9a00fa1389ec9e3c
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.3.0]'
          key: 'system.net.uptime[sysUpTime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: f6bd69ea5df144c996f050ded122521e
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.2.0]'
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: 64ab7fd8a79448d580ad24ecf488241c
          name: 'Serial number'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.2.3.0]'
          key: 'system.sn[upsAdvIdentSerialNumber]'
          delay: 15m
          value_type: CHAR
          trends: '0'
          description: |
            MIB: PowerNet-MIB
            An 8-character string identifying the serial number of
             the UPS internal microprocessor.  This number is set at
             the factory.  NOTE: This number does NOT correspond to
             the serial number on the rear of the UPS.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: d69889a19b564ed384fc96e8a70971a5
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible values:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 56f25581382a43efbddd4aba44aa86b3
              expression: 'max(/APC UPS Symmetra RM by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'APC UPS Symmetra: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 82e8f10c883546ef8196e071fdd8df91
          name: 'External bad battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_PACKS},1.3.6.1.4.1.318.1.1.1.2.2.6]'
          key: battery.packs.bad.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#EXTERNAL_PACKS}'
                value: '-1'
                operator: NOT_MATCHES_REGEX
                formulaid: A
          description: 'Discovery of the number of external defective battery packs.'
          item_prototypes:
            - uuid: 7b7ef64f2c3f4c0abeff433279903426
              name: '{#SNMPINDEX}: External battery packs bad'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.6.0]'
              key: 'battery.external_packs_bad[upsAdvBatteryNumOfBadBattPacks.{#SNMPINDEX}]'
              delay: 15m
              description: |
                MIB: PowerNet-MIB
                The number of external battery packs connected to the UPS that
                are defective. If the UPS does not use smart cells then the
                agent reports ERROR_NO_SUCH_NAME.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: b615a0d1ef1e49678daa4de77b47623e
          name: 'External battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CARTRIDGE_STATUS},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7,{#BATTERY_PACK},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.1,{#CARTRIDGE_INDEX},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.2]'
          key: battery.packs.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#CARTRIDGE_STATUS}'
                value: ^$
                operator: NOT_MATCHES_REGEX
                formulaid: A
          item_prototypes:
            - uuid: 28f43e10b50d4709a6790d2f7d0552c2
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery estimated replace date'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.8.{#SNMPINDEX}]'
              key: 'battery.estimated_replace_date[upsHighPrecBatteryPackCartridgeReplaceDate.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 1h
              value_type: CHAR
              trends: '0'
              description: |
                MIB: PowerNet-MIB
                The battery cartridge estimated battery replace date.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
                - tag: component
                  value: power
            - uuid: ebaf443cd74f4be282939032a843dcef
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery pack cartridge health'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7.{#SNMPINDEX}]'
              key: 'battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              trends: '0'
              description: |
                MIB: PowerNet-MIB
                The battery cartridge health.
                  bit 0 Battery lifetime okay
                  bit 1 Battery lifetime near end, order replacement cartridge
                  bit 2 Battery lifetime exceeded, replace battery
                  bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                  bit 4 Battery lifetime exceeded acknowledged, replace battery
                  bit 5 Battery measured lifetime near end, order replacement cartridge
                  bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 002caa5fac72437187ab9711eb2fc7ad
                  expression: 'find(/APC UPS Symmetra RM by SNMP/battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0)[0|1]{15}$")=1'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery lifetime is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge health.
                      bit 0 Battery lifetime okay
                      bit 1 Battery lifetime near end, order replacement cartridge
                      bit 2 Battery lifetime exceeded, replace battery
                      bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                      bit 4 Battery lifetime exceeded acknowledged, replace battery
                      bit 5 Battery measured lifetime near end, order replacement cartridge
                      bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
                  tags:
                    - tag: scope
                      value: notice
            - uuid: a415a0d85a1146e6aadfd691fcc5da63
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.10.{#SNMPINDEX}]'
              key: 'battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              trends: '0'
              description: |
                MIB: PowerNet-MIB
                The status of the UPS batteries. A batteryLow(3) value
                 indicates the UPS will be unable to sustain the current
                 load, and its services will be lost if power is not restored.
                 The amount of run time in reserve at the time of low battery
                 can be configured by the upsAdvConfigLowBatteryRunTime.
                 A batteryInFaultCondition(4)value indicates that a battery
                 installed has an internal error condition.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 9ca2e1e1a81e4e2388f735c03f9bc1de
                  expression: 'find(/APC UPS Symmetra RM by SNMP/battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0{16})$")=0'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge status:
                    bit 0 Disconnected
                    bit 1 Overvoltage
                    bit 2 NeedsReplacement
                    bit 3 OvertemperatureCritical
                    bit 4 Charger
                    bit 5 TemperatureSensor
                    bit 6 BusSoftStart
                    bit 7 OvertemperatureWarning
                    bit 8 GeneralError
                    bit 9 Communication
                    bit 10 DisconnectedFrame
                    bit 11 FirmwareMismatch
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 8d1317fc38034fd78b5cff3b04dce7f1
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery temperature'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.5.{#SNMPINDEX}]'
              key: 'battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The current internal UPS temperature in Celsius.
                Temperatures below zero read as 0.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: b9a868a2f4a0410e9a03744eef9a5515
                  expression: 'min(/APC UPS Symmetra RM by SNMP/battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature'
                  event_name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
                  opdata: 'Current temperature: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 2694e29b9287464898684b711040d75a
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Serial number'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.4.{#SNMPINDEX}]'
              key: 'system.sn[upsHighPrecBatteryPackSerialNumber.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 15m
              value_type: CHAR
              trends: '0'
              description: |
                MIB: PowerNet-MIB
                An 8-character string identifying the serial number of
                 the UPS internal microprocessor.  This number is set at
                 the factory.  NOTE: This number does NOT correspond to
                 the serial number on the rear of the UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: 3adfddb03546462a9bcfdc5b059a29cc
          name: 'External sensor port 1 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR1_NAME},1.3.6.1.4.1.318.1.1.25.1.2.1.3]'
          key: external.sensor1.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: fe2eb706e52849f79781b746db05e753
              name: '{#EXTERNAL_SENSOR1_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: e80af415f8384d0fa54c6954594b5794
              name: '{#EXTERNAL_SENSOR1_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 1e6fa00989994e6f885c9ce2fde6ab24
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=3'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: b8b78dcb3f6d47e583565b7588cf9f4c
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=4'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: ba421cf1871a4bcabb06f92be0a983dc
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=2'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: c2e3e2ea6df84a609acdc3e05d4ea036
              name: '{#EXTERNAL_SENSOR1_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                conditions:
                  - macro: '{#EXTERNAL_SENSOR1_NAME}'
                    value: Temp
                    formulaid: A
              operations:
                - operationobject: ITEM_PROTOTYPE
                  operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: 8243825c5bbc42639f8796d1082a4a05
          name: 'External sensor port 2 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR2_NAME},1.3.6.1.4.1.318.1.1.25.1.2.2.3]'
          key: external.sensor2.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: 22227cb4aa284d9392015e3a2fe20912
              name: '{#EXTERNAL_SENSOR2_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: a140c9eaef4049278bc5f2bfd28d0339
              name: '{#EXTERNAL_SENSOR2_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 97ef6f2fc4374174912b16db90b615a8
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=3'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 39db14da83714689b6bac140a9347c64
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=4'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: d318122e192a401c95f24ad17d3bda93
                  expression: 'last(/APC UPS Symmetra RM by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=2'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 69ca20795352489b9efc0a0c0cc1b27f
              name: '{#EXTERNAL_SENSOR2_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                conditions:
                  - macro: '{#EXTERNAL_SENSOR2_NAME}'
                    value: Temp
                    formulaid: A
              operations:
                - operationobject: ITEM_PROTOTYPE
                  operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: 6d6d6b6a71434315a0bbc38b56d47f49
          name: 'Input phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.2.3.1.2.1.1]'
          key: input.phases.discovery
          delay: 1h
          description: 'The input phase identifier. OID upsPhaseInputPhaseIndex.1.1'
          item_prototypes:
            - uuid: 45def82313f74727826a0db8aa18eecc
              name: '{#PHASEINDEX}: Phase input current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.6.1.1.{#PHASEINDEX}]'
              key: 'phase.input.current[upsPhaseInputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The input current in 0.1 amperes, or -0.1 if it's
                 unsupported by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: e6d933f8a79248539fa9b5ce447813b5
              name: '{#PHASEINDEX}: Phase input voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The input voltage in VAC, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 341c10188b984ce7aac7bb995847b69e
                  expression: 'min(/APC UPS Symmetra RM by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra RM by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage'
                  event_name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
        - uuid: a2da2392f78b4b5ea97370ef0f276973
          name: 'Output phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.3.3.1.2.1.1]'
          key: output.phases.discovery
          delay: 1h
          description: 'The output phase identifier. OID upsPhaseOutputPhaseIndex.1.1'
          item_prototypes:
            - uuid: 16117cb258304fb8bc2660ff4b80cc1c
              name: '{#PHASEINDEX}: Phase output current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.4.1.1.{#PHASEINDEX}]'
              key: 'phase.output.current[upsPhaseOutputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The output current in 0.1 amperes drawn
                 by the load on the UPS, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: 177f5c2dcfac4bb997f778dcd58ba638
              name: '{#PHASEINDEX}: Phase output load, %'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.10.1.1.{#PHASEINDEX}]'
              key: 'phase.output.load.percent[upsPhaseOutputPercentLoad.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The percentage of the UPS load capacity in VA at
                 redundancy @ (n + x) presently being used on this
                 output phase, or -1 if it's unsupported by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: cc7c08b1bf924507b6d15cd9105926a5
              name: '{#PHASEINDEX}: Phase output voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The output voltage in VAC, or -1 if it's unsupported
                by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 85551dd4ca0b4ef6994348891ad77b57
                  expression: 'min(/APC UPS Symmetra RM by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra RM by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage'
                  event_name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
      tags:
        - tag: class
          value: power
        - tag: target
          value: apc
        - tag: target
          value: apc-ups-symmetra-rm
      macros:
        - macro: '{$BATTERY.CAPACITY.MIN.WARN}'
          value: '50'
          description: 'Minimum battery capacity percentage for trigger expression.'
        - macro: '{$BATTERY.TEMP.MAX.WARN}'
          value: '55'
          description: 'Maximum battery temperature for trigger expression.'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        - macro: '{$TIME.PERIOD}'
          value: 15m
          description: 'Time period for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MAX.WARN}'
          value: '50.3'
          description: 'Maximum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MIN.WARN}'
          value: '49.7'
          description: 'Minimum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MAX.WARN}'
          value: '243'
          description: 'Maximum input voltage for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MIN.WARN}'
          value: '197'
          description: 'Minimum input voltage for trigger expression.'
        - macro: '{$UPS.OUTPUT.MAX.WARN}'
          value: '80'
          description: 'Maximum output load in % for trigger expression.'
      dashboards:
        - uuid: c552f644b98249f2980a55fad99572e4
          name: 'APC UPS Symmetra RM: General'
          pages:
            - name: 'APC UPS Symmetra RM: General'
              widgets:
                - type: graph
                  name: Voltage
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra RM by SNMP'
                        name: 'APC UPS Symmetra RM: Voltage'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  name: 'Capacity of the UPS batteries'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra RM by SNMP'
                        name: 'APC UPS Symmetra RM: Capacity of the UPS batteries'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  name: Output
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra RM by SNMP'
                        name: 'APC UPS Symmetra RM: Output'
                    - type: STRING
                      name: reference
                      value: AAAAB
      valuemaps:
        - uuid: 8516e97893ed4f2ebe70766d17eeacde
          name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
          mappings:
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Warning
            - value: '3'
              newvalue: Critical
            - value: '4'
              newvalue: 'Not applicable'
        - uuid: 84387eb0a5ef4523ac5d990eb4a6a796
          name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          mappings:
            - value: '1'
              newvalue: 'no Battery Needs Replacing'
            - value: '2'
              newvalue: 'battery Needs Replacing'
        - uuid: 58104ecf15d34fe38922f3fe5fa25027
          name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          mappings:
            - value: '1'
              newvalue: 'no Transfer'
            - value: '2'
              newvalue: 'High Line Voltage'
            - value: '3'
              newvalue: Brownout
            - value: '4'
              newvalue: Blackout
            - value: '5'
              newvalue: 'Small Momentary Sag'
            - value: '6'
              newvalue: 'Deep Momentary Sag'
            - value: '7'
              newvalue: 'Small Momentary Spike'
            - value: '8'
              newvalue: 'Large Momentary Spike'
            - value: '9'
              newvalue: 'Self Test'
            - value: '10'
              newvalue: 'Rate of Voltage Change'
        - uuid: 43715c15fed840fc8e188d062c0ef2da
          name: 'PowerNet-MIB::upsBasicBatteryStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Normal
            - value: '3'
              newvalue: Low
            - value: '4'
              newvalue: 'In Fault Condition'
        - uuid: d9b5340729684dd0a450b6de6b14b590
          name: 'PowerNet-MIB::upsBasicOutputStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Online
            - value: '3'
              newvalue: 'On Battery'
            - value: '4'
              newvalue: 'On Smart Boost'
            - value: '5'
              newvalue: 'Timed Sleeping'
            - value: '6'
              newvalue: 'Software Bypass'
            - value: '7'
              newvalue: 'Off'
            - value: '8'
              newvalue: Rebooting
            - value: '9'
              newvalue: 'Switched Bypass'
            - value: '10'
              newvalue: 'Hardware Failure Bypass'
            - value: '11'
              newvalue: 'Sleeping Until Power Return'
            - value: '12'
              newvalue: 'On Smart Trim'
            - value: '13'
              newvalue: 'Eco Mode'
            - value: '14'
              newvalue: 'Hot Standby'
            - value: '15'
              newvalue: 'On Battery Test'
            - value: '16'
              newvalue: 'Emergency Static Bypass'
            - value: '17'
              newvalue: 'Static Bypass Standby'
            - value: '18'
              newvalue: 'Power Saving Mode'
            - value: '19'
              newvalue: 'Spot Mode'
            - value: '20'
              newvalue: E-Conversion
            - value: '21'
              newvalue: 'Charger Spotmode'
            - value: '22'
              newvalue: 'Inverter Spotmode'
            - value: '23'
              newvalue: 'Active Load'
            - value: '24'
              newvalue: 'Battery Discharge Spotmode'
            - value: '25'
              newvalue: 'Inverter Standby'
            - value: '26'
              newvalue: 'Charger Only'
        - uuid: cdf3578a66db4cfda6c36b4bbb295173
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: fb2b4e564040422da234cdb309163b7b
      expression: |
        (last(/APC UPS Symmetra RM by SNMP/system.hw.uptime[hrSystemUptime.0])>0 and last(/APC UPS Symmetra RM by SNMP/system.hw.uptime[hrSystemUptime.0])<10m)
        or (last(/APC UPS Symmetra RM by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/APC UPS Symmetra RM by SNMP/system.net.uptime[sysUpTime.0])<10m)
      name: 'APC UPS Symmetra: Host has been restarted'
      event_name: 'APC UPS Symmetra: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'APC UPS Symmetra: No SNMP data collection'
          expression: 'max(/APC UPS Symmetra RM by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: ea7ef2682549402eb23b0d9df313ee25
      name: 'APC UPS Symmetra RM: Capacity of the UPS batteries'
      type: PIE
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra RM by SNMP'
            key: 'battery.capacity[upsHighPrecBatteryCapacity]'
    - uuid: d340e1d477bc4bc4b099c94b1fe6d2da
      name: 'APC UPS Symmetra RM: Output'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra RM by SNMP'
            key: 'output.current[upsHighPrecOutputCurrent]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC UPS Symmetra RM by SNMP'
            key: 'output.load[upsHighPrecOutputLoad]'
    - uuid: 42f5e7154634464fabafe352508b50db
      name: 'APC UPS Symmetra RM: Voltage'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra RM by SNMP'
            key: 'input.voltage[upsHighPrecInputLineVoltage]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC UPS Symmetra RM by SNMP'
            key: 'output.voltage[upsHighPrecOutputVoltage]'
