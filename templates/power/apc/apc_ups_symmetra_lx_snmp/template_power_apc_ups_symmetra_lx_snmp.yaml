zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 3dcd5bbe90534f9e8eb5c2d53756af63
      name: Templates/Power
  templates:
    - uuid: 0b9a899ff8f1467c9fdf999d02b9fd77
      template: 'APC UPS Symmetra LX by SNMP'
      name: 'APC UPS Symmetra LX by SNMP'
      description: |
        Template Power APC UPS Symmetra LX
        
        MIBs used:
        HOST-RESOURCES-MIB
        PowerNet-MIB
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/420730-discussion-thread-for-official-zabbix-template-apc-ups
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: Templates/Power
      items:
        - uuid: 560d838206844447b8f79fd4500557b2
          name: 'Battery capacity'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.1.0]'
          key: 'battery.capacity[upsHighPrecBatteryCapacity]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The remaining battery capacity expressed as
             percentage of full capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: fdece80f2fc44ac1974fafe190ce186f
              expression: 'last(/APC UPS Symmetra LX by SNMP/battery.capacity[upsHighPrecBatteryCapacity]) < {$BATTERY.CAPACITY.MIN.WARN}'
              name: 'APC UPS Symmetra: Battery has low capacity'
              event_name: 'APC UPS Symmetra: Battery has low capacity (below {$BATTERY.CAPACITY.MIN.WARN}%)'
              opdata: 'Current capacity: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: capacity
        - uuid: 3fea9d328d5342b5bae6b643a0b45495
          name: 'External battery packs count'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.5.0]'
          key: 'battery.external_packs_count[upsAdvBatteryNumOfBattPacks]'
          delay: 1h
          description: |
            MIB: PowerNet-MIB
            The number of external battery packs connected to the UPS. If
             the UPS does not use smart cells then the agent reports
             ERROR_NO_SUCH_NAME.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: f4bd3a4a637640e29f50ebd36fb510e5
          name: 'Battery last replace date'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.3.0]'
          key: 'battery.last_replace_date[upsBasicBatteryLastReplaceDate]'
          delay: 1h
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The date when the UPS system's batteries were last replaced
             in mm/dd/yy (or yyyy) format. For Smart-UPS models, this value
             is originally set at the factory. When the UPS batteries
             are replaced, this value should be reset by the administrator.
             For Symmetra PX 250/500 this OID is read-only and is configurable in the local display only.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 731d350450f742d880d81ff2be69e67e
          name: 'Battery replace indicator'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.4.0]'
          key: 'battery.replace_indicator[upsAdvBatteryReplaceIndicator]'
          description: |
            MIB: PowerNet-MIB
            Indicates whether the UPS batteries need replacement.
          valuemap:
            name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: a1bd434a249b48b2ac0ef69ede417a72
              expression: 'last(/APC UPS Symmetra LX by SNMP/battery.replace_indicator[upsAdvBatteryReplaceIndicator])=2'
              name: 'APC UPS Symmetra: Battery needs replacement'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 8340b775b76f4e8aad6d3984c63632e9
          name: 'Battery runtime remaining'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.3.0]'
          key: 'battery.runtime_remaining[upsAdvBatteryRunTimeRemaining]'
          value_type: FLOAT
          units: s
          description: |
            MIB: PowerNet-MIB
            The UPS battery run time remaining before battery
             exhaustion.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: c1d818ee115343c8bb41bedb8de7f2bd
          name: 'Battery status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.1.1.0]'
          key: 'battery.status[upsBasicBatteryStatus]'
          description: |
            MIB: PowerNet-MIB
            The status of the UPS batteries. A batteryLow(3) value
             indicates the UPS will be unable to sustain the current
             load, and its services will be lost if power is not restored.
             The amount of run time in reserve at the time of low battery
             can be configured by the upsAdvConfigLowBatteryRunTime.
             A batteryInFaultCondition(4)value indicates that a battery
             installed has an internal error condition.
          valuemap:
            name: 'PowerNet-MIB::upsBasicBatteryStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: 955d79a0cf5447dd9a11d4608758e983
              expression: 'last(/APC UPS Symmetra LX by SNMP/battery.status[upsBasicBatteryStatus])=4'
              name: 'APC UPS Symmetra: Battery has an internal error condition'
              priority: AVERAGE
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
            - uuid: 3ca8156ecc1c4ee4b5623c4a085b993f
              expression: 'last(/APC UPS Symmetra LX by SNMP/battery.status[upsBasicBatteryStatus])=3'
              name: 'APC UPS Symmetra: Battery is Low'
              priority: AVERAGE
              description: 'The UPS will be unable to sustain the current load, and its services will be lost if power is not restored.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 6d581eae836342bb8280eb09d7894533
          name: 'Battery temperature'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.2.0]'
          key: 'battery.temperature[upsHighPrecBatteryTemperature]'
          value_type: FLOAT
          units: ℃
          description: |
            MIB: PowerNet-MIB
            The current internal UPS temperature in Celsius.
            Temperatures below zero read as 0.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: temperature
          triggers:
            - uuid: 5b43659a10644a51861282bc72116f9f
              expression: 'min(/APC UPS Symmetra LX by SNMP/battery.temperature[upsHighPrecBatteryTemperature],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
              name: 'APC UPS Symmetra: Battery has high temperature'
              event_name: 'APC UPS Symmetra: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
              opdata: 'Current temperature: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: ab0f5d86a40b421ba136506f7854bbbd
          name: 'Battery voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.4.0]'
          key: 'battery.voltage[upsHighPrecBatteryActualVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The actual battery bus voltage in Volts.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 13c0d202d19f4b64a52141062c4be6bb
          name: 'Input fail cause'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.2.5.0]'
          key: 'input.fail[upsAdvInputLineFailCause]'
          description: |
            MIB: PowerNet-MIB
            The reason for the occurrence of the last transfer to UPS
            battery power.  The variable is set to:
            - noTransfer(1) -- if there is no transfer yet.
            - highLineVoltage(2) -- if the transfer to battery is caused
            by an over voltage greater than the high transfer voltage.
            - brownout(3) -- if the duration of the outage is greater than
            five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - blackout(4) -- if the duration of the outage is greater than five
            seconds and the line voltage is between 40% of the rated
            output voltage and ground.
            - smallMomentarySag(5) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and the low transfer voltage.
            - deepMomentarySag(6) -- if the duration of the outage is less
            than five seconds and the line voltage is between 40% of the
            rated output voltage and ground.  The variable is set to
            - smallMomentarySpike(7) -- if the line failure is caused by a
            rate of change of input voltage less than ten volts per cycle.
            - largeMomentarySpike(8) -- if the line failure is caused by
            a rate of change of input voltage greater than ten volts per cycle.
            - selfTest(9) -- if the UPS was commanded to do a self test.
            - rateOfVoltageChange(10) -- if the failure is due to the rate of change of
            the line voltage.
          valuemap:
            name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 05ccf5bd85414ee9b5860c80f6e8323f
          name: 'Input frequency'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.4.0]'
          key: 'input.frequency[upsHighPrecInputFrequency]'
          value_type: FLOAT
          units: Hz
          description: |
            MIB: PowerNet-MIB
            The current input frequency to the UPS system in Hz.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 94a5c26b89e2416f96b61bbfc6e60a97
              expression: 'min(/APC UPS Symmetra LX by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > 0 and (min(/APC UPS Symmetra LX by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) > {$UPS.INPUT_FREQ.MAX.WARN} or max(/APC UPS Symmetra LX by SNMP/input.frequency[upsHighPrecInputFrequency],{$TIME.PERIOD}) < {$UPS.INPUT_FREQ.MIN.WARN})'
              name: 'APC UPS Symmetra: Unacceptable input frequency'
              event_name: 'APC UPS Symmetra: Unacceptable input frequency (out of range {$UPS.INPUT_FREQ.MIN.WARN}-{$UPS.INPUT_FREQ.MAX.WARN}Hz for {$TIME.PERIOD})'
              opdata: 'Current frequency: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 5764182c547143b3b044ec1adb54c1ce
          name: 'Input voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.3.3.1.0]'
          key: 'input.voltage[upsHighPrecInputLineVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The current utility line voltage in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 2b640b94d48446609802ce6e57c7bd46
              expression: 'min(/APC UPS Symmetra LX by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > 0 and (min(/APC UPS Symmetra LX by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra LX by SNMP/input.voltage[upsHighPrecInputLineVoltage],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN})'
              name: 'APC UPS Symmetra: Unacceptable input voltage'
              event_name: 'APC UPS Symmetra: Unacceptable input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
              opdata: 'Current voltage: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: bbb33508be95488680bcb644a44626ef
          name: 'Output current'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.4.0]'
          key: 'output.current[upsHighPrecOutputCurrent]'
          value_type: FLOAT
          units: A
          description: |
            MIB: PowerNet-MIB
            The current in amperes drawn by the load on the UPS.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: d27e991fc0f64b4f9704fb8183567e8d
          name: 'Output load'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.3.0]'
          key: 'output.load[upsHighPrecOutputLoad]'
          value_type: FLOAT
          units: '%'
          description: |
            MIB: PowerNet-MIB
            The current UPS load expressed as percentage
            of rated capacity.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
          triggers:
            - uuid: 34562b5c734d492c89c386902dfd6e90
              expression: 'min(/APC UPS Symmetra LX by SNMP/output.load[upsHighPrecOutputLoad],{$TIME.PERIOD}) > {$UPS.OUTPUT.MAX.WARN}'
              name: 'APC UPS Symmetra: Output load is high'
              event_name: 'APC UPS Symmetra: Output load is high (over {$UPS.OUTPUT.MAX.WARN}% for {$TIME.PERIOD})'
              opdata: 'Current load: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'A battery installed has an internal error condition.'
              tags:
                - tag: scope
                  value: notice
        - uuid: 978a7ee6923c40cd8097afb60c81244f
          name: 'Output status'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.1.1.0]'
          key: 'output.status[upsBasicOutputStatus]'
          description: |
            MIB: PowerNet-MIB
            The current state of the UPS. If the UPS is unable to
             determine the state of the UPS this variable is set
             to unknown(1).
            During self-test most UPSes report onBattery(3) but
             some that support it will report onBatteryTest(15).
             To determine self-test status across all UPSes, refer
             to the upsBasicStateOutputState OID.
          valuemap:
            name: 'PowerNet-MIB::upsBasicOutputStatus'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: power
          triggers:
            - uuid: 6ade2b9fb9ad432596d16b3df6237ec4
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=16'
              name: 'APC UPS Symmetra: UPS is Emergency Static Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: da9a0fa7669e454b8ba44c0458a94ea8
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=10'
              name: 'APC UPS Symmetra: UPS is Hardware Failure Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 01a2bcb5f20b4fe889a48e4bed2a2a63
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=7'
              name: 'APC UPS Symmetra: UPS is Off'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: d0b154dd92424af8bb841d91d4e7ddd5
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=3'
              name: 'APC UPS Symmetra: UPS is on battery'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: afc071d0ccfb4226a3c5ee3058270937
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=4'
              name: 'APC UPS Symmetra: UPS is on Smart Boost'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 12259f4a961a40b39de12d0202d41c56
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=12'
              name: 'APC UPS Symmetra: UPS is On Smart Trim'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: ef9d1e4b1ec244f6bcf36d19a9e7c9c7
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=8'
              name: 'APC UPS Symmetra: UPS is Rebooting'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: c673928e7b764b5db0fa3168edd2cc67
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=11'
              name: 'APC UPS Symmetra: UPS is Sleeping Until Power Return'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: c9b24aa16e124d8c9cd6cfb188ded816
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=6'
              name: 'APC UPS Symmetra: UPS is Software Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: 02904426801d4d42b3f634267f8697e7
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=9'
              name: 'APC UPS Symmetra: UPS is Switched Bypass'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
            - uuid: fa08f8a60c2c4d88a3f9ebf317fcd06e
              expression: 'last(/APC UPS Symmetra LX by SNMP/output.status[upsBasicOutputStatus])=5'
              name: 'APC UPS Symmetra: UPS is Timed Sleeping'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: notice
        - uuid: 9cf495d14fdf4059b6c35e7857d7a18c
          name: 'Output voltage'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.4.3.1.0]'
          key: 'output.voltage[upsHighPrecOutputVoltage]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PowerNet-MIB
            The output voltage of the UPS system in VAC.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 102179b315b548e289df3459bc5860c1
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: 8dd800fbbcde431aa421eeb5a33eb798
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.4.0]'
          key: 'system.contact[sysContact.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed
            node, together with information on how to contact this person.  If no contact
            information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: e8c576f27f4c49ef9acd1ba7198ffbb6
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'system.descr[sysDescr.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: e5a92d45430b4bd6bdef42870141d141
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.25.1.1.0]'
          key: 'system.hw.uptime[hrSystemUptime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 6a06715ef4c44534a0ebc45f4e5adb5b
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.6.0]'
          key: 'system.location[sysLocation.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: 64d56d199021432886452fff5a4c6d22
          name: Model
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.1.1.0]'
          key: 'system.model[upsBasicIdentModel]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            The UPS model name (e.g. 'APC Smart-UPS 600').
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: b15628c68d4c4e8ca761ad9fa7e40a1c
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.5.0]'
          key: 'system.name[sysName.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 61d0836efd33437894e1edd595373f1e
              expression: 'last(/APC UPS Symmetra LX by SNMP/system.name[sysName.0],#1)<>last(/APC UPS Symmetra LX by SNMP/system.name[sysName.0],#2) and length(last(/APC UPS Symmetra LX by SNMP/system.name[sysName.0]))>0'
              name: 'APC UPS Symmetra: System name has changed'
              event_name: 'APC UPS Symmetra: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: 0810681a8ae74ad8b28ea38119a93f59
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.3.0]'
          key: 'system.net.uptime[sysUpTime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 9f858f7eaed545b8a35ac24e858b0826
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.2.0]'
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
        - uuid: 3f61bd561e7d42fbb55b71df9ea3b5b1
          name: 'Serial number'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.1.2.3.0]'
          key: 'system.sn[upsAdvIdentSerialNumber]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: PowerNet-MIB
            An 8-character string identifying the serial number of
             the UPS internal microprocessor.  This number is set at
             the factory.  NOTE: This number does NOT correspond to
             the serial number on the rear of the UPS.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: inventory
        - uuid: 9562f60b1cbd4fe08614221e69efd811
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible values:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: aeaaa7e2bd2d46a481f9d8b33ec18cb5
              expression: 'max(/APC UPS Symmetra LX by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'APC UPS Symmetra: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 35a885d8f181416db86f2ffe73a30f7f
          name: 'External bad battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_PACKS},1.3.6.1.4.1.318.1.1.1.2.2.6]'
          key: battery.packs.bad.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#EXTERNAL_PACKS}'
                value: '-1'
                operator: NOT_MATCHES_REGEX
          description: 'Discovery of the number of external defective battery packs.'
          item_prototypes:
            - uuid: b0b3bb219c534b40ad07f89ac8c43797
              name: '{#SNMPINDEX}: External battery packs bad'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.2.6.0]'
              key: 'battery.external_packs_bad[upsAdvBatteryNumOfBadBattPacks.{#SNMPINDEX}]'
              delay: 15m
              description: |
                MIB: PowerNet-MIB
                The number of external battery packs connected to the UPS that
                are defective. If the UPS does not use smart cells then the
                agent reports ERROR_NO_SUCH_NAME.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: 168bfbfc58ca46509caf54ae3562f0bc
          name: 'External battery packs discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CARTRIDGE_STATUS},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7,{#BATTERY_PACK},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.1,{#CARTRIDGE_INDEX},1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.2]'
          key: battery.packs.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#CARTRIDGE_STATUS}'
                value: ^$
                operator: NOT_MATCHES_REGEX
          item_prototypes:
            - uuid: 3d2e62971cfb4b0a92b51ece740e1a58
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery estimated replace date'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.8.{#SNMPINDEX}]'
              key: 'battery.estimated_replace_date[upsHighPrecBatteryPackCartridgeReplaceDate.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 1h
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge estimated battery replace date.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
                - tag: component
                  value: power
            - uuid: b49b4836472f45e3b4947048dcd64cf8
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery pack cartridge health'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.7.{#SNMPINDEX}]'
              key: 'battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The battery cartridge health.
                  bit 0 Battery lifetime okay
                  bit 1 Battery lifetime near end, order replacement cartridge
                  bit 2 Battery lifetime exceeded, replace battery
                  bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                  bit 4 Battery lifetime exceeded acknowledged, replace battery
                  bit 5 Battery measured lifetime near end, order replacement cartridge
                  bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 2ea1a8d2bd3746dabafed72e1f6216fd
                  expression: 'find(/APC UPS Symmetra LX by SNMP/battery.pack.cartridge_health[upsHighPrecBatteryPackCartridgeHealth.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0)[0|1]{15}$")=1'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery lifetime is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge health.
                      bit 0 Battery lifetime okay
                      bit 1 Battery lifetime near end, order replacement cartridge
                      bit 2 Battery lifetime exceeded, replace battery
                      bit 3 Battery lifetime near end acknowledged, order replacement cartridge
                      bit 4 Battery lifetime exceeded acknowledged, replace battery
                      bit 5 Battery measured lifetime near end, order replacement cartridge
                      bit 6 Battery measured lifetime near end acknowledged, order replacement cartridge
                  tags:
                    - tag: scope
                      value: notice
            - uuid: df73a5fd0d964c67857178a936c2dc7d
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.10.{#SNMPINDEX}]'
              key: 'battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                The status of the UPS batteries. A batteryLow(3) value
                 indicates the UPS will be unable to sustain the current
                 load, and its services will be lost if power is not restored.
                 The amount of run time in reserve at the time of low battery
                 can be configured by the upsAdvConfigLowBatteryRunTime.
                 A batteryInFaultCondition(4)value indicates that a battery
                 installed has an internal error condition.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 3870634ad8c1414dabeebc10c510fba3
                  expression: 'find(/APC UPS Symmetra LX by SNMP/battery.pack.status[upsHighPrecBatteryPackCartridgeStatus.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],,"regexp","^(0{16})$")=0'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery status is not okay'
                  opdata: 'Current bit set: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    The battery cartridge status:
                    bit 0 Disconnected
                    bit 1 Overvoltage
                    bit 2 NeedsReplacement
                    bit 3 OvertemperatureCritical
                    bit 4 Charger
                    bit 5 TemperatureSensor
                    bit 6 BusSoftStart
                    bit 7 OvertemperatureWarning
                    bit 8 GeneralError
                    bit 9 Communication
                    bit 10 DisconnectedFrame
                    bit 11 FirmwareMismatch
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 18c46e7d50ee4eefb669705d62e2224c
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery temperature'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.5.{#SNMPINDEX}]'
              key: 'battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The current internal UPS temperature in Celsius.
                Temperatures below zero read as 0.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: 730bdb68d90f4bc6aaf6cb22e04e1845
                  expression: 'min(/APC UPS Symmetra LX by SNMP/battery.temperature[upsHighPrecBatteryPackTemperature.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}],{$TIME.PERIOD}) > {$BATTERY.TEMP.MAX.WARN}'
                  name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature'
                  event_name: 'APC UPS Symmetra: {#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Battery has high temperature (over {$BATTERY.TEMP.MAX.WARN}℃ for {$TIME.PERIOD})'
                  opdata: 'Current temperature: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 5fadf217f7444f58ba3dca52bc6cff76
              name: '{#BATTERY_PACK}.{#CARTRIDGE_INDEX}: Serial number'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.2.3.10.2.1.4.{#SNMPINDEX}]'
              key: 'system.sn[upsHighPrecBatteryPackSerialNumber.{#BATTERY_PACK}.{#CARTRIDGE_INDEX}]'
              delay: 15m
              value_type: CHAR
              description: |
                MIB: PowerNet-MIB
                An 8-character string identifying the serial number of
                 the UPS internal microprocessor.  This number is set at
                 the factory.  NOTE: This number does NOT correspond to
                 the serial number on the rear of the UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: inventory
        - uuid: 598521a7c59d425d9deb58c9829e344e
          name: 'External sensor port 1 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR1_NAME},1.3.6.1.4.1.318.1.1.25.1.2.1.3]'
          key: external.sensor1.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: 2db30af657574f8f9390002f94b7e249
              name: '{#EXTERNAL_SENSOR1_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: 6182750c55f24110b076d95c2cdbd1fa
              name: '{#EXTERNAL_SENSOR1_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 97b4078788d244d0b501e9465c659ff7
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=3'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 86cd9908372045618672d6ff82bca705
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=4'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 4ba13efc27da411785410109340b6a26
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.1.{#SNMPINDEX}])=2'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR1_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: fc394520f4964a86ac93e87da2fc541b
              name: '{#EXTERNAL_SENSOR1_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.1.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.1.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                conditions:
                  - macro: '{#EXTERNAL_SENSOR1_NAME}'
                    value: Temp
              operations:
                - operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: 14e6acae826e4e87b68c04beee67a5cb
          name: 'External sensor port 2 discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#EXTERNAL_SENSOR2_NAME},1.3.6.1.4.1.318.1.1.25.1.2.2.3]'
          key: external.sensor2.discovery
          delay: 1h
          description: uioSensorStatusTable
          item_prototypes:
            - uuid: 5f5df15d6cc4455083f9fa6932d86656
              name: '{#EXTERNAL_SENSOR2_NAME}: Humidity sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.7.{#SNMPINDEX}]'
              key: 'external.sensor.humidity[uioSensorStatusHumidity.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The sensor's current humidity reading - a relative humidity
                 percentage. -1 indicates an invalid reading due to either a
                 sensor that doesn't read humidity or lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: humidity
                - tag: component
                  value: power
            - uuid: ecc2e5c49b004027bb9ccd5498e3d169
              name: '{#EXTERNAL_SENSOR2_NAME}: Sensor alarm status'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.9.{#SNMPINDEX}]'
              key: 'external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}]'
              description: |
                MIB: PowerNet-MIB
                The alarm status of the sensor. Possible values:
                uioNormal                 (1),
                uioWarning                (2),
                uioCritical               (3),
                sensorStatusNotApplicable (4)
              valuemap:
                name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 3155c8cf446c40d896755a25a46ec90b
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=3'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Critical'
                  priority: HIGH
                  description: 'The external sensor has returned a value greater than the critical threshold.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 9ef9a4dc80c84087b44b5f0e8aa94202
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=4'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Not Applicable'
                  priority: INFO
                  description: 'The external sensor does not work or is not connected.'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: 74a3585b0cc74a4887eb3683fb1e6f64
                  expression: 'last(/APC UPS Symmetra LX by SNMP/external.sensor.status[uioSensorStatusAlarmStatus.2.{#SNMPINDEX}])=2'
                  name: 'APC UPS Symmetra: {#EXTERNAL_SENSOR2_NAME}: Sensor has status Warning'
                  priority: AVERAGE
                  description: 'The external sensor has returned a value greater than the warning threshold.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: f2cd5bb0c8a64b09868ddff9b14e4cbd
              name: '{#EXTERNAL_SENSOR2_NAME}: Temperature sensor'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.25.1.2.2.6.{#SNMPINDEX}]'
              key: 'external.sensor.temperature[uioSensorStatusTemperatureDegC.2.{#SNMPINDEX}]'
              value_type: FLOAT
              units: ℃
              description: |
                MIB: PowerNet-MIB
                The sensor's current temperature reading in Celsius.
                 -1 indicates an invalid reading due to lost communications.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
                - tag: component
                  value: temperature
          overrides:
            - name: Temp
              step: '1'
              filter:
                conditions:
                  - macro: '{#EXTERNAL_SENSOR2_NAME}'
                    value: Temp
              operations:
                - operator: LIKE
                  value: Humidity
                  discover: NO_DISCOVER
        - uuid: b4f271299e9a47bf8543863a7d9be479
          name: 'Input phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.2.3.1.2.1.1]'
          key: input.phases.discovery
          delay: 1h
          description: 'The input phase identifier. OID upsPhaseInputPhaseIndex.1.1'
          item_prototypes:
            - uuid: 161257625bc84427be6cfcd86023c2ec
              name: '{#PHASEINDEX}: Phase input current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.6.1.1.{#PHASEINDEX}]'
              key: 'phase.input.current[upsPhaseInputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The input current in 0.1 amperes, or -0.1 if it's
                 unsupported by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: 080719150b424168999c21ff597e6948
              name: '{#PHASEINDEX}: Phase input voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.2.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The input voltage in VAC, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 90e3258375e047b594deb0ecf7300c22
                  expression: 'min(/APC UPS Symmetra LX by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra LX by SNMP/phase.input.voltage[upsPhaseInputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage'
                  event_name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} input voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
        - uuid: 4232ad35daa3403da085f1ba6c7af348
          name: 'Output phases discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PHASEINDEX},1.3.6.1.4.1.318.1.1.1.9.3.3.1.2.1.1]'
          key: output.phases.discovery
          delay: 1h
          description: 'The output phase identifier. OID upsPhaseOutputPhaseIndex.1.1'
          item_prototypes:
            - uuid: 2834306ba5464ffaa472c0adddc3d829
              name: '{#PHASEINDEX}: Phase output current'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.4.1.1.{#PHASEINDEX}]'
              key: 'phase.output.current[upsPhaseOutputCurrent.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: A
              description: |
                MIB: PowerNet-MIB
                The output current in 0.1 amperes drawn
                 by the load on the UPS, or -1 if it's unsupported
                 by this UPS.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '0.1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: 7b0f22672b38492e92c8551c3009baef
              name: '{#PHASEINDEX}: Phase output load, %'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.10.1.1.{#PHASEINDEX}]'
              key: 'phase.output.load.percent[upsPhaseOutputPercentLoad.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: PowerNet-MIB
                The percentage of the UPS load capacity in VA at
                 redundancy @ (n + x) presently being used on this
                 output phase, or -1 if it's unsupported by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
            - uuid: a590ab8671574e119fe3335110fdee49
              name: '{#PHASEINDEX}: Phase output voltage'
              type: SNMP_AGENT
              snmp_oid: 'get[1.3.6.1.4.1.318.1.1.1.9.3.3.1.3.1.1.{#PHASEINDEX}]'
              key: 'phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PowerNet-MIB
                The output voltage in VAC, or -1 if it's unsupported
                by this UPS.
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: b8c42d5d66d9403eba697920439ae956
                  expression: 'min(/APC UPS Symmetra LX by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) > {$UPS.INPUT_VOLT.MAX.WARN} or max(/APC UPS Symmetra LX by SNMP/phase.output.voltage[upsPhaseOutputVoltage.1.1.{#PHASEINDEX}],{$TIME.PERIOD}) < {$UPS.INPUT_VOLT.MIN.WARN}'
                  name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage'
                  event_name: 'APC UPS Symmetra: {#PHASEINDEX}: Unacceptable phase {#PHASEINDEX} output voltage (out of range {$UPS.INPUT_VOLT.MIN.WARN}-{$UPS.INPUT_VOLT.MAX.WARN}V for {$TIME.PERIOD})'
                  opdata: 'Current phase {#PHASEINDEX} voltage: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: notice
      tags:
        - tag: class
          value: power
        - tag: target
          value: apc
        - tag: target
          value: apc-ups-symmetra-lx
      macros:
        - macro: '{$BATTERY.CAPACITY.MIN.WARN}'
          value: '50'
          description: 'Minimum battery capacity percentage for trigger expression.'
        - macro: '{$BATTERY.TEMP.MAX.WARN}'
          value: '55'
          description: 'Maximum battery temperature for trigger expression.'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        - macro: '{$TIME.PERIOD}'
          value: 15m
          description: 'Time period for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MAX.WARN}'
          value: '50.3'
          description: 'Maximum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_FREQ.MIN.WARN}'
          value: '49.7'
          description: 'Minimum input frequency for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MAX.WARN}'
          value: '243'
          description: 'Maximum input voltage for trigger expression.'
        - macro: '{$UPS.INPUT_VOLT.MIN.WARN}'
          value: '197'
          description: 'Minimum input voltage for trigger expression.'
        - macro: '{$UPS.OUTPUT.MAX.WARN}'
          value: '80'
          description: 'Maximum output load in % for trigger expression.'
      dashboards:
        - uuid: ff52b4f8ce124ee78849babbee2797ab
          name: 'APC UPS Symmetra LX: General'
          pages:
            - name: 'APC UPS Symmetra LX: General'
              widgets:
                - type: graph
                  name: Voltage
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra LX by SNMP'
                        name: 'APC UPS Symmetra LX: Voltage'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  name: 'Capacity of the UPS batteries'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra LX by SNMP'
                        name: 'APC UPS Symmetra LX: Capacity of the UPS batteries'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  name: Output
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'APC UPS Symmetra LX by SNMP'
                        name: 'APC UPS Symmetra LX: Output'
                    - type: STRING
                      name: reference
                      value: AAAAB
      valuemaps:
        - uuid: aec3362485c242ec928cb8ecfe5e61cf
          name: 'PowerNet-MIB::uioSensorStatusAlarmStatus'
          mappings:
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Warning
            - value: '3'
              newvalue: Critical
            - value: '4'
              newvalue: 'Not applicable'
        - uuid: 912d8834176b4fe4a2f6bd12ef3ee3c1
          name: 'PowerNet-MIB::upsAdvBatteryReplaceIndicator'
          mappings:
            - value: '1'
              newvalue: 'no Battery Needs Replacing'
            - value: '2'
              newvalue: 'battery Needs Replacing'
        - uuid: e079fa8cc9614245b0fecf4b8f42feca
          name: 'PowerNet-MIB::upsAdvInputLineFailCause'
          mappings:
            - value: '1'
              newvalue: 'no Transfer'
            - value: '2'
              newvalue: 'High Line Voltage'
            - value: '3'
              newvalue: Brownout
            - value: '4'
              newvalue: Blackout
            - value: '5'
              newvalue: 'Small Momentary Sag'
            - value: '6'
              newvalue: 'Deep Momentary Sag'
            - value: '7'
              newvalue: 'Small Momentary Spike'
            - value: '8'
              newvalue: 'Large Momentary Spike'
            - value: '9'
              newvalue: 'Self Test'
            - value: '10'
              newvalue: 'Rate of Voltage Change'
        - uuid: 24229472978c42739cdbe7aa47e1d34c
          name: 'PowerNet-MIB::upsBasicBatteryStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Normal
            - value: '3'
              newvalue: Low
            - value: '4'
              newvalue: 'In Fault Condition'
        - uuid: 8c2c9721615c4408976f7632180ecfe3
          name: 'PowerNet-MIB::upsBasicOutputStatus'
          mappings:
            - value: '1'
              newvalue: Unknown
            - value: '2'
              newvalue: Online
            - value: '3'
              newvalue: 'On Battery'
            - value: '4'
              newvalue: 'On Smart Boost'
            - value: '5'
              newvalue: 'Timed Sleeping'
            - value: '6'
              newvalue: 'Software Bypass'
            - value: '7'
              newvalue: 'Off'
            - value: '8'
              newvalue: Rebooting
            - value: '9'
              newvalue: 'Switched Bypass'
            - value: '10'
              newvalue: 'Hardware Failure Bypass'
            - value: '11'
              newvalue: 'Sleeping Until Power Return'
            - value: '12'
              newvalue: 'On Smart Trim'
            - value: '13'
              newvalue: 'Eco Mode'
            - value: '14'
              newvalue: 'Hot Standby'
            - value: '15'
              newvalue: 'On Battery Test'
            - value: '16'
              newvalue: 'Emergency Static Bypass'
            - value: '17'
              newvalue: 'Static Bypass Standby'
            - value: '18'
              newvalue: 'Power Saving Mode'
            - value: '19'
              newvalue: 'Spot Mode'
            - value: '20'
              newvalue: E-Conversion
            - value: '21'
              newvalue: 'Charger Spotmode'
            - value: '22'
              newvalue: 'Inverter Spotmode'
            - value: '23'
              newvalue: 'Active Load'
            - value: '24'
              newvalue: 'Battery Discharge Spotmode'
            - value: '25'
              newvalue: 'Inverter Standby'
            - value: '26'
              newvalue: 'Charger Only'
        - uuid: 625f28bd49f14e49a1a7a4da01429906
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: 9d0c32f93c0c44f69b54c91fabfa1529
      expression: |
        (last(/APC UPS Symmetra LX by SNMP/system.hw.uptime[hrSystemUptime.0])>0 and last(/APC UPS Symmetra LX by SNMP/system.hw.uptime[hrSystemUptime.0])<10m)
        or (last(/APC UPS Symmetra LX by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/APC UPS Symmetra LX by SNMP/system.net.uptime[sysUpTime.0])<10m)
      name: 'APC UPS Symmetra: Host has been restarted'
      event_name: 'APC UPS Symmetra: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'APC UPS Symmetra: No SNMP data collection'
          expression: 'max(/APC UPS Symmetra LX by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: 265f3050b3b94cbeae6fefdae02ea992
      name: 'APC UPS Symmetra LX: Capacity of the UPS batteries'
      type: PIE
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra LX by SNMP'
            key: 'battery.capacity[upsHighPrecBatteryCapacity]'
    - uuid: 2ef61780d42c4d61bcb89faf08691d08
      name: 'APC UPS Symmetra LX: Output'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra LX by SNMP'
            key: 'output.current[upsHighPrecOutputCurrent]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC UPS Symmetra LX by SNMP'
            key: 'output.load[upsHighPrecOutputLoad]'
    - uuid: 4432ed7ca97d4d989b253383037f48ee
      name: 'APC UPS Symmetra LX: Voltage'
      graph_items:
        - color: 199C0D
          item:
            host: 'APC UPS Symmetra LX by SNMP'
            key: 'input.voltage[upsHighPrecInputLineVoltage]'
        - sortorder: '1'
          color: F63100
          item:
            host: 'APC UPS Symmetra LX by SNMP'
            key: 'output.voltage[upsHighPrecOutputVoltage]'
