zabbix_export:
  version: '6.2'
  date: '2022-10-27T12:00:48Z'
  template_groups:
    -
      uuid: e960332b3f6c46a1956486d4f3f99fce
      name: 'Templates/Server hardware'
  templates:
    -
      uuid: fc834b8da8864678b55557e9a237eac9
      template: 'DELL PowerEdge R840 by SNMP'
      name: 'DELL PowerEdge R840 by SNMP'
      description: |
        Template for DELL PowerEdge R840 servers with iDRAC version 7 and later.
        
        MIBs used:
        HOST-RESOURCES-MIB
        IDRAC-MIB-SMIv2
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/426752-discussion-thread-for-official-zabbix-dell-templates
        
        Template tooling version used: 0.42
      groups:
        -
          name: 'Templates/Server hardware'
      items:
        -
          uuid: ec1d2a94f64a4efe9970eab633714fc3
          name: 'Dell R840: System contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: 'dell.server.contact[sysContact]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person. If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
        -
          uuid: cc2480186fee4b81b2c6f2094b772642
          name: 'Dell R840: System description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: 'dell.server.descr[sysDescr]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
        -
          uuid: 090e35f3537244fb92ddc85d1afc757f
          name: 'Dell R840: Firmware version'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.1.8.0
          key: 'dell.server.hw.firmware[racFirmwareVersion]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the firmware version of a remote access card.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: c8e3831037544a87abbd671fe191ab98
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.firmware[racFirmwareVersion],#1)<>last(/DELL PowerEdge R840 by SNMP/dell.server.hw.firmware[racFirmwareVersion],#2) and length(last(/DELL PowerEdge R840 by SNMP/dell.server.hw.firmware[racFirmwareVersion]))>0'
              name: 'Dell R840: Firmware has changed'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'Firmware version has changed. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 6ddb21512bc84a0698b0b52c6b43a670
          name: 'Dell R840: Hardware model name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.12.0
          key: 'dell.server.hw.model[systemModelName]'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the model name of the system.
          inventory_link: MODEL
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: ecbbcab2c41e4ce7aeafb08229102365
          name: 'Dell R840: Hardware serial number'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.2.0
          key: 'dell.server.hw.serialnumber[systemServiceTag]'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the service tag of the system.
          inventory_link: SERIALNO_A
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 89f591b666d34aceb71715bfcdda6bff
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.serialnumber[systemServiceTag],#1)<>last(/DELL PowerEdge R840 by SNMP/dell.server.hw.serialnumber[systemServiceTag],#2) and length(last(/DELL PowerEdge R840 by SNMP/dell.server.hw.serialnumber[systemServiceTag]))>0'
              name: 'Dell R840: Device has been replaced'
              event_name: 'Dell R840: Device has been replaced (new serial number received)'
              priority: INFO
              description: 'Device serial number has changed. Ack to close'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: def89c137aaa489bb7ab44f642248e15
          name: 'Dell R840: Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.25.1.1.0
          key: 'dell.server.hw.uptime[hrSystemUptime]'
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            -
              type: CHECK_NOT_SUPPORTED
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: component
              value: system
        -
          uuid: 500dc5a80d934ae78d4f088d8120b7cc
          name: 'Dell R840: System location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: 'dell.server.location[sysLocation]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., 'telephone closet, 3rd floor'). If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: 4c32406c2d1046d9bb33c3c0844198d7
          name: 'Dell R840: System name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: 'dell.server.name[sysName]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node. By convention, this is the node's fully-qualified domain name. If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 7a56b961a858470d82c6fdef62f88f43
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.name[sysName],#1)<>last(/DELL PowerEdge R840 by SNMP/dell.server.name[sysName],#2) and length(last(/DELL PowerEdge R840 by SNMP/dell.server.name[sysName]))>0'
              name: 'Dell R840: System name has changed'
              event_name: 'Dell R840: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'System name has changed. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: afb22553880b4e85a3cdc910413cc26d
          name: 'Dell R840: Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'dell.server.net.uptime[sysUpTime]'
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: component
              value: system
        -
          uuid: 761781c399a14befb3eeed3af4039b77
          name: 'Dell R840: System object ID'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.2.0
          key: 'dell.server.objectid[sysObjectID]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity. This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining 'what kind of box' is being managed. For example, if vendor 'Flintstones, Inc.' was assigned the subtree 1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its 'Fred Router'.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: eba6c6f1e7c44ed8a85288ed5ea9f193
          name: 'Dell R840: Overall system health status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.1.0
          key: 'dell.server.status[globalSystemStatus]'
          history: 7d
          trends: 0d
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the overall rollup status of all components in the system being monitored by the remote access card. Includes system, storage, IO devices, iDRAC, CPU, memory, etc.
          valuemap:
            name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: health
            -
              tag: component
              value: system
          triggers:
            -
              uuid: db2cabad4c3048d692333ae02ec125fe
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.DISASTER}'
              name: 'Dell R840: System is in unrecoverable state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: DISASTER
              description: 'Please check the device for faults.'
              tags:
                -
                  tag: scope
                  value: availability
            -
              uuid: 65c0bb42f06c463abbf667480cafa40f
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.CRIT}'
              name: 'Dell R840: System status is in critical state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Please check the device for errors.'
              tags:
                -
                  tag: scope
                  value: availability
            -
              uuid: 4f8b4ed834504bb5bb6d7c7b9d22700e
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.WARN}'
              name: 'Dell R840: System status is in warning state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Please check the device for warnings.'
              dependencies:
                -
                  name: 'Dell R840: System status is in critical state'
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.CRIT}'
              tags:
                -
                  tag: scope
                  value: availability
        -
          uuid: 5a33de4af38042f3bd27066a519f9996
          name: 'Dell R840: Operating system'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.6.0
          key: 'dell.server.sw.os[systemOSName]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the name of the operating system that the host is running.
          inventory_link: OS
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 09a2b4ec3e1943b598347358b442b662
              expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sw.os[systemOSName],#1)<>last(/DELL PowerEdge R840 by SNMP/dell.server.sw.os[systemOSName],#2) and length(last(/DELL PowerEdge R840 by SNMP/dell.server.sw.os[systemOSName]))>0'
              name: 'Dell R840: Operating system description has changed'
              priority: INFO
              description: 'Operating system description has changed. Possibly, the system has been updated or replaced. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 1b1f301b2c5f4e5d8fc5e8dcfad63be0
          name: 'Dell R840: SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          history: 2w
          trends: '0'
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            -
              tag: component
              value: network
        -
          uuid: a988dcd503a54238815cb57aac22a991
          name: 'Dell R840: SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          valuemap:
            name: zabbix.host.available
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: health
            -
              tag: component
              value: system
          triggers:
            -
              uuid: c428f917029346679f8763611f5357f0
              expression: 'max(/DELL PowerEdge R840 by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'Dell R840: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              tags:
                -
                  tag: scope
                  value: availability
      discovery_rules:
        -
          uuid: 2e089f4c080945289f60bdc814ef743b
          name: 'Array controller cache discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#BATTERY_NUM},1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.1,{#BATTERY_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.21]'
          key: array.cache.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: IDRAC-MIB-SMIv2::batteryTable'
          item_prototypes:
            -
              uuid: 378e8705311b451a902ffa6fd874d3db
              name: 'Dell R840: {#BATTERY_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.4.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                Current state of battery.
                Possible values:
                1: The current state could not be determined.
                2: The battery is operating normally.
                3: The battery has failed and needs to be replaced.
                4: The battery temperature is high or charge level is depleting.
                5: The battery is missing or not detected.
                6: The battery is undergoing the re-charge phase.
                7: The battery voltage or charge level is below the threshold.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::batteryState'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: battery
                -
                  tag: component
                  value: diskarray
              trigger_prototypes:
                -
                  uuid: 8d4d468bddf14d659ecbf002e37dcafc
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                  name: 'Dell R840: {#BATTERY_NAME} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: afcd3be7b0e343bdbeff78f87ba4f803
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
                  name: 'Dell R840: {#BATTERY_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R840: {#BATTERY_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: ab4482d1d0244a25a5dccf787af77fe0
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])<>{$DISK.ARRAY.CACHE.BATTERY.STATUS.OK}'
                  name: 'Dell R840: {#BATTERY_NAME} is not in optimal state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R840: {#BATTERY_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                    -
                      name: 'Dell R840: {#BATTERY_NAME} is in warning state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: ff1cee07cb854136929b15e7084e5cfe
          name: 'Array controller discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.38,{#CNTLR_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.79]'
          key: array.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: IDRAC-MIB-SMIv2::controllerTable'
          item_prototypes:
            -
              uuid: 30bd55f2bad04fb6892e9be8a2003897
              name: 'Dell R840: {#CNTLR_NAME} Model'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.2.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.model[controllerName.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The controller's name as represented in Storage Management.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: diskarray
                -
                  tag: component
                  value: storage
            -
              uuid: 4ac7263337f74fdbad25f33d2ab1bcb4
              name: 'Dell R840: {#CNTLR_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.38.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The status of the controller itself without the propagation of any contained component status.
                Possible values:
                1: Other
                2: Unknown
                3: OK
                4: Non-critical
                5: Critical
                6: Non-recoverable
              valuemap:
                name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: diskarray
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: d3111ea966db4b4993d119eb92c5362b
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.CRIT}'
                  name: 'Dell R840: {#CNTLR_NAME} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R840: {#CNTLR_NAME} is in unrecoverable state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: ee5704a6f6fc4e5396a90fc51293fbe6
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  name: 'Dell R840: {#CNTLR_NAME} is in unrecoverable state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: DISASTER
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 3bd0b53f65114218b4ce01b4923add3b
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.WARN}'
                  name: 'Dell R840: {#CNTLR_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R840: {#CNTLR_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.CRIT}'
                    -
                      name: 'Dell R840: {#CNTLR_NAME} is in unrecoverable state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: b1f1c88993844c0c8e90a08a7e8aff9b
          name: 'FAN discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.700.12.1.5,{#FAN_DESCR},1.3.6.1.4.1.674.10892.5.4.700.12.1.8,{#TYPE},1.3.6.1.4.1.674.10892.5.4.700.12.1.7]'
          key: fan.discovery
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#TYPE}'
                value: '3'
                formulaid: A
          description: 'IDRAC-MIB-SMIv2::coolingDeviceTable'
          item_prototypes:
            -
              uuid: d2efe32f5c614dca883e433c2f887e1a
              name: 'Dell R840: {#FAN_DESCR} Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.12.1.6.{#SNMPINDEX}'
              key: 'dell.server.sensor.fan.speed[coolingDeviceReading.{#SNMPINDEX}]'
              history: 7d
              units: rpm
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the reading for a cooling device
                of subtype other than coolingDeviceSubTypeIsDiscrete. When the value
                for coolingDeviceSubType is other than coolingDeviceSubTypeIsDiscrete, the
                value returned for this attribute is the speed in RPM or the OFF/ON value
                of the cooling device. When the value for coolingDeviceSubType is
                coolingDeviceSubTypeIsDiscrete, a value is not returned for this attribute.
              tags:
                -
                  tag: component
                  value: fan
            -
              uuid: 5c0e76019b144272b9321f8c4978dfa5
              name: 'Dell R840: {#FAN_DESCR} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.12.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the probe status of the cooling device.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: fan
              trigger_prototypes:
                -
                  uuid: c35ca42a1b304ef6a279c959970ce205
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"failed"}'
                  name: 'Dell R840: {#FAN_DESCR} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the fan unit.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: c5f641ddfb9547188d937f9a5554931a
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.WARN:"nonCriticalLower"}'
                  name: 'Dell R840: {#FAN_DESCR} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the fan unit.'
                  dependencies:
                    -
                      name: 'Dell R840: {#FAN_DESCR} is in critical state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"failed"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: a444b673d69d4ea7892e6aa28bc2ec9d
          name: 'Physical disk discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.1,{#DISK_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.2]'
          key: physicaldisk.discovery
          delay: 1h
          description: 'Scanning  table of physical drive entries IDRAC-MIB-SMIv2::physicalDiskTable.'
          item_prototypes:
            -
              uuid: 7a8f30970e4c43aeac4d9c6a391109d5
              name: 'Dell R840: {#DISK_NAME} Media type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.35.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.media_type[physicalDiskMediaType.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The media type of the physical disk. Possible Values:
                1: The media type could not be determined.
                2: Hard Disk Drive (HDD).
                3: Solid State Drive (SSD).
              valuemap:
                name: 'IDRAC-MIB-SMIv2::physicalDiskMediaType'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: 18bca784665445d38bd8feb95cca2bf8
              name: 'Dell R840: {#DISK_NAME} Model name'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.6.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.model[physicalDiskProductID.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The model number of the physical disk.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: d4a5a97a7b134f3aa4e52e7512428efb
              name: 'Dell R840: {#DISK_NAME} Serial number'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.7.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The physical disk's unique identification number from the manufacturer.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: 98c1eb636c534d20ba14d19efe174d9c
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}],#1)<>last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}],#2) and length(last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}]))>0'
                  name: 'Dell R840: {#DISK_NAME} has been replaced'
                  event_name: 'Dell R840: {#DISK_NAME} has been replaced (new serial number received)'
                  priority: INFO
                  description: '{#DISK_NAME} serial number has changed. Ack to close'
                  manual_close: 'YES'
                  tags:
                    -
                      tag: scope
                      value: notice
            -
              uuid: ce34bb1a25364543aeefc8728fddab26
              name: 'Dell R840: {#DISK_NAME} Size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.11.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.size[physicalDiskCapacityInMB.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              units: B
              description: |
                MIB: IDRAC-MIB-SMIv2
                The size of the physical disk in megabytes.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: 783739113d0a46e4ab3b77aed900500e
              name: 'Dell R840: {#DISK_NAME} S.M.A.R.T. Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.31.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                Indicates whether the physical disk has received a predictive failure alert.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::BooleanType'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: f86285d7142e494998da999d56173dd7
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}])={$DISK.SMART.STATUS.FAIL:"replaceDrive"} or last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}])={$DISK.SMART.STATUS.FAIL:"replaceDriveSSDWearOut"}'
                  name: 'Dell R840: {#DISK_NAME} S.M.A.R.T. failed'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Disk probably requires replacement.'
                  dependencies:
                    -
                      name: 'Dell R840: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
            -
              uuid: d55a705be2df4770bdcab2c8691d8db1
              name: 'Dell R840: {#DISK_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.24.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The status of the physical disk itself without the propagation of any contained component status.
                Possible values:
                1: Other
                2: Unknown
                3: OK
                4: Non-critical
                5: Critical
                6: Non-recoverable
              valuemap:
                name: 'IDRAC-MIB-SMIv2::physicalDiskComponentStatus'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: 034509befd5e497ba9c255034171b6c0
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  name: 'Dell R840: {#DISK_NAME} failed'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check physical disk for warnings or errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: be7cfc31a83a4ab9a91150e480c2a1f0
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.WARN:"nonCritical"}'
                  name: 'Dell R840: {#DISK_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check physical disk for warnings or errors.'
                  dependencies:
                    -
                      name: 'Dell R840: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R840 by SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 9021b849eb1240d2bf78e9aa5b72793b
          name: 'PSU discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.600.12.1.5,{#PSU_DESCR},1.3.6.1.4.1.674.10892.5.4.600.12.1.8]'
          key: psu.discovery
          delay: 1h
          description: 'IDRAC-MIB-SMIv2::powerSupplyTable'
          item_prototypes:
            -
              uuid: 61749b25d08e4912a59f56571a9774d6
              name: 'Dell R840: {#PSU_DESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.600.12.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                0600.0012.0001.0005 This attribute defines the status of the power supply.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: psu
              trigger_prototypes:
                -
                  uuid: 2228b8364d12446181b79a7d5efdc598
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"critical"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"nonRecoverable"}'
                  name: 'Dell R840: Power supply {#PSU_DESCR} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the power supply unit for errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: c661b2832e1d4c0392e24bbb2c8eaca5
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.WARN:"nonCritical"}'
                  name: 'Dell R840: Power supply {#PSU_DESCR} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the power supply unit for errors.'
                  dependencies:
                    -
                      name: 'Dell R840: Power supply {#PSU_DESCR} is in critical state'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"critical"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: eea494f12aea4e39ae4337c8119af079
          name: 'Temperature discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.700.20.1.1,{#SENSOR_LOCALE},1.3.6.1.4.1.674.10892.5.4.700.20.1.8]'
          key: temp.discovery
          delay: 1h
          description: 'Scanning table of Temperature Probe Table IDRAC-MIB-SMIv2::temperatureProbeTable'
          item_prototypes:
            -
              uuid: 16831b8b067544b180f2fde23894ee51
              name: 'Dell R840: {#SENSOR_LOCALE} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.20.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              value_type: FLOAT
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the probe status of the temperature probe.
                Possible values:
                other(1),               -- probe status is not one of the following:
                unknown(2),             -- probe status is unknown (not known or monitored)
                ok(3),                  -- probe is reporting a value within the thresholds
                nonCriticalUpper(4),    -- probe has crossed the upper noncritical threshold
                criticalUpper(5),       -- probe has crossed the upper critical threshold
                nonRecoverableUpper(6), -- probe has crossed the upper non-recoverable threshold
                nonCriticalLower(7),    -- probe has crossed the lower noncritical threshold
                criticalLower(8),       -- probe has crossed the lower critical threshold
                nonRecoverableLower(9), -- probe has crossed the lower non-recoverable threshold
                failed(10)              -- probe is not functional
              valuemap:
                name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: temperature
              trigger_prototypes:
                -
                  uuid: 5b552c02873e4ae39b378362c083fb8b
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                  name: 'Dell R840: Probe {#SENSOR_LOCALE} is in critical status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 34638bcb7b3940e7ad69c7cf2f2c330d
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
                  name: 'Dell R840: Probe {#SENSOR_LOCALE} is in warning status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R840: Probe {#SENSOR_LOCALE} is in critical status'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 0f7c75277fb64927943339a8b32d7dfb
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])<>{$SENSOR.TEMP.STATUS.OK}'
                  name: 'Dell R840: Probe {#SENSOR_LOCALE} is not in optimal status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: INFO
                  description: 'Please check the device for faults.'
                  manual_close: 'YES'
                  dependencies:
                    -
                      name: 'Dell R840: Probe {#SENSOR_LOCALE} is in critical status'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                    -
                      name: 'Dell R840: Probe {#SENSOR_LOCALE} is in warning status'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R840 by SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
                  tags:
                    -
                      tag: scope
                      value: notice
            -
              uuid: bc5758288a7f4cdc802f01d6a0041c95
              name: 'Dell R840: {#SENSOR_LOCALE} Value'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.20.1.6.{#SNMPINDEX}'
              key: 'dell.server.sensor.temp.value[temperatureProbeReading.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: C
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the reading for a temperature probe of type other than temperatureProbeTypeIsDiscrete. When the value for temperatureProbeType is other than temperatureProbeTypeIsDiscrete, the value returned for this attribute is the temperature that the probe is reading in Centigrade. When the value for temperatureProbeType is temperatureProbeTypeIsDiscrete, a value is not returned for this attribute.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: temperature
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 7db9cdc32ed841b5aac7cdc456be8732
          name: 'Virtual disk discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.1,{#DISK_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.2]'
          key: virtualdisk.discovery
          delay: 1h
          description: 'IDRAC-MIB-SMIv2::virtualDiskTable'
          item_prototypes:
            -
              uuid: 1d6d0817bf914664be165d9478aa0514
              name: 'Dell R840: {#DISK_NAME} Layout type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.13.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.layout[virtualDiskLayout.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The virtual disk's RAID type.
                Possible values:
                1: Not one of the following
                2: RAID-0
                3: RAID-1
                4: RAID-5
                5: RAID-6
                6: RAID-10
                7: RAID-50
                8: RAID-60
                9: Concatenated RAID 1
                10: Concatenated RAID 5
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskLayout'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: a26ef2f0b1364a4fb3372f9038b377b7
              name: 'Dell R840: {#DISK_NAME} Read policy'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.11.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.readpolicy[virtualDiskReadPolicy.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The read policy used by the controller for read operations on this virtual disk.
                Possible values:
                1: No Read Ahead.
                2: Read Ahead.
                3: Adaptive Read Ahead.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskReadPolicy'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: 23fddb41194f4497b140f210d3a91450
              name: 'Dell R840: {#DISK_NAME} Size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.6.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.size[virtualDiskSizeInMB.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              units: B
              description: |
                MIB: IDRAC-MIB-SMIv2
                The size of the virtual disk in megabytes.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: 602c22ba4876450aacde99e08205c5d8
              name: 'Dell R840: {#DISK_NAME} Current state'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.30.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.state[virtualDiskOperationalState.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The state of the virtual disk when there are progressive operations ongoing.
                Possible values:
                1: There is no active operation running.
                2: The virtual disk configuration has changed. The physical disks included in the virtual disk are being modified to support the new configuration.
                3: A Consistency Check (CC) is being performed on the virtual disk.
                4: The virtual disk is being initialized.
                5: BackGround Initialization (BGI) is being performed on the virtual disk.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskOperationalState'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: 14c253cbc8174d1584bcb30f13c63050
              name: 'Dell R840: {#DISK_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.4.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The current state of this virtual disk (which includes any member physical disks.)
                Possible states:
                1: The current state could not be determined.
                2: The virtual disk is operating normally or optimally.
                3: The virtual disk has encountered a failure. Data on the disk is lost or is about to be lost.
                4: The virtual disk encountered a failure with one or all of the constituent redundant physical disks.
                The data on the virtual disk might no longer be fault tolerant.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskState'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
              trigger_prototypes:
                -
                  uuid: 96f488d383e9445b9646ff18f69eea9a
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.CRIT:"failed"}'
                  name: 'Dell R840: {#DISK_NAME} failed'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check the virtual disk for warnings or errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 37777a2664ea46399847736412b937c5
                  expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.WARN:"degraded"}'
                  name: 'Dell R840: {#DISK_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the virtual disk for warnings or errors.'
                  dependencies:
                    -
                      name: 'Dell R840: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R840 by SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.CRIT:"failed"}'
                  tags:
                    -
                      tag: scope
                      value: availability
            -
              uuid: 1e6bb77e2d114879b86c0afa07161079
              name: 'Dell R840: {#DISK_NAME} Write policy'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.10.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.writepolicy[virtualDiskWritePolicy.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The write policy used by the controller for write operations on this virtual disk.
                Possible values:
                1: Write Through.
                2: Write Back.
                3: Force Write Back.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskWritePolicy'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
      tags:
        -
          tag: class
          value: hardware
        -
          tag: target
          value: dell
        -
          tag: target
          value: 'dell poweredge'
      macros:
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
          value: '3'
          description: 'The critical status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.OK}'
          value: '2'
          description: 'The OK status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.CRIT}'
          value: '5'
          description: 'The critical status of the disk array for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.FAIL}'
          value: '6'
          description: 'The disaster status of the disk array for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the disk array for trigger expression.'
        -
          macro: '{$DISK.SMART.STATUS.FAIL}'
          value: '1'
          description: 'The critical S.M.A.R.T status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.FAIL:"critical"}'
          value: '5'
          description: 'The critical status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.FAIL:"nonRecoverable"}'
          value: '6'
          description: 'The critical status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.WARN:"nonCritical"}'
          value: '4'
          description: 'The warning status of the disk for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"criticalLower"}'
          value: '8'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"criticalUpper"}'
          value: '5'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"failed"}'
          value: '10'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"nonRecoverableLower"}'
          value: '9'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"nonRecoverableUpper"}'
          value: '6'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.WARN:"nonCriticalLower"}'
          value: '7'
          description: 'The warning value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.WARN:"nonCriticalUpper"}'
          value: '4'
          description: 'The warning value of the FAN sensor for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.CRIT}'
          value: '5'
          description: 'The critical status of the health for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.DISASTER}'
          value: '6'
          description: 'The disaster status of the health for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the health for trigger expression.'
        -
          macro: '{$PSU.STATUS.CRIT:"critical"}'
          value: '5'
          description: 'The critical value of the PSU sensor for trigger expression.'
        -
          macro: '{$PSU.STATUS.CRIT:"nonRecoverable"}'
          value: '6'
          description: 'The critical value of the PSU sensor for trigger expression.'
        -
          macro: '{$PSU.STATUS.WARN:"nonCritical"}'
          value: '4'
          description: 'The warning value of the PSU sensor for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"criticalLower"}'
          value: '8'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"}'
          value: '5'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
          value: '9'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"}'
          value: '6'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.OK}'
          value: '3'
          description: 'The OK status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
          value: '7'
          description: 'The warning status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"}'
          value: '4'
          description: 'The warning status of the temperature probe for trigger expression.'
        -
          macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        -
          macro: '{$VDISK.STATUS.CRIT:"failed"}'
          value: '3'
          description: 'The critical status of the virtual disk for trigger expression.'
        -
          macro: '{$VDISK.STATUS.WARN:"degraded"}'
          value: '4'
          description: 'The warning status of the virtual disk for trigger expression.'
      valuemaps:
        -
          uuid: 644e180666f042d79bed40ac4e55c9bd
          name: 'IDRAC-MIB-SMIv2::batteryState'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Ready
            -
              value: '3'
              newvalue: Failed
            -
              value: '4'
              newvalue: Degraded
            -
              value: '5'
              newvalue: Missing
            -
              value: '6'
              newvalue: Charging
            -
              value: '7'
              newvalue: 'Below threshold'
        -
          uuid: 42f304068b834ba48db2eb28cb29d9f3
          name: 'IDRAC-MIB-SMIv2::BooleanType'
          mappings:
            -
              value: '0'
              newvalue: ok
            -
              value: '1'
              newvalue: failed
        -
          uuid: ee86b423d3444d57b7fc11fbb4989177
          name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCritical
            -
              value: '5'
              newvalue: critical
            -
              value: '6'
              newvalue: nonRecoverable
        -
          uuid: f655a6ed92e6430d9dbb7eff874f6307
          name: 'IDRAC-MIB-SMIv2::physicalDiskComponentStatus'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCritical
            -
              value: '5'
              newvalue: critical
            -
              value: '6'
              newvalue: nonRecoverable
        -
          uuid: 3b74eb4e2b6144da845dfa5068f2dd08
          name: 'IDRAC-MIB-SMIv2::physicalDiskMediaType'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: HDD
            -
              value: '3'
              newvalue: SSD
        -
          uuid: e87119147cd74d299861d14e1bc9c1af
          name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCriticalUpper
            -
              value: '5'
              newvalue: criticalUpper
            -
              value: '6'
              newvalue: nonRecoverableUpper
            -
              value: '7'
              newvalue: nonCriticalLower
            -
              value: '8'
              newvalue: criticalLower
            -
              value: '9'
              newvalue: nonRecoverableLower
            -
              value: '10'
              newvalue: failed
        -
          uuid: b513b8f45d6a4d17925669c35a68d7b6
          name: 'IDRAC-MIB-SMIv2::virtualDiskLayout'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: RAID-0
            -
              value: '3'
              newvalue: RAID-1
            -
              value: '4'
              newvalue: RAID-5
            -
              value: '5'
              newvalue: RAID-6
            -
              value: '6'
              newvalue: RAID-10
            -
              value: '7'
              newvalue: RAID-50
            -
              value: '8'
              newvalue: RAID-60
            -
              value: '9'
              newvalue: 'Concatenated RAID 1'
            -
              value: '10'
              newvalue: 'Concatenated RAID 5'
        -
          uuid: 18152f06a04b4dfd84ade32d0a316769
          name: 'IDRAC-MIB-SMIv2::virtualDiskOperationalState'
          mappings:
            -
              value: '1'
              newvalue: 'Not applicable'
            -
              value: '2'
              newvalue: Reconstructing
            -
              value: '3'
              newvalue: Resynching
            -
              value: '4'
              newvalue: Initializing
            -
              value: '5'
              newvalue: 'Background init'
        -
          uuid: 09d591b105544625acf40b12b0569c9c
          name: 'IDRAC-MIB-SMIv2::virtualDiskReadPolicy'
          mappings:
            -
              value: '1'
              newvalue: 'No Read Ahead'
            -
              value: '2'
              newvalue: 'Read Ahead'
            -
              value: '3'
              newvalue: 'Adaptive Read Ahead'
        -
          uuid: 2cae2d1a9ad74ffe861f09a11f644550
          name: 'IDRAC-MIB-SMIv2::virtualDiskState'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Online
            -
              value: '3'
              newvalue: Failed
            -
              value: '4'
              newvalue: Degraded
        -
          uuid: 6b19b83ac05e49749f592db773ab6db3
          name: 'IDRAC-MIB-SMIv2::virtualDiskWritePolicy'
          mappings:
            -
              value: '1'
              newvalue: 'Write Through'
            -
              value: '2'
              newvalue: 'Write Back'
            -
              value: '3'
              newvalue: 'Force Write Back'
        -
          uuid: 39239bfc67b84ac9a4854f5d10d72f58
          name: zabbix.host.available
          mappings:
            -
              value: '0'
              newvalue: 'not available'
            -
              value: '1'
              newvalue: available
            -
              value: '2'
              newvalue: unknown
  triggers:
    -
      uuid: def9f4b7093f421893d2a65f6416cfe5
      expression: '(last(/DELL PowerEdge R840 by SNMP/dell.server.hw.uptime[hrSystemUptime])>0 and last(/DELL PowerEdge R840 by SNMP/dell.server.hw.uptime[hrSystemUptime])<10m) or (last(/DELL PowerEdge R840 by SNMP/dell.server.hw.uptime[hrSystemUptime])=0 and last(/DELL PowerEdge R840 by SNMP/dell.server.net.uptime[sysUpTime])<10m)'
      name: 'Dell R840: Host has been restarted'
      event_name: 'Dell R840: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      tags:
        -
          tag: scope
          value: notice
