zabbix_export:
  version: '6.0'
  date: '2022-04-06T19:27:15Z'
  groups:
    -
      uuid: e960332b3f6c46a1956486d4f3f99fce
      name: 'Templates/Server hardware'
  templates:
    -
      uuid: fe5b8448661f41b9a6d948fccd7f9045
      template: 'DELL PowerEdge R720 SNMP'
      name: 'DELL PowerEdge R720 SNMP'
      description: |
        Template for DELL PowerEdge R720 servers with iDRAC version 7 and later.
        
        MIBs used:
        IDRAC-MIB-SMIv2
        SNMPv2-MIB
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/426752-discussion-thread-for-official-zabbix-dell-templates
        
        Template tooling version used: 0.41
      groups:
        -
          name: 'Templates/Server hardware'
      items:
        -
          uuid: f14d8e90f1cd4728a33ce6c9d42be4f9
          name: 'Dell R720: System contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: 'dell.server.contact[sysContact]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person. If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
        -
          uuid: a91ac1f87e1542059109d7da8584423d
          name: 'Dell R720: System description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: 'dell.server.descr[sysDescr]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
        -
          uuid: 6aa71cd35e9d44ad95b620b8822694e0
          name: 'Dell R720: Firmware version'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.1.8.0
          key: 'dell.server.hw.firmware[racFirmwareVersion]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the firmware version of a remote access card.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 8b88b49aa9584e0e99f1ac5933ece512
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.firmware[racFirmwareVersion],#1)<>last(/DELL PowerEdge R720 SNMP/dell.server.hw.firmware[racFirmwareVersion],#2) and length(last(/DELL PowerEdge R720 SNMP/dell.server.hw.firmware[racFirmwareVersion]))>0'
              name: 'Dell R720: Firmware has changed'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'Firmware version has changed. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 937187c26f7e4d4a8132d513a5830ed1
          name: 'Dell R720: Hardware model name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.12.0
          key: 'dell.server.hw.model[systemModelName]'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the model name of the system.
          inventory_link: MODEL
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: eae1e8f2b47242769cb1fdc9343accc9
          name: 'Dell R720: Hardware serial number'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.2.0
          key: 'dell.server.hw.serialnumber[systemServiceTag]'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the service tag of the system.
          inventory_link: SERIALNO_A
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 7d8f8509b7c24cd495ca16f3b66311a2
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.serialnumber[systemServiceTag],#1)<>last(/DELL PowerEdge R720 SNMP/dell.server.hw.serialnumber[systemServiceTag],#2) and length(last(/DELL PowerEdge R720 SNMP/dell.server.hw.serialnumber[systemServiceTag]))>0'
              name: 'Dell R720: Device has been replaced'
              event_name: 'Dell R720: Device has been replaced (new serial number received)'
              priority: INFO
              description: 'Device serial number has changed. Ack to close'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 835ac73990c842ec8d2f9aa9777f85cb
          name: 'Dell R720: System location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: 'dell.server.location[sysLocation]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., 'telephone closet, 3rd floor'). If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: 5a7cdf4b9d5c4f75bcbd3a0de38d88a8
          name: 'Dell R720: System name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: 'dell.server.name[sysName]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node. By convention, this is the node's fully-qualified domain name. If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 8223bb1771ff435eab1e2473073daf63
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.name[sysName],#1)<>last(/DELL PowerEdge R720 SNMP/dell.server.name[sysName],#2) and length(last(/DELL PowerEdge R720 SNMP/dell.server.name[sysName]))>0'
              name: 'Dell R720: System name has changed'
              event_name: 'Dell R720: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'System name has changed. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 810d426af24f4646b3abee04071c3d37
          name: 'Dell R720: System object ID'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.2.0
          key: 'dell.server.objectid[sysObjectID]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity. This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining 'what kind of box' is being managed. For example, if vendor 'Flintstones, Inc.' was assigned the subtree 1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its 'Fred Router'.
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: system
        -
          uuid: 1f5c2f25cbf84113854c521a6dd1e1ba
          name: 'Dell R720: Overall system health status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.1.0
          key: 'dell.server.status[globalSystemStatus]'
          history: 7d
          trends: 0d
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the overall rollup status of all components in the system being monitored by the remote access card. Includes system, storage, IO devices, iDRAC, CPU, memory, etc.
          valuemap:
            name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: health
            -
              tag: component
              value: system
          triggers:
            -
              uuid: 8a3c959a946b4945848857b249b6384e
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.DISASTER}'
              name: 'Dell R720: System is in unrecoverable state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: DISASTER
              description: 'Please check the device for faults.'
              tags:
                -
                  tag: scope
                  value: availability
            -
              uuid: 922bb76a936741aab560a6c7fdf1609f
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.CRIT}'
              name: 'Dell R720: System status is in critical state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Please check the device for errors.'
              tags:
                -
                  tag: scope
                  value: availability
            -
              uuid: e5335391a2a74e87a4f9964e2b421150
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.WARN}'
              name: 'Dell R720: System status is in warning state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Please check the device for warnings.'
              dependencies:
                -
                  name: 'Dell R720: System status is in critical state'
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.status[globalSystemStatus])={$HEALTH.STATUS.CRIT}'
              tags:
                -
                  tag: scope
                  value: availability
        -
          uuid: 1bf8b000a1644bdca928b96208e975bd
          name: 'Dell R720: Operating system'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.1.3.6.0
          key: 'dell.server.sw.os[systemOSName]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: IDRAC-MIB-SMIv2
            This attribute defines the name of the operating system that the host is running.
          inventory_link: OS
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: a9556b21495c4ee4acba1c7b2be8b5b6
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sw.os[systemOSName],#1)<>last(/DELL PowerEdge R720 SNMP/dell.server.sw.os[systemOSName],#2) and length(last(/DELL PowerEdge R720 SNMP/dell.server.sw.os[systemOSName]))>0'
              name: 'Dell R720: Operating system description has changed'
              priority: INFO
              description: 'Operating system description has changed. Possibly, the system has been updated or replaced. Ack to close.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: b55a66a029c34e33b68ba0c542347fb3
          name: 'Dell R720: Uptime'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'dell.server.uptime[sysUpTime]'
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: component
              value: system
          triggers:
            -
              uuid: a5505bd8d3f64ea1ae02e421a4114d2f
              expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.uptime[sysUpTime])<10m'
              name: 'Dell R720: has been restarted'
              event_name: 'Dell R720: {HOST.NAME} has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: fd84e96399ef4ceb8a6c922f63fc9997
          name: 'Dell R720: SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          history: 2w
          trends: '0'
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            -
              tag: component
              value: network
        -
          uuid: 1f6a6419f36045b6a139f0af2fb55c01
          name: 'Dell R720: SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          valuemap:
            name: zabbix.host.available
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: component
              value: health
            -
              tag: component
              value: system
          triggers:
            -
              uuid: ff70ec8e9ea64cbf9638e6d8f5282b0f
              expression: 'max(/DELL PowerEdge R720 SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'Dell R720: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              tags:
                -
                  tag: scope
                  value: availability
      discovery_rules:
        -
          uuid: e4ef7e2e0a7c443185f61c71fa2e9c73
          name: 'Array controller cache discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#BATTERY_NUM},1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.1,{#BATTERY_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.21]'
          key: array.cache.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: IDRAC-MIB-SMIv2::batteryTable'
          item_prototypes:
            -
              uuid: c84a33abe34d4eecb9160d5682986422
              name: 'Dell R720: {#BATTERY_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.15.1.4.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                Current state of battery.
                Possible values:
                1: The current state could not be determined.
                2: The battery is operating normally.
                3: The battery has failed and needs to be replaced.
                4: The battery temperature is high or charge level is depleting.
                5: The battery is missing or not detected.
                6: The battery is undergoing the re-charge phase.
                7: The battery voltage or charge level is below the threshold.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::batteryState'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: battery
                -
                  tag: component
                  value: diskarray
              trigger_prototypes:
                -
                  uuid: 560ced8dc58a498db8f511e8ecbd7a7d
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                  name: 'Dell R720: {#BATTERY_NAME} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: c3f0750f9d0f4875b81a9381570a9cca
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
                  name: 'Dell R720: {#BATTERY_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R720: {#BATTERY_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: d79579790be2485e9f8227be9f460b18
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])<>{$DISK.ARRAY.CACHE.BATTERY.STATUS.OK}'
                  name: 'Dell R720: {#BATTERY_NAME} is not in optimal state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R720: {#BATTERY_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
                    -
                      name: 'Dell R720: {#BATTERY_NAME} is in warning state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.cache.battery.status[batteryState.{#SNMPINDEX}])={$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: f0ece8764a4443319da625257eebd2c7
          name: 'Array controller discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.38,{#CNTLR_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.79]'
          key: array.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: IDRAC-MIB-SMIv2::controllerTable'
          item_prototypes:
            -
              uuid: 3946776d85a3444c9da83a3cc123cb7f
              name: 'Dell R720: {#CNTLR_NAME} Model'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.2.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.model[controllerName.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The controller's name as represented in Storage Management.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: diskarray
                -
                  tag: component
                  value: storage
            -
              uuid: 16cff0e125484ca38ca901e6fd8cedcc
              name: 'Dell R720: {#CNTLR_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.1.1.38.{#SNMPINDEX}'
              key: 'dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The status of the controller itself without the propagation of any contained component status.
                Possible values:
                1: Other
                2: Unknown
                3: OK
                4: Non-critical
                5: Critical
                6: Non-recoverable
              valuemap:
                name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: diskarray
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: dfd11c71843c4d19b8c216864146217a
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.CRIT}'
                  name: 'Dell R720: {#CNTLR_NAME} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R720: {#CNTLR_NAME} is in unrecoverable state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 73b701ac3ef448ceab5df956c9ebefe6
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  name: 'Dell R720: {#CNTLR_NAME} is in unrecoverable state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: DISASTER
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 4c17ab46f1624c81b5f6ccebaddf76e2
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.WARN}'
                  name: 'Dell R720: {#CNTLR_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R720: {#CNTLR_NAME} is in critical state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.CRIT}'
                    -
                      name: 'Dell R720: {#CNTLR_NAME} is in unrecoverable state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.diskarray.status[controllerComponentStatus.{#SNMPINDEX}])={$DISK.ARRAY.STATUS.FAIL}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 110ba42b9a114a879ecc4afaad7d4dc4
          name: 'FAN discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.700.12.1.5,{#FAN_DESCR},1.3.6.1.4.1.674.10892.5.4.700.12.1.8,{#TYPE},1.3.6.1.4.1.674.10892.5.4.700.12.1.7]'
          key: fan.discovery
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#TYPE}'
                value: '3'
                formulaid: A
          description: 'IDRAC-MIB-SMIv2::coolingDeviceTable'
          item_prototypes:
            -
              uuid: 9f2be3b0fc2f496dbdfcf5d6dbb4df7f
              name: 'Dell R720: {#FAN_DESCR} Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.12.1.6.{#SNMPINDEX}'
              key: 'dell.server.sensor.fan.speed[coolingDeviceReading.{#SNMPINDEX}]'
              history: 7d
              units: rpm
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the reading for a cooling device
                of subtype other than coolingDeviceSubTypeIsDiscrete. When the value
                for coolingDeviceSubType is other than coolingDeviceSubTypeIsDiscrete, the
                value returned for this attribute is the speed in RPM or the OFF/ON value
                of the cooling device. When the value for coolingDeviceSubType is
                coolingDeviceSubTypeIsDiscrete, a value is not returned for this attribute.
              tags:
                -
                  tag: component
                  value: fan
            -
              uuid: 90e15bb8c3d24a8b80f4c23893eb0c4b
              name: 'Dell R720: {#FAN_DESCR} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.12.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the probe status of the cooling device.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: fan
              trigger_prototypes:
                -
                  uuid: 02e8e8e511c04ce6b1ced1c9515e4960
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"failed"}'
                  name: 'Dell R720: {#FAN_DESCR} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the fan unit.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 50a0052574744bc0870bfaab56637f16
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.WARN:"nonCriticalLower"}'
                  name: 'Dell R720: {#FAN_DESCR} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the fan unit.'
                  dependencies:
                    -
                      name: 'Dell R720: {#FAN_DESCR} is in critical state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"nonRecoverableLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.fan.status[coolingDeviceStatus.{#SNMPINDEX}])={$FAN.STATUS.CRIT:"failed"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: faf7d088fb0f43ae9617ff3251000c28
          name: 'Physical disk discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.1,{#DISK_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.2]'
          key: physicaldisk.discovery
          delay: 1h
          description: 'Scanning  table of physical drive entries IDRAC-MIB-SMIv2::physicalDiskTable.'
          item_prototypes:
            -
              uuid: 2f9573255c124323b2798a983acb5724
              name: 'Dell R720: {#DISK_NAME} Media type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.35.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.media_type[physicalDiskMediaType.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The media type of the physical disk. Possible Values:
                1: The media type could not be determined.
                2: Hard Disk Drive (HDD).
                3: Solid State Drive (SSD).
              valuemap:
                name: 'IDRAC-MIB-SMIv2::physicalDiskMediaType'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: ff3c89e56e914bb4a673609f5b820e5b
              name: 'Dell R720: {#DISK_NAME} Model name'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.6.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.model[physicalDiskProductID.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The model number of the physical disk.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: cd29b1a0f2414d32a09a5750203b1015
              name: 'Dell R720: {#DISK_NAME} Serial number'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.7.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: IDRAC-MIB-SMIv2
                The physical disk's unique identification number from the manufacturer.
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: 10427c2fdc4243ff9735c3491c65e935
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}],#1)<>last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}],#2) and length(last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.serialnumber[physicalDiskSerialNo.{#SNMPINDEX}]))>0'
                  name: 'Dell R720: {#DISK_NAME} has been replaced'
                  event_name: 'Dell R720: {#DISK_NAME} has been replaced (new serial number received)'
                  priority: INFO
                  description: '{#DISK_NAME} serial number has changed. Ack to close'
                  manual_close: 'YES'
                  tags:
                    -
                      tag: scope
                      value: notice
            -
              uuid: f0416dd5af4f4f83b6e9fc7d3ba7fb25
              name: 'Dell R720: {#DISK_NAME} Size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.11.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.size[physicalDiskCapacityInMB.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              units: B
              description: |
                MIB: IDRAC-MIB-SMIv2
                The size of the physical disk in megabytes.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
            -
              uuid: 6224bb49492a41bcbe20403b3d2af84e
              name: 'Dell R720: {#DISK_NAME} S.M.A.R.T. Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.31.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                Indicates whether the physical disk has received a predictive failure alert.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::BooleanType'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: 7da1638a51604539a0e1c01b4b038504
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}])={$DISK.SMART.STATUS.FAIL:"replaceDrive"} or last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.smart_status[physicalDiskSmartAlertIndication.{#SNMPINDEX}])={$DISK.SMART.STATUS.FAIL:"replaceDriveSSDWearOut"}'
                  name: 'Dell R720: {#DISK_NAME} S.M.A.R.T. failed'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Disk probably requires replacement.'
                  dependencies:
                    -
                      name: 'Dell R720: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
            -
              uuid: da48f12f812d4ac6a8c63464cd6fb316
              name: 'Dell R720: {#DISK_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.130.4.1.24.{#SNMPINDEX}'
              key: 'dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The status of the physical disk itself without the propagation of any contained component status.
                Possible values:
                1: Other
                2: Unknown
                3: OK
                4: Non-critical
                5: Critical
                6: Non-recoverable
              valuemap:
                name: 'IDRAC-MIB-SMIv2::physicalDiskComponentStatus'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: physicaldisk
                -
                  tag: component
                  value: storage
              trigger_prototypes:
                -
                  uuid: 38cfba465f624cf897d0650e5a4290c3
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  name: 'Dell R720: {#DISK_NAME} failed'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check physical disk for warnings or errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 779c4a8c62f24d238b53f0ed8ebfcf5b
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.WARN:"nonCritical"}'
                  name: 'Dell R720: {#DISK_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check physical disk for warnings or errors.'
                  dependencies:
                    -
                      name: 'Dell R720: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"critical"} or last(/DELL PowerEdge R720 SNMP/dell.server.hw.physicaldisk.status[physicalDiskComponentStatus.{#SNMPINDEX}])={$DISK.STATUS.FAIL:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 2566e537876d40f98dac264f4b4c095c
          name: 'PSU discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.600.12.1.5,{#PSU_DESCR},1.3.6.1.4.1.674.10892.5.4.600.12.1.8]'
          key: psu.discovery
          delay: 1h
          description: 'IDRAC-MIB-SMIv2::powerSupplyTable'
          item_prototypes:
            -
              uuid: 465f843523794ceb90dedd8bb2fc3436
              name: 'Dell R720: {#PSU_DESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.600.12.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              description: |
                MIB: IDRAC-MIB-SMIv2
                0600.0012.0001.0005 This attribute defines the status of the power supply.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: psu
              trigger_prototypes:
                -
                  uuid: b40edbb84f174a98be55b659c7766554
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"critical"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"nonRecoverable"}'
                  name: 'Dell R720: Power supply {#PSU_DESCR} is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the power supply unit for errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 217985fe9aed41338e8c2a48af3ceb99
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.WARN:"nonCritical"}'
                  name: 'Dell R720: Power supply {#PSU_DESCR} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the power supply unit for errors.'
                  dependencies:
                    -
                      name: 'Dell R720: Power supply {#PSU_DESCR} is in critical state'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"critical"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.psu.status[powerSupplyStatus.{#SNMPINDEX}])={$PSU.STATUS.CRIT:"nonRecoverable"}'
                  tags:
                    -
                      tag: scope
                      value: availability
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 7dce235289e54370a24e50ae81eeb8f8
          name: 'Temperature discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.4.700.20.1.1,{#SENSOR_LOCALE},1.3.6.1.4.1.674.10892.5.4.700.20.1.8]'
          key: temp.discovery
          delay: 1h
          description: 'Scanning table of Temperature Probe Table IDRAC-MIB-SMIv2::temperatureProbeTable'
          item_prototypes:
            -
              uuid: 7d05a88487ae4cb1ae0834cdd617c68d
              name: 'Dell R720: {#SENSOR_LOCALE} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.20.1.5.{#SNMPINDEX}'
              key: 'dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              value_type: FLOAT
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the probe status of the temperature probe.
                Possible values:
                other(1),               -- probe status is not one of the following:
                unknown(2),             -- probe status is unknown (not known or monitored)
                ok(3),                  -- probe is reporting a value within the thresholds
                nonCriticalUpper(4),    -- probe has crossed the upper noncritical threshold
                criticalUpper(5),       -- probe has crossed the upper critical threshold
                nonRecoverableUpper(6), -- probe has crossed the upper non-recoverable threshold
                nonCriticalLower(7),    -- probe has crossed the lower noncritical threshold
                criticalLower(8),       -- probe has crossed the lower critical threshold
                nonRecoverableLower(9), -- probe has crossed the lower non-recoverable threshold
                failed(10)              -- probe is not functional
              valuemap:
                name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: temperature
              trigger_prototypes:
                -
                  uuid: 153e7512141f489b84dcc35a7350d6bf
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                  name: 'Dell R720: Probe {#SENSOR_LOCALE} is in critical status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: eec3e64901d44a60a268ed30a8394d36
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
                  name: 'Dell R720: Probe {#SENSOR_LOCALE} is in warning status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for faults.'
                  dependencies:
                    -
                      name: 'Dell R720: Probe {#SENSOR_LOCALE} is in critical status'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: 16dec7f89d9a44c0954bf29c3e32040b
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])<>{$SENSOR.TEMP.STATUS.OK}'
                  name: 'Dell R720: Probe {#SENSOR_LOCALE} is not in optimal status'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: INFO
                  description: 'Please check the device for faults.'
                  manual_close: 'YES'
                  dependencies:
                    -
                      name: 'Dell R720: Probe {#SENSOR_LOCALE} is in critical status'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"criticalLower"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
                    -
                      name: 'Dell R720: Probe {#SENSOR_LOCALE} is in warning status'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"} or last(/DELL PowerEdge R720 SNMP/dell.server.sensor.temp.status[temperatureProbeStatus.{#SNMPINDEX}])={$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
                  tags:
                    -
                      tag: scope
                      value: notice
            -
              uuid: 95fc15b305fb429abcd1d1a1b44f401d
              name: 'Dell R720: {#SENSOR_LOCALE} Value'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.20.1.6.{#SNMPINDEX}'
              key: 'dell.server.sensor.temp.value[temperatureProbeReading.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: C
              description: |
                MIB: IDRAC-MIB-SMIv2
                This attribute defines the reading for a temperature probe of type other than temperatureProbeTypeIsDiscrete. When the value for temperatureProbeType is other than temperatureProbeTypeIsDiscrete, the value returned for this attribute is the temperature that the probe is reading in Centigrade. When the value for temperatureProbeType is temperatureProbeTypeIsDiscrete, a value is not returned for this attribute.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: temperature
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        -
          uuid: 046e6319be984d9a9436e319c30dd512
          name: 'Virtual disk discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.1,{#DISK_NAME},1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.2]'
          key: virtualdisk.discovery
          delay: 1h
          description: 'IDRAC-MIB-SMIv2::virtualDiskTable'
          item_prototypes:
            -
              uuid: e7179f83b1f3491fb57fea3d3d24752f
              name: 'Dell R720: {#DISK_NAME} Layout type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.13.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.layout[virtualDiskLayout.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The virtual disk's RAID type.
                Possible values:
                1: Not one of the following
                2: RAID-0
                3: RAID-1
                4: RAID-5
                5: RAID-6
                6: RAID-10
                7: RAID-50
                8: RAID-60
                9: Concatenated RAID 1
                10: Concatenated RAID 5
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskLayout'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: a815b67fc1f840b7b805ebd406effa0a
              name: 'Dell R720: {#DISK_NAME} Read policy'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.11.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.readpolicy[virtualDiskReadPolicy.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The read policy used by the controller for read operations on this virtual disk.
                Possible values:
                1: No Read Ahead.
                2: Read Ahead.
                3: Adaptive Read Ahead.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskReadPolicy'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: 72b8b0d3470d45e79a8fbc806400182e
              name: 'Dell R720: {#DISK_NAME} Size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.6.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.size[virtualDiskSizeInMB.{#SNMPINDEX}]'
              history: 7d
              trends: 0d
              units: B
              description: |
                MIB: IDRAC-MIB-SMIv2
                The size of the virtual disk in megabytes.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: b37a4f8be7894bbd910e2fa7e938285a
              name: 'Dell R720: {#DISK_NAME} Current state'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.30.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.state[virtualDiskOperationalState.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The state of the virtual disk when there are progressive operations ongoing.
                Possible values:
                1: There is no active operation running.
                2: The virtual disk configuration has changed. The physical disks included in the virtual disk are being modified to support the new configuration.
                3: A Consistency Check (CC) is being performed on the virtual disk.
                4: The virtual disk is being initialized.
                5: BackGround Initialization (BGI) is being performed on the virtual disk.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskOperationalState'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
            -
              uuid: f396d0643fda4971b420785a3cf33af1
              name: 'Dell R720: {#DISK_NAME} Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.4.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: IDRAC-MIB-SMIv2
                The current state of this virtual disk (which includes any member physical disks.)
                Possible states:
                1: The current state could not be determined.
                2: The virtual disk is operating normally or optimally.
                3: The virtual disk has encountered a failure. Data on the disk is lost or is about to be lost.
                4: The virtual disk encountered a failure with one or all of the constituent redundant physical disks.
                The data on the virtual disk might no longer be fault tolerant.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskState'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
              trigger_prototypes:
                -
                  uuid: 42bcb2a7d63a46e082f3b6a1c5997fee
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.CRIT:"failed"}'
                  name: 'Dell R720: {#DISK_NAME} failed'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'Please check the virtual disk for warnings or errors.'
                  tags:
                    -
                      tag: scope
                      value: availability
                -
                  uuid: ea36db6addcf4bcb9f1c3b822e6c4422
                  expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.WARN:"degraded"}'
                  name: 'Dell R720: {#DISK_NAME} is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the virtual disk for warnings or errors.'
                  dependencies:
                    -
                      name: 'Dell R720: {#DISK_NAME} failed'
                      expression: 'last(/DELL PowerEdge R720 SNMP/dell.server.hw.virtualdisk.status[virtualDiskState.{#SNMPINDEX}])={$VDISK.STATUS.CRIT:"failed"}'
                  tags:
                    -
                      tag: scope
                      value: availability
            -
              uuid: 0acfd1b6e15b43778ca1c8bb5f61b2fa
              name: 'Dell R720: {#DISK_NAME} Write policy'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.5.1.20.140.1.1.10.{#SNMPINDEX}'
              key: 'dell.server.hw.virtualdisk.writepolicy[virtualDiskWritePolicy.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              description: |
                MIB: IDRAC-MIB-SMIv2
                The write policy used by the controller for write operations on this virtual disk.
                Possible values:
                1: Write Through.
                2: Write Back.
                3: Force Write Back.
              valuemap:
                name: 'IDRAC-MIB-SMIv2::virtualDiskWritePolicy'
              tags:
                -
                  tag: component
                  value: storage
                -
                  tag: component
                  value: virtualdisk
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
      tags:
        -
          tag: class
          value: hardware
        -
          tag: target
          value: dell
        -
          tag: target
          value: 'dell poweredge'
      macros:
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.CRIT}'
          value: '3'
          description: 'The critical status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.OK}'
          value: '2'
          description: 'The OK status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.CACHE.BATTERY.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the disk array cache battery for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.CRIT}'
          value: '5'
          description: 'The critical status of the disk array for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.FAIL}'
          value: '6'
          description: 'The disaster status of the disk array for trigger expression.'
        -
          macro: '{$DISK.ARRAY.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the disk array for trigger expression.'
        -
          macro: '{$DISK.SMART.STATUS.FAIL}'
          value: '1'
          description: 'The critical S.M.A.R.T status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.FAIL:"critical"}'
          value: '5'
          description: 'The critical status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.FAIL:"nonRecoverable"}'
          value: '6'
          description: 'The critical status of the disk for trigger expression.'
        -
          macro: '{$DISK.STATUS.WARN:"nonCritical"}'
          value: '4'
          description: 'The warning status of the disk for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"criticalLower"}'
          value: '8'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"criticalUpper"}'
          value: '5'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"failed"}'
          value: '10'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"nonRecoverableLower"}'
          value: '9'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.CRIT:"nonRecoverableUpper"}'
          value: '6'
          description: 'The critical value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.WARN:"nonCriticalLower"}'
          value: '7'
          description: 'The warning value of the FAN sensor for trigger expression.'
        -
          macro: '{$FAN.STATUS.WARN:"nonCriticalUpper"}'
          value: '4'
          description: 'The warning value of the FAN sensor for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.CRIT}'
          value: '5'
          description: 'The critical status of the health for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.DISASTER}'
          value: '6'
          description: 'The disaster status of the health for trigger expression.'
        -
          macro: '{$HEALTH.STATUS.WARN}'
          value: '4'
          description: 'The warning status of the health for trigger expression.'
        -
          macro: '{$PSU.STATUS.CRIT:"critical"}'
          value: '5'
          description: 'The critical value of the PSU sensor for trigger expression.'
        -
          macro: '{$PSU.STATUS.CRIT:"nonRecoverable"}'
          value: '6'
          description: 'The critical value of the PSU sensor for trigger expression.'
        -
          macro: '{$PSU.STATUS.WARN:"nonCritical"}'
          value: '4'
          description: 'The warning value of the PSU sensor for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"criticalLower"}'
          value: '8'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"criticalUpper"}'
          value: '5'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableLower"}'
          value: '9'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.CRIT:"nonRecoverableUpper"}'
          value: '6'
          description: 'The critical status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.OK}'
          value: '3'
          description: 'The OK status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.WARN:"nonCriticalLower"}'
          value: '7'
          description: 'The warning status of the temperature probe for trigger expression.'
        -
          macro: '{$SENSOR.TEMP.STATUS.WARN:"nonCriticalUpper"}'
          value: '4'
          description: 'The warning status of the temperature probe for trigger expression.'
        -
          macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'The time interval for SNMP agent availability trigger expression.'
        -
          macro: '{$VDISK.STATUS.CRIT:"failed"}'
          value: '3'
          description: 'The critical status of the virtual disk for trigger expression.'
        -
          macro: '{$VDISK.STATUS.WARN:"degraded"}'
          value: '4'
          description: 'The warning status of the virtual disk for trigger expression.'
      valuemaps:
        -
          uuid: 662600e752b94992b157724609e6b7ce
          name: 'IDRAC-MIB-SMIv2::batteryState'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Ready
            -
              value: '3'
              newvalue: Failed
            -
              value: '4'
              newvalue: Degraded
            -
              value: '5'
              newvalue: Missing
            -
              value: '6'
              newvalue: Charging
            -
              value: '7'
              newvalue: 'Below threshold'
        -
          uuid: db5865050a564fb9afa7215e9b1f7b59
          name: 'IDRAC-MIB-SMIv2::BooleanType'
          mappings:
            -
              value: '0'
              newvalue: ok
            -
              value: '1'
              newvalue: failed
        -
          uuid: 03744c3cbad64946a71c27fa57d1ecc5
          name: 'IDRAC-MIB-SMIv2::ObjectStatusEnum'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCritical
            -
              value: '5'
              newvalue: critical
            -
              value: '6'
              newvalue: nonRecoverable
        -
          uuid: 6ca166558903480a912a7dd700b10de2
          name: 'IDRAC-MIB-SMIv2::physicalDiskComponentStatus'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCritical
            -
              value: '5'
              newvalue: critical
            -
              value: '6'
              newvalue: nonRecoverable
        -
          uuid: 3ab13a74743f4635afac016594d6fc0f
          name: 'IDRAC-MIB-SMIv2::physicalDiskMediaType'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: HDD
            -
              value: '3'
              newvalue: SSD
        -
          uuid: 5de90687104a4a82bf33099f7a53b8e2
          name: 'IDRAC-MIB-SMIv2::StatusProbeEnum'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: unknown
            -
              value: '3'
              newvalue: ok
            -
              value: '4'
              newvalue: nonCriticalUpper
            -
              value: '5'
              newvalue: criticalUpper
            -
              value: '6'
              newvalue: nonRecoverableUpper
            -
              value: '7'
              newvalue: nonCriticalLower
            -
              value: '8'
              newvalue: criticalLower
            -
              value: '9'
              newvalue: nonRecoverableLower
            -
              value: '10'
              newvalue: failed
        -
          uuid: 742cb11d3e104411bd7b5777f3713d2e
          name: 'IDRAC-MIB-SMIv2::virtualDiskLayout'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: RAID-0
            -
              value: '3'
              newvalue: RAID-1
            -
              value: '4'
              newvalue: RAID-5
            -
              value: '5'
              newvalue: RAID-6
            -
              value: '6'
              newvalue: RAID-10
            -
              value: '7'
              newvalue: RAID-50
            -
              value: '8'
              newvalue: RAID-60
            -
              value: '9'
              newvalue: 'Concatenated RAID 1'
            -
              value: '10'
              newvalue: 'Concatenated RAID 5'
        -
          uuid: cf6ea6091e864b589be59060bf822b3e
          name: 'IDRAC-MIB-SMIv2::virtualDiskOperationalState'
          mappings:
            -
              value: '1'
              newvalue: 'Not applicable'
            -
              value: '2'
              newvalue: Reconstructing
            -
              value: '3'
              newvalue: Resynching
            -
              value: '4'
              newvalue: Initializing
            -
              value: '5'
              newvalue: 'Background init'
        -
          uuid: bf35de999eed469d95be5d095481d0e4
          name: 'IDRAC-MIB-SMIv2::virtualDiskReadPolicy'
          mappings:
            -
              value: '1'
              newvalue: 'No Read Ahead'
            -
              value: '2'
              newvalue: 'Read Ahead'
            -
              value: '3'
              newvalue: 'Adaptive Read Ahead'
        -
          uuid: fa2c1fd3e71244f2960565b53cf89675
          name: 'IDRAC-MIB-SMIv2::virtualDiskState'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: Online
            -
              value: '3'
              newvalue: Failed
            -
              value: '4'
              newvalue: Degraded
        -
          uuid: b2e0c35a0f0440ed96fadf89fbd8d730
          name: 'IDRAC-MIB-SMIv2::virtualDiskWritePolicy'
          mappings:
            -
              value: '1'
              newvalue: 'Write Through'
            -
              value: '2'
              newvalue: 'Write Back'
            -
              value: '3'
              newvalue: 'Force Write Back'
        -
          uuid: e745027008e84545a52a8804e8a8aa05
          name: zabbix.host.available
          mappings:
            -
              value: '0'
              newvalue: 'not available'
            -
              value: '1'
              newvalue: available
            -
              value: '2'
              newvalue: unknown
