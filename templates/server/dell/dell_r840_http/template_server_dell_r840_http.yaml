zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: e960332b3f6c46a1956486d4f3f99fce
      name: 'Templates/Server hardware'
  templates:
    - uuid: 20147f00f92d4240aab0b70cf578c022
      template: 'DELL PowerEdge R840 by HTTP'
      name: 'DELL PowerEdge R840 by HTTP'
      description: |
        Template for DELL PowerEdge R840 servers with iDRAC 8/9 firmware 4.32 and later and Redfish API enabled.
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/426752-discussion-thread-for-official-zabbix-dell-templates
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: 'Templates/Server hardware'
      items:
        - uuid: 7c99c4ba6e3643e5b4672aeb3ecbaa20
          name: 'Get array controller resources'
          type: SCRIPT
          key: dell.server.array.resources.get
          history: '0'
          value_type: TEXT
          params: |
            function validateZabbixParams(requiredParams, allParams) {
            	requiredParams.forEach(function (field) {
            		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            			throw 'Required param is not set: ' + field + '.';
            		}
            	});
            }
            
            function Dell(service, action, params) {
            	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
            	this.request = new HttpRequest();
            
            	this.executeRequest = function (apiPath) {
            		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
            
            		if (params['http_proxy']) {
            			this.request.setProxy(params['http_proxy']);
            			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
            		}
            
            		const response = this.request.get(params['url'] + apiPath);
            
            		this.request.clearHeader();
            
            		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
            			return response;
            		} else {
            			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
            			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
            		}
            	};
            
            	this.extractData = function (data, keys, skipParse) {
            		if (!skipParse) {
            			try {
            				data = JSON.parse(data);
            			} catch (error) {
            				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
            				throw 'Could not parse received JSON object. See logs for more information.';
            			}	
            		}
            
            		if (Array.isArray(keys)) {
            			var returnBuffer = {};
            
            			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
            				if (keys[keyIdx]['path'] === '@odata.id') {
            					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
            				} else {
            					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
            				}
            			}
            
            			return returnBuffer;
            		} else if (typeof keys === 'object') {
            			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
            		} else if (typeof keys === 'string') {
            			return this.parseJSON(data, keys.split('.'));
            		} else {
            			throw 'Unexpected key type';
            		}
            	};
            
            	this.parseJSON = function (data, jsonPath) {
            		for (var i = 0, args = jsonPath.length; i < args; i++) {
            			data = data[jsonPath[i]];
            		}
            
            		return data;
            	}
            }
            
            
            const params = JSON.parse(value);
            
            validateZabbixParams(['url', 'user', 'password', 'http_status_code'], params);
            var dell = new Dell('Controller', 'Discovery', params);
            
            const controllers = dell.extractData(dell.executeRequest('/redfish/v1/Systems/System.Embedded.1/Storage?$expand=.($levels=1)'), 'Members');
            
            var arrControllerKeys = [
            	{
            		'name': 'id',
            		'path': 'Id'
            	},
            	{
            		'name': 'name',
            		'path': 'Name'
            	},
            	{
            		'name': 'health',
            		'path': 'Status.Health'
            	},
            	{
            		'name': 'slot',
            		'path': 'Oem.Dell.DellController.PCISlot'
            	}
            ];
            
            var battControllerKeys = [
            	{
            		'name': 'id',
            		'path': 'Oem.Dell.DellControllerBattery.Id'
            	},
            	{
            		'name': 'name',
            		'path': 'Oem.Dell.DellControllerBattery.Name'
            	},
            	{
            		'name': 'status',
            		'path': 'Oem.Dell.DellControllerBattery.PrimaryStatus'
            	}
            ];
            
            if (!Array.isArray(controllers)) {
            	throw 'Unexpected type for controllers.';
            }
            
            var buffer = { 'arrayControllers': [], 'batteryControllers': [] };
            
            controllers.forEach(function (controller) {
            	if (controller['Id'].search('RAID') > -1) {
            		buffer['arrayControllers'].push(dell.extractData(controller, arrControllerKeys, true));
            		buffer['batteryControllers'].push(dell.extractData(controller, battControllerKeys, true));
            	}
            });
            
            return JSON.stringify(buffer);
          description: 'Returns array controller resources.'
          timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          parameters:
            - name: http_proxy
              value: '{$DELL.HTTP.PROXY}'
            - name: http_status_code
              value: '{$DELL.HTTP.RETURN.CODE.OK}'
            - name: password
              value: '{$DELL.HTTP.API.PASSWORD}'
            - name: url
              value: '{$DELL.HTTP.API.URL}'
            - name: user
              value: '{$DELL.HTTP.API.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 4f6df395e903468481990c9d2e6e9a21
          name: 'Get disks'
          type: SCRIPT
          key: dell.server.disks.get
          delay: 1h
          history: '0'
          value_type: TEXT
          params: |
            function validateZabbixParams(requiredParams, allParams) {
            	requiredParams.forEach(function (field) {
            		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            			throw 'Required param is not set: ' + field + '.';
            		}
            	});
            }
            
            function Dell(service, action, params) {
            	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
            	this.request = new HttpRequest();
            
            	this.executeRequest = function (apiPath) {
            		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
            
            		if (params['http_proxy']) {
            			this.request.setProxy(params['http_proxy']);
            			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
            		}
            
            		const response = this.request.get(params['url'] + apiPath);
            
            		this.request.clearHeader();
            
            		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
            			return response;
            		} else {
            			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
            			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
            		}
            	};
            
            	this.extractData = function (data, keys, skipParse) {
            		if (!skipParse) {
            			try {
            				data = JSON.parse(data);
            			} catch (error) {
            				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
            				throw 'Could not parse received JSON object. See logs for more information.';
            			}	
            		}
            
            		if (Array.isArray(keys)) {
            			var returnBuffer = {};
            
            			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
            				if (keys[keyIdx]['path'] === '@odata.id') {
            					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
            				} else {
            					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
            				}
            			}
            
            			return returnBuffer;
            		} else if (typeof keys === 'object') {
            			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
            		} else if (typeof keys === 'string') {
            			return this.parseJSON(data, keys.split('.'));
            		} else {
            			throw 'Unexpected key type';
            		}
            	};
            
            	this.parseJSON = function (data, jsonPath) {
            		for (var i = 0, args = jsonPath.length; i < args; i++) {
            			data = data[jsonPath[i]];
            		}
            
            		return data;
            	}
            }
            
            
            const params = JSON.parse(value);
            
            validateZabbixParams(['url', 'user', 'password', 'http_status_code'], params);
            var dell = new Dell('Disk', 'Discovery', params);
            
            const disks = dell.extractData(dell.executeRequest('/redfish/v1/Systems/System.Embedded.1/Storage'), 'Members');
            
            var keys = [
            	{
            		'name': 'path',
            		'path': '@odata.id'
            	},
            	{
            		'name': 'name',
            		'path': 'Name'
            	}
            ];
            
            if (!Array.isArray(disks)) {
            	throw 'Unexpected type for disks.';
            }
            
            var buffer = { 'physicalDisks': [], 'virtualDisks': [] };
            
            disks.forEach(function (disk) {
            	var requests = [{ 'usage': 'physicalDisks', 'path': '', 'target': 'Drives' }, { 'usage': 'virtualDisks', 'path': '/Volumes', 'target': 'Members' }];
            
            	requests.forEach(function (request) {
            		const disks = dell.extractData(dell.executeRequest(disk['@odata.id'] + request['path']), request['target']);
            
            		if (!Array.isArray(disks) || disks.length <= 0) {
            			return;
            		}
            
            		disks.forEach(function (drive) {
            			buffer[request['usage']].push(dell.extractData(dell.executeRequest(drive['@odata.id']), keys));
            		});
            	});
            });
            
            return JSON.stringify(buffer);
          description: 'Returns storage resources.'
          timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          parameters:
            - name: http_proxy
              value: '{$DELL.HTTP.PROXY}'
            - name: http_status_code
              value: '{$DELL.HTTP.RETURN.CODE.OK}'
            - name: password
              value: '{$DELL.HTTP.API.PASSWORD}'
            - name: url
              value: '{$DELL.HTTP.API.URL}'
            - name: user
              value: '{$DELL.HTTP.API.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: b4b70f1a69fe4dc1a572d580f22134ba
          name: 'Firmware version'
          type: DEPENDENT
          key: dell.server.hw.firmware
          value_type: CHAR
          description: 'This attribute defines the firmware version of a remote access card.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.firmware
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          master_item:
            key: dell.server.system.get
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: d69a362c4ddb41afac0233aa5cbfe7f2
              expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.firmware,#1)<>last(/DELL PowerEdge R840 by HTTP/dell.server.hw.firmware,#2) and length(last(/DELL PowerEdge R840 by HTTP/dell.server.hw.firmware))>0'
              name: 'Dell R840: Firmware has changed'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'The firmware version has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 6369c5e1188949c8a63ea401352dea33
          name: 'Hardware model name'
          type: DEPENDENT
          key: dell.server.hw.model
          value_type: CHAR
          description: 'This attribute defines the model name of the system.'
          inventory_link: MODEL
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.model
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          master_item:
            key: dell.server.system.get
          tags:
            - tag: component
              value: system
        - uuid: 93d7f62989bf4009a366dd3db3b57622
          name: 'Hardware serial number'
          type: DEPENDENT
          key: dell.server.hw.serialnumber
          value_type: CHAR
          description: 'This attribute defines the service tag of the system.'
          inventory_link: SERIALNO_A
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.serialnumber
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          master_item:
            key: dell.server.system.get
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 7d3b78a42b2840dcac53aaad6fe0fd63
              expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.serialnumber,#1)<>last(/DELL PowerEdge R840 by HTTP/dell.server.hw.serialnumber,#2) and length(last(/DELL PowerEdge R840 by HTTP/dell.server.hw.serialnumber))>0'
              name: 'Dell R840: Device has been replaced'
              event_name: 'Dell R840: Device has been replaced (new serial number received)'
              priority: INFO
              description: 'The device serial number has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: d09bd1c6bccf422286031a7081d2d130
          name: 'Get network interfaces'
          type: SCRIPT
          key: dell.server.net.iface.get
          delay: 1h
          history: '0'
          value_type: TEXT
          params: |
            function validateZabbixParams(requiredParams, allParams) {
            	requiredParams.forEach(function (field) {
            		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            			throw 'Required param is not set: ' + field + '.';
            		}
            	});
            }
            
            function Dell(service, action, params) {
            	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
            	this.request = new HttpRequest();
            
            	this.executeRequest = function (apiPath) {
            		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
            
            		if (params['http_proxy']) {
            			this.request.setProxy(params['http_proxy']);
            			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
            		}
            
            		const response = this.request.get(params['url'] + apiPath);
            
            		this.request.clearHeader();
            
            		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
            			return response;
            		} else {
            			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
            			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
            		}
            	};
            
            	this.extractData = function (data, keys, skipParse) {
            		if (!skipParse) {
            			try {
            				data = JSON.parse(data);
            			} catch (error) {
            				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
            				throw 'Could not parse received JSON object. See logs for more information.';
            			}	
            		}
            
            		if (Array.isArray(keys)) {
            			var returnBuffer = {};
            
            			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
            				if (keys[keyIdx]['path'] === '@odata.id') {
            					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
            				} else {
            					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
            				}
            			}
            
            			return returnBuffer;
            		} else if (typeof keys === 'object') {
            			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
            		} else if (typeof keys === 'string') {
            			return this.parseJSON(data, keys.split('.'));
            		} else {
            			throw 'Unexpected key type';
            		}
            	};
            
            	this.parseJSON = function (data, jsonPath) {
            		for (var i = 0, args = jsonPath.length; i < args; i++) {
            			data = data[jsonPath[i]];
            		}
            
            		return data;
            	}
            }
            
            
            const params = JSON.parse(value);
            
            validateZabbixParams(['url', 'user', 'password', 'http_status_code'], params);
            var dell = new Dell('Network Interface', 'Discovery', params);
            
            const netAdapters = dell.extractData(dell.executeRequest('/redfish/v1/Chassis/System.Embedded.1/NetworkAdapters'), 'Members');
            
            var keys = [
            	{
            		'name': 'path',
            		'path': '@odata.id'
            	},
            	{
            		'name': 'id',
            		'path': 'Id'
            	}
            ];
            
            if (!Array.isArray(netAdapters)) {
            	throw 'Unexpected type for network adapters.';
            }
            
            var buffer = [];
            
            netAdapters.forEach(function (netAdapter) {
            	const netPorts = dell.extractData(dell.executeRequest(netAdapter["@odata.id"] + '/NetworkPorts'), 'Members');
            
            	if (!Array.isArray(netPorts)) {
            		return;
            	}
            
            	netPorts.forEach(function (netPort) {
            		buffer.push(dell.extractData(dell.executeRequest(netPort["@odata.id"]), keys));
            	})
            });
            
            return JSON.stringify(buffer);
          description: 'Returns network interfaces.'
          timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          parameters:
            - name: http_proxy
              value: '{$DELL.HTTP.PROXY}'
            - name: http_status_code
              value: '{$DELL.HTTP.RETURN.CODE.OK}'
            - name: password
              value: '{$DELL.HTTP.API.PASSWORD}'
            - name: url
              value: '{$DELL.HTTP.API.URL}'
            - name: user
              value: '{$DELL.HTTP.API.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 860871bf033f443183bed66919fc86e3
          name: 'Get sensors'
          type: SCRIPT
          key: dell.server.sensors.get
          history: '0'
          value_type: TEXT
          params: |
            function validateZabbixParams(requiredParams, allParams) {
            	requiredParams.forEach(function (field) {
            		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            			throw 'Required param is not set: ' + field + '.';
            		}
            	});
            }
            
            function Dell(service, action, params) {
            	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
            	this.request = new HttpRequest();
            
            	this.executeRequest = function (apiPath) {
            		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
            
            		if (params['http_proxy']) {
            			this.request.setProxy(params['http_proxy']);
            			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
            		}
            
            		const response = this.request.get(params['url'] + apiPath);
            
            		this.request.clearHeader();
            
            		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
            			return response;
            		} else {
            			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
            			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
            		}
            	};
            
            	this.extractData = function (data, keys, skipParse) {
            		if (!skipParse) {
            			try {
            				data = JSON.parse(data);
            			} catch (error) {
            				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
            				throw 'Could not parse received JSON object. See logs for more information.';
            			}	
            		}
            
            		if (Array.isArray(keys)) {
            			var returnBuffer = {};
            
            			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
            				if (keys[keyIdx]['path'] === '@odata.id') {
            					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
            				} else {
            					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
            				}
            			}
            
            			return returnBuffer;
            		} else if (typeof keys === 'object') {
            			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
            		} else if (typeof keys === 'string') {
            			return this.parseJSON(data, keys.split('.'));
            		} else {
            			throw 'Unexpected key type';
            		}
            	};
            
            	this.parseJSON = function (data, jsonPath) {
            		for (var i = 0, args = jsonPath.length; i < args; i++) {
            			data = data[jsonPath[i]];
            		}
            
            		return data;
            	}
            }
            
            function formatPSU(psuObj) {
            	var foundPowerSupplies = [],
            		buffer = [];
            
            	psuObj.forEach(function (obj) {
            		const psuName = obj['name'].split(' ')[0];
            
            		if (foundPowerSupplies.indexOf(psuName) === -1) {
            			foundPowerSupplies.push(psuName);
            			buffer.push({
            				'name': psuName,
            				[obj['type'].toLowerCase()]: {'reading': obj['reading'], 'health': obj['health']}
            			});
            		} else {
            			buffer.forEach(function (bufferObj) {
            
            				if (bufferObj['name'] === psuName) {
            					bufferObj[obj['type'].toLowerCase()] = {'reading': obj['reading'], 'health': obj['health']};
            
            					return;
            				}
            			});
            		}
            	})
            	return buffer;
            };
            
            function formatTemp(tempObj) {
            	tempObj.forEach(function (obj) {
            		obj.name = obj.name.split(' ').slice(0, -1).join(' ');
            	});
            
            	return tempObj;
            }
            
            function formatSysBoard(sysObj) {
            	const remove = ['System', 'Board', 'Usage'];
            
            	sysObj.forEach(function (obj) {
            		var buffer = [];
            
            		obj['name'].split(' ').forEach(function (word) {
            			var match = false;
            
            			remove.forEach(function (removeWord) {
            				if (removeWord === word) {
            					match = true;
            				}
            			});
            
            			if (!match) {
            				buffer.push(word);
            			}
            		});
            
            		if (buffer.length > 0) {
            			obj['name'] = buffer.join(' ');
            		}
            	});
            
            	return sysObj;
            }
            
            
            const params = JSON.parse(value);
            
            validateZabbixParams(['url', 'user', 'password', 'http_status_code'], params);
            var dell = new Dell('Sensor', 'Discovery', params);
            
            const sensors = dell.extractData(dell.executeRequest('/redfish/v1/Chassis/System.Embedded.1/Sensors?$expand=.($levels=1)'), 'Members');
            
            if (!Array.isArray(sensors)) {
            	throw 'Unexpected type for sensors.';
            }
            
            const keys = [
            	{
            		'name': 'id',
            		'path': 'Id'
            	},
            	{
            		'name': 'name',
            		'path': 'Name'
            	},
            	{
            		'name': 'context',
            		'path': 'PhysicalContext'
            	},
            	{
            		'name': 'reading',
            		'path': 'Reading'
            	},
            	{
            		'name': 'type',
            		'path': 'ReadingType'
            	},
            	{
            		'name': 'health',
            		'path': 'Status.Health'
            	}
            ];
            
            var buffer = { 'fan': [], 'psu': [], 'temperature': [], 'sysBoard': [] };
            
            sensors.forEach(function (sensor) {
            	if (sensor['Name'].substring(0, 2) === 'PS' && sensor['PhysicalContext'] === 'PowerSupply') {
            		buffer['psu'].push(dell.extractData(sensor, keys, true));
            	} else if (sensor['ReadingType'] === 'Temperature') {
            		buffer['temperature'].push(dell.extractData(sensor, keys, true));
            	} else if (sensor['Name'].includes('Fan') && sensor['ReadingType'] === 'Rotational') {
            		buffer['fan'].push(dell.extractData(sensor, keys, true));
            	} else if (sensor['Name'].includes('System Board') && sensor['ReadingType'] === 'Percent') {
            		buffer['sysBoard'].push(dell.extractData(sensor, keys, true));
            	}
            });
            
            buffer['psu'] = formatPSU(buffer['psu']);
            buffer['temperature'] = formatTemp(buffer['temperature']);
            buffer['sysBoard'] = formatSysBoard(buffer['sysBoard']);
            
            return JSON.stringify(buffer);
          description: 'Returns sensors.'
          timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          parameters:
            - name: http_proxy
              value: '{$DELL.HTTP.PROXY}'
            - name: http_status_code
              value: '{$DELL.HTTP.RETURN.CODE.OK}'
            - name: password
              value: '{$DELL.HTTP.API.PASSWORD}'
            - name: url
              value: '{$DELL.HTTP.API.URL}'
            - name: user
              value: '{$DELL.HTTP.API.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: d6a5a581ee9b455990cce4532243f9bc
          name: 'Overall system health status'
          type: DEPENDENT
          key: dell.server.status
          trends: '0'
          description: 'This attribute defines the overall rollup status of all the components in the system monitored by the remote access card. Includes system, storage, IO devices, iDRAC, CPU, memory, etc.'
          valuemap:
            name: 'Redfish status health'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.status
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = {
                  	'OK': 1,
                  	'Warning': 2,
                  	'Critical': 3,
                  };
                  
                  return typeof idx[value] === 'undefined' ? 0 : idx[value];
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          master_item:
            key: dell.server.system.get
          tags:
            - tag: component
              value: health
            - tag: component
              value: system
          triggers:
            - uuid: 66eddf4db30c4f33a04fd1e7779a512b
              expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.status,)=3'
              name: 'Dell R840: Server is in a critical state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'Please check the device for faults.'
              tags:
                - tag: scope
                  value: availability
            - uuid: d7bd59c648884a2db4e40518c80e9a7a
              expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.status,)=2'
              name: 'Dell R840: Server is in a warning state'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Please check the device for warnings.'
              dependencies:
                - name: 'Dell R840: Server is in a critical state'
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.status,)=3'
              tags:
                - tag: scope
                  value: availability
        - uuid: 18157734e10d4eed82a0f43168daff65
          name: 'Get system'
          type: SCRIPT
          key: dell.server.system.get
          history: '0'
          value_type: TEXT
          params: |
            function validateZabbixParams(requiredParams, allParams) {
            	requiredParams.forEach(function (field) {
            		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            			throw 'Required param is not set: ' + field + '.';
            		}
            	});
            }
            
            function Dell(service, action, params) {
            	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
            	this.request = new HttpRequest();
            
            	this.executeRequest = function (apiPath) {
            		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
            
            		if (params['http_proxy']) {
            			this.request.setProxy(params['http_proxy']);
            			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
            		}
            
            		const response = this.request.get(params['url'] + apiPath);
            
            		this.request.clearHeader();
            
            		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
            			return response;
            		} else {
            			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
            			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
            		}
            	};
            
            	this.extractData = function (data, keys, skipParse) {
            		if (!skipParse) {
            			try {
            				data = JSON.parse(data);
            			} catch (error) {
            				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
            				throw 'Could not parse received JSON object. See logs for more information.';
            			}	
            		}
            
            		if (Array.isArray(keys)) {
            			var returnBuffer = {};
            
            			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
            				if (keys[keyIdx]['path'] === '@odata.id') {
            					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
            				} else {
            					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
            				}
            			}
            
            			return returnBuffer;
            		} else if (typeof keys === 'object') {
            			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
            		} else if (typeof keys === 'string') {
            			return this.parseJSON(data, keys.split('.'));
            		} else {
            			throw 'Unexpected key type';
            		}
            	};
            
            	this.parseJSON = function (data, jsonPath) {
            		for (var i = 0, args = jsonPath.length; i < args; i++) {
            			data = data[jsonPath[i]];
            		}
            
            		return data;
            	}
            }
            
            
            const params = JSON.parse(value);
            
            validateZabbixParams(['url', 'user', 'password', 'http_status_code'], params);
            var dell = new Dell('System', 'Get system metrics', params);
            
            const requests = [
            	{
            		'path': '/redfish/v1/Systems/System.Embedded.1',
            		'keys': [
            			{
            				'name': 'model',
            				'path': 'Model'
            			},
            			{
            				'name': 'serialnumber',
            				'path': 'Oem.Dell.DellSystem.ChassisServiceTag'
            			},
            			{
            				'name': 'status',
            				'path': 'Status.Health'
            			}
            		]
            	},
            	{
            		'path': '/redfish/v1/Managers/iDRAC.Embedded.1',
            		'keys': {
            			'name': 'firmware',
            			'path': 'FirmwareVersion'
            		}
            	}
            ];
            
            var buffer = {};
            
            for (var i = 0, requestsCount = requests.length; i < requestsCount; i++) {
            	Object.assign(buffer, dell.extractData(dell.executeRequest(requests[i].path), requests[i].keys));
            }
            
            return JSON.stringify(buffer);
          description: 'Returns system metrics.'
          timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          parameters:
            - name: http_proxy
              value: '{$DELL.HTTP.PROXY}'
            - name: http_status_code
              value: '{$DELL.HTTP.RETURN.CODE.OK}'
            - name: password
              value: '{$DELL.HTTP.API.PASSWORD}'
            - name: url
              value: '{$DELL.HTTP.API.URL}'
            - name: user
              value: '{$DELL.HTTP.API.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 67524a4d8c8e4f39b43e1a67b1afede7
          name: 'CPU utilization, in %'
          type: DEPENDENT
          key: dell.server.util.cpu
          value_type: FLOAT
          units: '%'
          description: 'CPU utilization.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.sysBoard[?(@.id == "SystemBoardCPUUsage")].reading.first()'
          master_item:
            key: dell.server.sensors.get
          tags:
            - tag: component
              value: cpu
          triggers:
            - uuid: d043506ca50e46688f4e2b5d16fbb6b0
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.cpu,5m)>={$DELL.HTTP.CPU.UTIL.WARN}'
              name: 'Dell R840: CPU utilization is high'
              event_name: 'Dell R840: Current CPU utilization is high (util >= {$DELL.HTTP.CPU.UTIL.WARN}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Current CPU utilization has exceeded `{$DELL.HTTP.CPU.UTIL.WARN}`%.'
              dependencies:
                - name: 'Dell R840: CPU utilization is too high'
                  expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.cpu,5m)>={$DELL.HTTP.CPU.UTIL.HIGH}'
              tags:
                - tag: scope
                  value: capacity
            - uuid: 7402c280344d4d1481dc4f9363b114cb
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.cpu,5m)>={$DELL.HTTP.CPU.UTIL.HIGH}'
              name: 'Dell R840: CPU utilization is too high'
              event_name: 'Dell R840: Current CPU utilization is too high (util >= {$DELL.HTTP.CPU.UTIL.HIGH}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Current CPU utilization has exceeded `{$DELL.HTTP.CPU.UTIL.HIGH}`%.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 6d5125ef5a484d4c92f63ab698078e17
          name: 'IO utilization, in %'
          type: DEPENDENT
          key: dell.server.util.io
          value_type: FLOAT
          units: '%'
          description: 'IO utilization.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.sysBoard[?(@.id == "SystemBoardIOUsage")].reading.first()'
          master_item:
            key: dell.server.sensors.get
          tags:
            - tag: component
              value: io
          triggers:
            - uuid: 9d9b98ba6f0f4a09b0fe866ac75a45d9
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.io,5m)>={$DELL.HTTP.IO.UTIL.WARN}'
              name: 'Dell R840: IO utilization is high'
              event_name: 'Dell R840: Current IO utilization is high (util >= {$DELL.HTTP.IO.UTIL.WARN}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Current IO utilization has exceeded `{$DELL.HTTP.IO.UTIL.WARN}`%.'
              dependencies:
                - name: 'Dell R840: IO utilization is too high'
                  expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.io,5m)>={$DELL.HTTP.IO.UTIL.HIGH}'
              tags:
                - tag: scope
                  value: capacity
            - uuid: 6458115ca51b4f82a00f9f70f081168b
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.io,5m)>={$DELL.HTTP.IO.UTIL.HIGH}'
              name: 'Dell R840: IO utilization is too high'
              event_name: 'Dell R840: Current IO utilization is too high (util >= {$DELL.HTTP.IO.UTIL.HIGH}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Current IO utilization has exceeded `{$DELL.HTTP.IO.UTIL.HIGH}`%.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 91527c7c68f745f9aef78b4507e096c5
          name: 'Memory utilization, in %'
          type: DEPENDENT
          key: dell.server.util.mem
          value_type: FLOAT
          units: '%'
          description: 'Memory utilization.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.sysBoard[?(@.id == "SystemBoardMEMUsage")].reading.first()'
          master_item:
            key: dell.server.sensors.get
          tags:
            - tag: component
              value: memory
          triggers:
            - uuid: 108975d790e84418852a3918ca9c721c
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.mem,5m)>={$DELL.HTTP.MEM.UTIL.WARN}'
              name: 'Dell R840: Memory utilization is high'
              event_name: 'Dell R840: Current memory utilization is high (util >= {$DELL.HTTP.MEM.UTIL.WARN}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Current memory utilization has exceeded `{$DELL.HTTP.MEM.UTIL.WARN}`%.'
              dependencies:
                - name: 'Dell R840: Memory utilization is too high'
                  expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.mem,5m)>={$DELL.HTTP.MEM.UTIL.HIGH}'
              tags:
                - tag: scope
                  value: capacity
            - uuid: 28dbce9e2c374351853bce93a4d45533
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.mem,5m)>={$DELL.HTTP.MEM.UTIL.HIGH}'
              name: 'Dell R840: Memory utilization is too high'
              event_name: 'Dell R840: Current memory utilization is too high (util >= {$DELL.HTTP.MEM.UTIL.HIGH}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Current memory utilization has exceeded `{$DELL.HTTP.MEM.UTIL.HIGH}`%.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 340a8b4c974e40cc8b694336fd973fb2
          name: 'SYS utilization, in %'
          type: DEPENDENT
          key: dell.server.util.sys
          value_type: FLOAT
          units: '%'
          description: 'SYS utilization.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.sysBoard[?(@.id == "SystemBoardSYSUsage")].reading.first()'
          master_item:
            key: dell.server.sensors.get
          tags:
            - tag: component
              value: sys
          triggers:
            - uuid: 4914f2bb5add4d1e879bd98e723cba68
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.sys,5m)>={$DELL.HTTP.SYS.UTIL.WARN}'
              name: 'Dell R840: SYS utilization is high'
              event_name: 'Dell R840: Current SYS utilization is high (util >= {$DELL.HTTP.SYS.UTIL.WARN}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Current SYS utilization has exceeded `{$DELL.HTTP.SYS.UTIL.WARN}`%.'
              dependencies:
                - name: 'Dell R840: IO utilization is too high'
                  expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.io,5m)>={$DELL.HTTP.IO.UTIL.HIGH}'
              tags:
                - tag: scope
                  value: capacity
            - uuid: 32dc9d0ef93649aaa05b80c1681ebd00
              expression: 'min(/DELL PowerEdge R840 by HTTP/dell.server.util.sys,5m)>={$DELL.HTTP.SYS.UTIL.HIGH}'
              name: 'Dell R840: SYS utilization is too high'
              event_name: 'Dell R840: Current SYS utilization is too high (util >= {$DELL.HTTP.SYS.UTIL.HIGH}%)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Current SYS utilization has exceeded `{$DELL.HTTP.SYS.UTIL.HIGH}`%.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 1fe957b97d914400a1814ff8ac1a9fc4
          name: 'Redfish API status'
          type: SIMPLE
          key: 'net.tcp.service[https]'
          description: |
            Availability of Redfish API on the server.
            Possible values:
              0 - Unavailable
              1 - Available
          valuemap:
            name: 'Redfish API availability'
          tags:
            - tag: component
              value: health
            - tag: component
              value: system
          triggers:
            - uuid: 890f7b925b324a9c8ddcbf900248983f
              expression: 'last(/DELL PowerEdge R840 by HTTP/net.tcp.service[https])=0'
              name: 'Dell R840: Redfish API service is unavailable'
              priority: HIGH
              description: 'The service is unavailable or does not accept TCP connections.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 7e9b536c1f494f8db88ebc5817758f87
          name: 'Array controller discovery'
          type: DEPENDENT
          key: dell.server.array.discovery
          description: 'Discovery of disk array controllers.'
          item_prototypes:
            - uuid: d1785196fe1f4d208ef168bfefe5d91e
              name: 'Controller [{#CNTLR_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.array.status[{#ID}]'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.arrayControllers[?(@.id == "{#ID}")].health.first()'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: dell.server.array.resources.get
              tags:
                - tag: component
                  value: diskarray
                - tag: component
                  value: storage
              trigger_prototypes:
                - uuid: c1c8af8e702d403290edcf852df5108f
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.array.status[{#ID}],)=3'
                  name: 'Dell R840: Controller [{#CNTLR_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: e3630192525a446e8ca77b4e1238d41c
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.array.status[{#ID}],)=2'
                  name: 'Dell R840: Controller [{#CNTLR_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Controller [{#CNTLR_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.array.status[{#ID}],)=3'
                  tags:
                    - tag: scope
                      value: availability
          master_item:
            key: dell.server.array.resources.get
          lld_macro_paths:
            - lld_macro: '{#CNTLR_NAME}'
              path: $.name
            - lld_macro: '{#ID}'
              path: $.id
            - lld_macro: '{#SLOT}'
              path: $.slot
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.arrayControllers
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: cf87034baae7473ba507411dd49e9aaa
          name: 'Battery discovery'
          type: DEPENDENT
          key: dell.server.controller.battery.discovery
          description: 'Discovery of battery controllers.'
          item_prototypes:
            - uuid: c130b149d73147488074daa6cf4dffb1
              name: 'Battery [{#BATTERY_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.controller.battery.status[{#ID}]'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.batteryControllers[?(@.id == "{#ID}")].status.first()'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: dell.server.array.resources.get
              tags:
                - tag: component
                  value: battery
                - tag: component
                  value: diskarray
              trigger_prototypes:
                - uuid: 8a71516737c14f868b530da03f79ac68
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.controller.battery.status[{#ID}],)=3'
                  name: 'Dell R840: Battery [{#BATTERY_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 07861b4282664fea9ce13fe8b85fb204
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.controller.battery.status[{#ID}],)=2'
                  name: 'Dell R840: Battery [{#BATTERY_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Battery [{#BATTERY_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.controller.battery.status[{#ID}],)=3'
                  tags:
                    - tag: scope
                      value: availability
          master_item:
            key: dell.server.array.resources.get
          lld_macro_paths:
            - lld_macro: '{#BATTERY_NAME}'
              path: $.name
            - lld_macro: '{#ID}'
              path: $.id
            - lld_macro: '{#ODATA}'
              path: $.path
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.batteryControllers
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: c9b1f5035b494f848e7c101bb31f706b
          name: 'FAN discovery'
          type: DEPENDENT
          key: dell.server.fan.discovery
          description: 'Discovery of FAN sensors.'
          item_prototypes:
            - uuid: 9a344ff5fdce4fc6b19c50f70bdc3366
              name: 'Fan [{#SENSOR_NAME}]: Get sensor'
              type: DEPENDENT
              key: 'dell.server.sensor.fan.get[{#SENSOR_NAME}]'
              history: '0'
              value_type: TEXT
              description: 'Returns the metrics of a sensor.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.fan.[?(@.id == ''{#ID}'')].first()'
              master_item:
                key: dell.server.sensors.get
              tags:
                - tag: component
                  value: fan
                - tag: component
                  value: raw
            - uuid: ae4a6ad5d7ae4100a57af30cbfab4bf3
              name: 'Fan [{#SENSOR_NAME}]: Speed'
              type: DEPENDENT
              key: 'dell.server.sensor.fan.speed[{#SENSOR_NAME}]'
              units: '!rpm'
              description: 'Sensor value.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.reading
              master_item:
                key: 'dell.server.sensor.fan.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: fan
            - uuid: 58844e3ec9244f43b2819b3f13ea6a36
              name: 'Fan [{#SENSOR_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.sensor.fan.status[{#SENSOR_NAME}]'
              trends: '0'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.sensor.fan.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: fan
              trigger_prototypes:
                - uuid: 97142359820f4285a288114ff6c7fa4e
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.fan.status[{#SENSOR_NAME}],)=3'
                  name: 'Dell R840: Fan [{#SENSOR_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: e8c5cf1fa754464986958957889784bb
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.fan.status[{#SENSOR_NAME}],)=2'
                  name: 'Dell R840: Fan [{#SENSOR_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Fan [{#SENSOR_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.fan.status[{#SENSOR_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: a07e33e727054074957e95f9b2049ab7
              name: 'Dell R840: Fan [{#SENSOR_NAME}]: Speed'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.sensor.fan.speed[{#SENSOR_NAME}]'
          master_item:
            key: dell.server.sensors.get
          lld_macro_paths:
            - lld_macro: '{#ID}'
              path: $.id
            - lld_macro: '{#SENSOR_NAME}'
              path: $.name
            - lld_macro: '{#TYPE}'
              path: $.type
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.fan
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: 44e062b33a41457fb0d847cea5b385ed
          name: 'Network interface discovery'
          type: DEPENDENT
          key: dell.server.net.if.discovery
          description: 'Discovery of network interfaces.'
          item_prototypes:
            - uuid: 6a8491b2246f48869bf8a608a2b012d6
              name: 'Interface [{#IFNAME}]: Get interface'
              type: SCRIPT
              key: 'dell.server.net.if.get[{#IFNAME}]'
              history: '0'
              value_type: TEXT
              params: |
                function validateZabbixParams(requiredParams, allParams) {
                	requiredParams.forEach(function (field) {
                		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
                			throw 'Required param is not set: ' + field + '.';
                		}
                	});
                }
                
                function Dell(service, action, params) {
                	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
                	this.request = new HttpRequest();
                
                	this.executeRequest = function (apiPath) {
                		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
                
                		if (params['http_proxy']) {
                			this.request.setProxy(params['http_proxy']);
                			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
                		}
                
                		const response = this.request.get(params['url'] + apiPath);
                
                		this.request.clearHeader();
                
                		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
                			return response;
                		} else {
                			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
                			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
                		}
                	};
                
                	this.extractData = function (data, keys, skipParse) {
                		if (!skipParse) {
                			try {
                				data = JSON.parse(data);
                			} catch (error) {
                				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
                				throw 'Could not parse received JSON object. See logs for more information.';
                			}	
                		}
                
                		if (Array.isArray(keys)) {
                			var returnBuffer = {};
                
                			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
                				if (keys[keyIdx]['path'] === '@odata.id') {
                					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
                				} else {
                					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
                				}
                			}
                
                			return returnBuffer;
                		} else if (typeof keys === 'object') {
                			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
                		} else if (typeof keys === 'string') {
                			return this.parseJSON(data, keys.split('.'));
                		} else {
                			throw 'Unexpected key type';
                		}
                	};
                
                	this.parseJSON = function (data, jsonPath) {
                		for (var i = 0, args = jsonPath.length; i < args; i++) {
                			data = data[jsonPath[i]];
                		}
                
                		return data;
                	}
                }
                
                
                const params = JSON.parse(value);
                
                validateZabbixParams(['url', 'path', 'user', 'password', 'http_status_code'], params);
                var dell = new Dell('Network Interface', 'Get metrics', params);
                
                const keys = [
                	{
                		'name': 'linkStatus',
                		'path': 'LinkStatus'
                	},
                	{
                		'name': 'health',
                		'path': 'Status.Health'
                	},
                	{
                		'name': 'state',
                		'path': 'Status.State'
                	},
                	{
                		'name': 'linkSpeed',
                		'path': 'CurrentLinkSpeedMbps'
                	}
                ];
                
                return JSON.stringify(dell.extractData(dell.executeRequest(params.path), keys));
              description: 'Returns the metrics of a network interface.'
              timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
              parameters:
                - name: http_proxy
                  value: '{$DELL.HTTP.PROXY}'
                - name: http_status_code
                  value: '{$DELL.HTTP.RETURN.CODE.OK}'
                - name: password
                  value: '{$DELL.HTTP.API.PASSWORD}'
                - name: path
                  value: '{#ODATA}'
                - name: url
                  value: '{$DELL.HTTP.API.URL}'
                - name: user
                  value: '{$DELL.HTTP.API.USER}'
              tags:
                - tag: component
                  value: network
                - tag: component
                  value: raw
            - uuid: deb874e1e9054cc7a7b42654a6862686
              name: 'Interface [{#IFNAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.net.if.health[{#IFNAME}]'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.net.if.get[{#IFNAME}]'
              tags:
                - tag: component
                  value: network
              trigger_prototypes:
                - uuid: 15d95dacf91644de9d83a272c55a8c6f
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.health[{#IFNAME}],)=3'
                  name: 'Dell R840: Interface [{#IFNAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 7a743bd6cbee4cfd984e9d9ecb704e0e
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.health[{#IFNAME}],)=2'
                  name: 'Dell R840: Interface [{#IFNAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Interface [{#IFNAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.health[{#IFNAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 3cbcb8e5d8fb46feb051b8633843661a
              name: 'Interface [{#IFNAME}]: Speed'
              type: DEPENDENT
              key: 'dell.server.net.if.speed[{#IFNAME}]'
              units: bps
              description: 'The network port current link speed.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.linkSpeed
                - type: MULTIPLIER
                  parameters:
                    - '1000000'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.net.if.get[{#IFNAME}]'
              tags:
                - tag: component
                  value: network
            - uuid: 2d5a59aef5fe40528b4127a5aeb4e7d9
              name: 'Interface [{#IFNAME}]: State'
              type: DEPENDENT
              key: 'dell.server.net.if.state[{#IFNAME}]'
              description: 'The known state of the Resource, for example, Enabled. Possible values: Enabled, Disabled, StandbyOffline, StandbySpare, InTest, Starting, Absent, UnavailableOffline, Deferring, Quiesced, Updating, Qualified.'
              valuemap:
                name: 'Redfish status state'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.state
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'Enabled': 1,
                      	'Disabled': 2,
                      	'Absent': 3,
                      	'Deferring': 4,
                      	'InTest': 5,
                      	'Quiesced': 6,
                      	'StandbyOffline': 7,
                      	'StandbySpare': 8,
                      	'Starting': 9,
                      	'UnavailableOffline': 10,
                      	'Updating': 11
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.net.if.get[{#IFNAME}]'
              tags:
                - tag: component
                  value: network
            - uuid: 57be794a2e84405bb256bebdcebbd401
              name: 'Interface [{#IFNAME}]: Link status'
              type: DEPENDENT
              key: 'dell.server.net.if.status[{#IFNAME}]'
              description: 'The status of the link between this port and its link partner. Possible values: Down, Up, null.'
              valuemap:
                name: 'Network interface status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.linkStatus
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'null': 1,
                      	'Down': 2,
                      	'Up': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.net.if.get[{#IFNAME}]'
              tags:
                - tag: component
                  value: network
              trigger_prototypes:
                - uuid: c9d3b02a01b54c0288576e797a06f5fd
                  expression: '{$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=1 and (last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],)=2 and last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],#1)<>last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],#2))'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],)=1 or {$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=0'
                  name: 'Dell R840: Interface [{#IFNAME}]: Link down'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    This trigger expression works as follows:
                    1. It can be triggered if the operations status is Down (2).
                    2. `{$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=1` - a user can redefine the context macro to "0", marking this interface as not important. No new trigger will be fired if this interface is Down (2).
                    3. `{TEMPLATE_NAME:METRIC.diff()}=1` - the trigger fires only if the operational status was up to (1) sometime before (so, does not fire for the "eternal off" interfaces.)
                    
                    WARNING: if closed manually - it will not fire again on the next poll because of `.diff`.
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 2422d2d24fa5470f955e813c6f8ab6da
                  expression: '{$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=1 and (last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],)<2 and last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],#1)<>last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],#2))'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.net.if.status[{#IFNAME}],)>=2 or {$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=0'
                  name: 'Dell R840: Interface [{#IFNAME}]: Link status issue'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    This trigger expression works as follows:
                    1. It can be triggered if the operations status is Null (1) or Unknown (0).
                    2. `{$DELL.HTTP.IFCONTROL:"{#IFNAME}"}=1` - a user can redefine the context macro to "0", marking this interface as not important. No new trigger will be fired if this interface is Null (1) or Unknown (0).
                    3. `{TEMPLATE_NAME:METRIC.diff()}=1` - the trigger fires only if the operational status was up to (1) sometime before (so, does not fire for the "eternal off" interfaces.)
                    
                    WARNING: if closed manually - it will not fire again on the next poll because of `.diff`.
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: 82c7193482c6496abeeee2ca1869787b
              name: 'Dell R840: Interface [{#IFNAME}]: Speed'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.net.if.speed[{#IFNAME}]'
          master_item:
            key: dell.server.net.iface.get
          lld_macro_paths:
            - lld_macro: '{#IFNAME}'
              path: $.id
            - lld_macro: '{#ODATA}'
              path: $.path
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: e6736eb3f84044ff98d4113a3214e863
          name: 'Physical disk discovery'
          type: DEPENDENT
          key: dell.server.physicaldisk.discovery
          description: 'Discovery of physical disks.'
          item_prototypes:
            - uuid: 9ca9eeea67734f1c9a9ae548ac515b22
              name: 'Physical disk [{#DISK_NAME}]: Get disk'
              type: SCRIPT
              key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              history: '0'
              value_type: TEXT
              params: |
                function validateZabbixParams(requiredParams, allParams) {
                	requiredParams.forEach(function (field) {
                		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
                			throw 'Required param is not set: ' + field + '.';
                		}
                	});
                }
                
                function Dell(service, action, params) {
                	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
                	this.request = new HttpRequest();
                
                	this.executeRequest = function (apiPath) {
                		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
                
                		if (params['http_proxy']) {
                			this.request.setProxy(params['http_proxy']);
                			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
                		}
                
                		const response = this.request.get(params['url'] + apiPath);
                
                		this.request.clearHeader();
                
                		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
                			return response;
                		} else {
                			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
                			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
                		}
                	};
                
                	this.extractData = function (data, keys, skipParse) {
                		if (!skipParse) {
                			try {
                				data = JSON.parse(data);
                			} catch (error) {
                				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
                				throw 'Could not parse received JSON object. See logs for more information.';
                			}	
                		}
                
                		if (Array.isArray(keys)) {
                			var returnBuffer = {};
                
                			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
                				if (keys[keyIdx]['path'] === '@odata.id') {
                					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
                				} else {
                					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
                				}
                			}
                
                			return returnBuffer;
                		} else if (typeof keys === 'object') {
                			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
                		} else if (typeof keys === 'string') {
                			return this.parseJSON(data, keys.split('.'));
                		} else {
                			throw 'Unexpected key type';
                		}
                	};
                
                	this.parseJSON = function (data, jsonPath) {
                		for (var i = 0, args = jsonPath.length; i < args; i++) {
                			data = data[jsonPath[i]];
                		}
                
                		return data;
                	}
                }
                
                
                const params = JSON.parse(value);
                
                validateZabbixParams(['url', 'path', 'user', 'password', 'http_status_code'], params);
                var dell = new Dell('Disk', 'Get physical disk metrics', params);
                
                const keys = [
                	{
                		'name': 'health',
                		'path': 'Status.Health'
                	},
                	{
                		'name': 'sn',
                		'path': 'SerialNumber'
                	},
                	{
                		'name': 'model',
                		'path': 'Model'
                	},
                	{
                		'name': 'mediaType',
                		'path': 'MediaType'
                	},
                	{
                		'name': 'capacity',
                		'path': 'CapacityBytes'
                	}
                ];
                
                return JSON.stringify(dell.extractData(dell.executeRequest(params.path), keys));
              description: 'Returns the metrics of a physical disk.'
              timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
              parameters:
                - name: http_proxy
                  value: '{$DELL.HTTP.PROXY}'
                - name: http_status_code
                  value: '{$DELL.HTTP.RETURN.CODE.OK}'
                - name: password
                  value: '{$DELL.HTTP.API.PASSWORD}'
                - name: path
                  value: '{#ODATA}'
                - name: url
                  value: '{$DELL.HTTP.API.URL}'
                - name: user
                  value: '{$DELL.HTTP.API.USER}'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: raw
                - tag: component
                  value: storage
            - uuid: 87d8f9e8a706467099ff0e2400185d37
              name: 'Physical disk [{#DISK_NAME}]: Media type'
              type: DEPENDENT
              key: 'dell.server.hw.physicaldisk.media_type[{#DISK_NAME}]'
              value_type: CHAR
              description: 'The type of media contained in this drive. Possible values: HDD, SSD, SMR, null.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.mediaType
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: storage
            - uuid: eb60004a07d343b2ac4bbc7ee373603c
              name: 'Physical disk [{#DISK_NAME}]: Model name'
              type: DEPENDENT
              key: 'dell.server.hw.physicaldisk.model[{#DISK_NAME}]'
              value_type: CHAR
              description: 'The model number of the drive.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.model
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: storage
            - uuid: f85b8b2bad6e4de4b6a1780379441823
              name: 'Physical disk [{#DISK_NAME}]: Serial number'
              type: DEPENDENT
              key: 'dell.server.hw.physicaldisk.serialnumber[{#DISK_NAME}]'
              value_type: CHAR
              description: 'The serial number of this drive.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.sn
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: storage
              trigger_prototypes:
                - uuid: 87a9b87047764511b47498182501953b
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.serialnumber[{#DISK_NAME}],#1)<>last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.serialnumber[{#DISK_NAME}],#2) and length(last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.serialnumber[{#DISK_NAME}]))>0'
                  name: 'Dell R840: Physical disk [{#DISK_NAME}]: Has been replaced'
                  event_name: 'Dell R840: [{#DISK_NAME}] has been replaced (new serial number received)'
                  priority: INFO
                  description: '[{#DISK_NAME}] serial number has changed. Acknowledge to close the problem manually.'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 9b5c6889c2d04feb9b399f0226f8a0dd
              name: 'Physical disk [{#DISK_NAME}]: Size'
              type: DEPENDENT
              key: 'dell.server.hw.physicaldisk.size[{#DISK_NAME}]'
              trends: '0'
              units: B
              description: 'The size, in bytes, of this drive.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.capacity
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: storage
            - uuid: c6e2eca420754851a8601c89e0586b64
              name: 'Physical disk [{#DISK_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.hw.physicaldisk.status[{#DISK_NAME}]'
              trends: '0'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.physicaldisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: physicaldisk
                - tag: component
                  value: storage
              trigger_prototypes:
                - uuid: 6d3b4cf6c62541f09506487a2dc78139
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.status[{#DISK_NAME}],)=3'
                  name: 'Dell R840: Physical disk [{#DISK_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: bba8d0a074cb4663bedf508ccf2b0c21
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.status[{#DISK_NAME}],)=2'
                  name: 'Dell R840: Physical disk [{#DISK_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Physical disk [{#DISK_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.physicaldisk.status[{#DISK_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: 8dc2255aa49b49a8b815cf153b580b5e
              name: 'Dell R840: Physical disk [{#DISK_NAME}]: Size'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.hw.physicaldisk.size[{#DISK_NAME}]'
          master_item:
            key: dell.server.disks.get
          lld_macro_paths:
            - lld_macro: '{#DISK_NAME}'
              path: $.name
            - lld_macro: '{#ODATA}'
              path: $.path
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.physicalDisks
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: 1e8d28ae00d04f7ebcdd67257b99e083
          name: 'PSU discovery'
          type: DEPENDENT
          key: dell.server.psu.discovery
          description: 'Discovery of PSU sensors.'
          item_prototypes:
            - uuid: 26c85e9369aa4805a095628e890b1288
              name: 'Power supply [{#SENSOR_NAME}]: Current sensor status'
              type: DEPENDENT
              key: 'dell.server.sensor.psu.current.status[{#SENSOR_NAME}]'
              trends: '0'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.current.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.sensor.psu.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: psu
              trigger_prototypes:
                - uuid: 9afb0fbb617e4b35a9b79136313a3056
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.current.status[{#SENSOR_NAME}],)=3'
                  name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Current sensor: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 414c6fab2ad64985b074e8e46581a4d3
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.current.status[{#SENSOR_NAME}],)=2'
                  name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Current sensor: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Current sensor: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.current.status[{#SENSOR_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: c18c96e977354b258bd82a0c12433724
              name: 'Power supply [{#SENSOR_NAME}]: Current'
              type: DEPENDENT
              key: 'dell.server.sensor.psu.current[{#SENSOR_NAME}]'
              value_type: FLOAT
              units: A
              description: 'Sensor value.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.current.reading
              master_item:
                key: 'dell.server.sensor.psu.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: current
                - tag: component
                  value: psu
            - uuid: 541cdf75d8fd4b6298d46d72ea698c8b
              name: 'Power supply [{#SENSOR_NAME}]: Get sensor'
              type: DEPENDENT
              key: 'dell.server.sensor.psu.get[{#SENSOR_NAME}]'
              history: '0'
              value_type: TEXT
              description: 'Returns the metrics of a sensor.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.psu.[?(@.name == ''{#SENSOR_NAME}'')].first()'
              master_item:
                key: dell.server.sensors.get
              tags:
                - tag: component
                  value: psu
                - tag: component
                  value: raw
            - uuid: de636fb95e5a454ca70ae2f2d0ce734a
              name: 'Power supply [{#SENSOR_NAME}]: Voltage sensor status'
              type: DEPENDENT
              key: 'dell.server.sensor.psu.voltage.status[{#SENSOR_NAME}]'
              trends: '0'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.voltage.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.sensor.psu.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: psu
              trigger_prototypes:
                - uuid: 20dbfa3bfbd2411fb47d688b08d491cc
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.voltage.status[{#SENSOR_NAME}],)=3'
                  name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Voltage sensor: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 06f2eac8d2244a5caf95e304c08b3073
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.voltage.status[{#SENSOR_NAME}],)=2'
                  name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Voltage sensor: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Voltage sensor: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.psu.voltage.status[{#SENSOR_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 3633da59496341c3a35057482388e129
              name: 'Power supply [{#SENSOR_NAME}]: Voltage'
              type: DEPENDENT
              key: 'dell.server.sensor.psu.voltage[{#SENSOR_NAME}]'
              value_type: FLOAT
              units: V
              description: 'Sensor value.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.voltage.reading
              master_item:
                key: 'dell.server.sensor.psu.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: psu
                - tag: component
                  value: voltage
          graph_prototypes:
            - uuid: 75e804154af84501a5460ffe74ffe5b5
              name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Current'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.sensor.psu.current[{#SENSOR_NAME}]'
            - uuid: 31d669f53bf64ac09ed74d793618ac9b
              name: 'Dell R840: Power supply [{#SENSOR_NAME}]: Voltage'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.sensor.psu.voltage[{#SENSOR_NAME}]'
          master_item:
            key: dell.server.sensors.get
          lld_macro_paths:
            - lld_macro: '{#SENSOR_NAME}'
              path: $.name
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.psu
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: 660e28865c614e25aa1c0cd5e33888ee
          name: 'Temperature discovery'
          type: DEPENDENT
          key: dell.server.temp.discovery
          description: 'Discovery of temperature sensors.'
          item_prototypes:
            - uuid: 53e57d04b3864408b47363ce277cfc40
              name: 'Probe [{#SENSOR_NAME}]: Get sensor'
              type: DEPENDENT
              key: 'dell.server.sensor.temp.get[{#SENSOR_NAME}]'
              history: '0'
              value_type: TEXT
              description: 'Returns the metrics of a sensor.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.temperature.[?(@.id == ''{#ID}'')].first()'
              master_item:
                key: dell.server.sensors.get
              tags:
                - tag: component
                  value: raw
                - tag: component
                  value: temperature
            - uuid: 0ba4848ce443431a8680990119f0bb26
              name: 'Probe [{#SENSOR_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.sensor.temp.status[{#SENSOR_NAME}]'
              trends: '0'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.sensor.temp.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: 3c617590456f495eaa7a1b11dee0ae3a
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.temp.status[{#SENSOR_NAME}],)=3'
                  name: 'Dell R840: Probe [{#SENSOR_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 0b1fdc118b6a4983ae522cf9f1efb07b
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.temp.status[{#SENSOR_NAME}],)=2'
                  name: 'Dell R840: Probe [{#SENSOR_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Probe [{#SENSOR_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.sensor.temp.status[{#SENSOR_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 6c01858e79fd4c4bbeae694728d265fe
              name: 'Probe [{#SENSOR_NAME}]: Value'
              type: DEPENDENT
              key: 'dell.server.sensor.temp.value[{#SENSOR_NAME}]'
              value_type: FLOAT
              units: °C
              description: 'Sensor value.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.reading
              master_item:
                key: 'dell.server.sensor.temp.get[{#SENSOR_NAME}]'
              tags:
                - tag: component
                  value: temperature
          graph_prototypes:
            - uuid: dcf65d35e3e640a08ee7d32816857f09
              name: 'Dell R840: Probe [{#SENSOR_NAME}]: Value'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.sensor.temp.value[{#SENSOR_NAME}]'
          master_item:
            key: dell.server.sensors.get
          lld_macro_paths:
            - lld_macro: '{#ID}'
              path: $.id
            - lld_macro: '{#SENSOR_NAME}'
              path: $.name
            - lld_macro: '{#TYPE}'
              path: $.type
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.temperature
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: 1c5de2df1da844a38dc74763c5c8add4
          name: 'Virtual disk discovery'
          type: DEPENDENT
          key: dell.server.virtualdisk.discovery
          description: 'Discovery of virtual disks.'
          item_prototypes:
            - uuid: 6852216c27c54b5dabf567a15d8467a5
              name: 'Virtual disk [{#DISK_NAME}]: Get disk'
              type: SCRIPT
              key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              history: '0'
              value_type: TEXT
              params: |
                function validateZabbixParams(requiredParams, allParams) {
                	requiredParams.forEach(function (field) {
                		if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
                			throw 'Required param is not set: ' + field + '.';
                		}
                	});
                }
                
                function Dell(service, action, params) {
                	this.zabbixLogPrefix = '[ DELL ] [ ' + service + ' ] [ ' + action + ' ]';
                	this.request = new HttpRequest();
                
                	this.executeRequest = function (apiPath) {
                		this.request.addHeader('Authorization: Basic ' + btoa(params['user'] + ':' + params['password']));
                
                		if (params['http_proxy']) {
                			this.request.setProxy(params['http_proxy']);
                			Zabbix.log(4, this.zabbixLogPrefix + ' Using http proxy: ' + params['http_proxy']);
                		}
                
                		const response = this.request.get(params['url'] + apiPath);
                
                		this.request.clearHeader();
                
                		if (this.request.getStatus() === parseInt(params['http_status_code'])) {
                			return response;
                		} else {
                			Zabbix.log(3, this.zabbixLogPrefix + ' Unexpected HTTP response code: ' + this.request.getStatus());
                			throw 'Unexpected HTTP response code: ' + this.request.getStatus();
                		}
                	};
                
                	this.extractData = function (data, keys, skipParse) {
                		if (!skipParse) {
                			try {
                				data = JSON.parse(data);
                			} catch (error) {
                				Zabbix.log(3, this.zabbixLogPrefix + ' Could not parse the received JSON object: ' + data);
                				throw 'Could not parse received JSON object. See logs for more information.';
                			}	
                		}
                
                		if (Array.isArray(keys)) {
                			var returnBuffer = {};
                
                			for (keyIdx = 0, keysLength = keys.length; keyIdx < keysLength; keyIdx++) {
                				if (keys[keyIdx]['path'] === '@odata.id') {
                					returnBuffer[keys[keyIdx]['name']] = data[keys[keyIdx]['path']];
                				} else {
                					returnBuffer[keys[keyIdx]['name']] = this.parseJSON(data, keys[keyIdx]['path'].split('.'));
                				}
                			}
                
                			return returnBuffer;
                		} else if (typeof keys === 'object') {
                			return { [keys['name']]: this.parseJSON(data, keys['path'].split('.')) };
                		} else if (typeof keys === 'string') {
                			return this.parseJSON(data, keys.split('.'));
                		} else {
                			throw 'Unexpected key type';
                		}
                	};
                
                	this.parseJSON = function (data, jsonPath) {
                		for (var i = 0, args = jsonPath.length; i < args; i++) {
                			data = data[jsonPath[i]];
                		}
                
                		return data;
                	}
                }
                
                
                const params = JSON.parse(value);
                
                validateZabbixParams(['url', 'path', 'user', 'password', 'http_status_code'], params);
                var dell = new Dell('Disk', 'Get virtual disk metrics', params);
                
                const keys = [
                	{
                		'name': 'health',
                		'path': 'Status.Health'
                	},
                	{
                		'name': 'capacity',
                		'path': 'CapacityBytes'
                	},
                	{
                		'name': 'status',
                		'path': 'Status.State'
                	},
                	{
                		'name': 'raidStatus',
                		'path': 'Oem.Dell.DellVirtualDisk.RaidStatus'
                	},
                	{
                		'name': 'readCachePolicy',
                		'path': 'Oem.Dell.DellVirtualDisk.ReadCachePolicy'
                	},
                	{
                		'name': 'writeCachePolicy',
                		'path': 'Oem.Dell.DellVirtualDisk.WriteCachePolicy'
                	}
                ];
                
                return JSON.stringify(dell.extractData(dell.executeRequest(params.path), keys));
              description: 'Returns the metrics of a virtual disk.'
              timeout: '{$DELL.HTTP.REQUEST.TIMEOUT}'
              parameters:
                - name: http_proxy
                  value: '{$DELL.HTTP.PROXY}'
                - name: http_status_code
                  value: '{$DELL.HTTP.RETURN.CODE.OK}'
                - name: password
                  value: '{$DELL.HTTP.API.PASSWORD}'
                - name: path
                  value: '{#ODATA}'
                - name: url
                  value: '{$DELL.HTTP.API.URL}'
                - name: user
                  value: '{$DELL.HTTP.API.USER}'
              tags:
                - tag: component
                  value: raw
                - tag: component
                  value: virtualdisk
            - uuid: 40b6ef0db10049dfa2b47b3d643d52f8
              name: 'Virtual disk [{#DISK_NAME}]: RAID status'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.raid_status[{#DISK_NAME}]'
              description: 'This property represents the RAID specific status. Possible values: Blocked, Degraded, Failed, Foreign, Offline, Online, Ready, Unknown, null.'
              valuemap:
                name: 'Virtual disk RAID status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.raidStatus
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'Blocked': 1,
                      	'Degraded': 2,
                      	'Failed': 3,
                      	'Foreign': 4,
                      	'Offline': 5,
                      	'Unknown': 6,
                      	'null': 7,
                      	'Ready': 8,
                      	'Online': 9,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
              trigger_prototypes:
                - uuid: d7399429cfed4a58b89ea0818198b554
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.virtualdisk.raid_status[{#DISK_NAME}],)<8'
                  name: 'Dell R840: Virtual disk [{#DISK_NAME}]: RAID status not OK'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the disk for faults.'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 50a61448d1a64cab85af3bd416519a5f
              name: 'Virtual disk [{#DISK_NAME}]: Read policy'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.read_policy[{#DISK_NAME}]'
              description: 'Indicates the read cache policy setting for the Volume. Possible values: ReadAhead, NoReadAhead, AdaptiveReadAhead.'
              valuemap:
                name: 'Virtual disk read policy'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.readCachePolicy
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'NoReadAhead': 1,
                      	'ReadAhead': 2,
                      	'AdaptiveReadAhead': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
            - uuid: 165425c403444bdd829243176cc17728
              name: 'Virtual disk [{#DISK_NAME}]: Size'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.size[{#DISK_NAME}]'
              trends: '0'
              units: B
              description: 'The size in bytes of this Volume.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.capacity
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
            - uuid: c29744514703440787ecc94d86fac220
              name: 'Virtual disk [{#DISK_NAME}]: Current state'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.state[{#DISK_NAME}]'
              description: 'The known state of the Resource, for example, Enabled. Possible values: Enabled, Disabled, StandbyOffline, StandbySpare, InTest, Starting, Absent, UnavailableOffline, Deferring, Quiesced, Updating, Qualified.'
              valuemap:
                name: 'Redfish status state'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.status
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'Enabled': 1,
                      	'Disabled': 2,
                      	'Absent': 3,
                      	'Deferring': 4,
                      	'InTest': 5,
                      	'Quiesced': 6,
                      	'StandbyOffline': 7,
                      	'StandbySpare': 8,
                      	'Starting': 9,
                      	'UnavailableOffline': 10,
                      	'Updating': 11
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
            - uuid: 350af9c90f1e4f20b0362d0fcff06b6e
              name: 'Virtual disk [{#DISK_NAME}]: Status'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.status[{#DISK_NAME}]'
              description: 'The status of the job. Possible values: OK, Warning, Critical.'
              valuemap:
                name: 'Redfish status health'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.health
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'OK': 1,
                      	'Warning': 2,
                      	'Critical': 3,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
              trigger_prototypes:
                - uuid: 4072075d6a1c443da08c67795b799d40
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.virtualdisk.status[{#DISK_NAME}],)=3'
                  name: 'Dell R840: Virtual disk [{#DISK_NAME}]: Critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the device for faults.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 1ac52018cc744f1ba54b04095d0d882f
                  expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.virtualdisk.status[{#DISK_NAME}],)=2'
                  name: 'Dell R840: Virtual disk [{#DISK_NAME}]: Warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'Please check the device for warnings.'
                  dependencies:
                    - name: 'Dell R840: Virtual disk [{#DISK_NAME}]: Critical state'
                      expression: 'last(/DELL PowerEdge R840 by HTTP/dell.server.hw.virtualdisk.status[{#DISK_NAME}],)=3'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 126eac1b29f34a6ba144f47e8b46b7cc
              name: 'Virtual disk [{#DISK_NAME}]: Write policy'
              type: DEPENDENT
              key: 'dell.server.hw.virtualdisk.write_policy[{#DISK_NAME}]'
              description: 'Indicates the write cache policy setting for the Volume. Possible values: WriteThrough, WriteBack, ProtectedWriteBack, UnprotectedWriteBack.'
              valuemap:
                name: 'Virtual disk write policy'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.writeCachePolicy
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = {
                      	'WriteThrough': 1,
                      	'WriteBack': 2,
                      	'ProtectedWriteBack': 3,
                      	'UnprotectedWriteBack': 4,
                      };
                      
                      return typeof idx[value] === 'undefined' ? 0 : idx[value];
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'dell.server.hw.virtualdisk.get[{#DISK_NAME}]'
              tags:
                - tag: component
                  value: storage
                - tag: component
                  value: virtualdisk
          graph_prototypes:
            - uuid: 2922d5a405cb442cbd7e7c1c6e9441a1
              name: 'Dell R840: Virtual disk [{#DISK_NAME}]: Size'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'DELL PowerEdge R840 by HTTP'
                    key: 'dell.server.hw.virtualdisk.size[{#DISK_NAME}]'
          master_item:
            key: dell.server.disks.get
          lld_macro_paths:
            - lld_macro: '{#DISK_NAME}'
              path: $.name
            - lld_macro: '{#ODATA}'
              path: $.path
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.virtualDisks
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
      tags:
        - tag: class
          value: hardware
        - tag: target
          value: dell
        - tag: target
          value: 'dell poweredge'
      macros:
        - macro: '{$DELL.HTTP.API.PASSWORD}'
          type: SECRET_TEXT
          description: 'The Dell iDRAC user password.'
        - macro: '{$DELL.HTTP.API.URL}'
          value: '<Put your URL here>'
          description: 'The Dell iDRAC Redfish API URL in the format `<scheme>://<host>:<port>`.'
        - macro: '{$DELL.HTTP.API.USER}'
          value: '<Put your username here>'
          description: 'The Dell iDRAC username.'
        - macro: '{$DELL.HTTP.CPU.UTIL.HIGH}'
          value: '90'
          description: 'Sets the percentage threshold for creating a "high" severity event about CPU utilization.'
        - macro: '{$DELL.HTTP.CPU.UTIL.WARN}'
          value: '75'
          description: 'Sets the percentage threshold for creating a "warning" severity event about CPU utilization.'
        - macro: '{$DELL.HTTP.IFCONTROL}'
          value: '1'
          description: 'Link status trigger will be fired only for interfaces that have the context macro equal to "1".'
        - macro: '{$DELL.HTTP.IO.UTIL.HIGH}'
          value: '90'
          description: 'Sets the percentage threshold for creating a "high" severity event about IO utilization.'
        - macro: '{$DELL.HTTP.IO.UTIL.WARN}'
          value: '75'
          description: 'Sets the percentage threshold for creating a "warning" severity event about IO utilization.'
        - macro: '{$DELL.HTTP.MEM.UTIL.HIGH}'
          value: '90'
          description: 'Sets the percentage threshold for creating a "high" severity event about memory utilization.'
        - macro: '{$DELL.HTTP.MEM.UTIL.WARN}'
          value: '75'
          description: 'Sets the percentage threshold for creating a "warning" severity event about memory utilization.'
        - macro: '{$DELL.HTTP.PROXY}'
          description: 'Set an HTTP proxy for Redfish API requests if needed.'
        - macro: '{$DELL.HTTP.REQUEST.TIMEOUT}'
          value: 10s
          description: 'Set the timeout for HTTP requests.'
        - macro: '{$DELL.HTTP.RETURN.CODE.OK}'
          value: '200'
          description: 'Set the HTTP return code that represents an OK response from the API. The default is "200", but can vary, for example, if a proxy is used.'
        - macro: '{$DELL.HTTP.SYS.UTIL.HIGH}'
          value: '90'
          description: 'Sets the percentage threshold for creating a "high" severity event about SYS utilization.'
        - macro: '{$DELL.HTTP.SYS.UTIL.WARN}'
          value: '75'
          description: 'Sets the percentage threshold for creating a "warning" severity event about SYS utilization.'
      dashboards:
        - uuid: 05d7ff8c86274cc0adb76f0d8c39825c
          name: Overview
          pages:
            - name: Overview
              display_period: '30'
              widgets:
                - type: gauge
                  name: 'CPU utilization'
                  width: '18'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 6C00D9
                    - type: STRING
                      name: description
                      value: CPU
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: STRING
                      name: empty_color
                      value: 5000A1
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.util.cpu
                    - type: STRING
                      name: max
                      value: '100'
                    - type: STRING
                      name: min
                      value: '0'
                    - type: INTEGER
                      name: rf_rate
                      value: '30'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: INTEGER
                      name: show.2
                      value: '5'
                    - type: STRING
                      name: units
                      value: '%'
                    - type: INTEGER
                      name: units_bold
                      value: '1'
                    - type: STRING
                      name: units_color
                      value: FFFFFF
                    - type: STRING
                      name: value_arc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_arc_size
                      value: '35'
                    - type: INTEGER
                      name: value_bold
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                - type: gauge
                  name: 'Memory utilization'
                  'y': '3'
                  width: '18'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 6C00D9
                    - type: STRING
                      name: description
                      value: MEM
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: STRING
                      name: empty_color
                      value: 5000A1
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.util.mem
                    - type: STRING
                      name: max
                      value: '100'
                    - type: STRING
                      name: min
                      value: '0'
                    - type: INTEGER
                      name: rf_rate
                      value: '30'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: INTEGER
                      name: show.2
                      value: '5'
                    - type: STRING
                      name: units
                      value: '%'
                    - type: INTEGER
                      name: units_bold
                      value: '1'
                    - type: STRING
                      name: units_color
                      value: FFFFFF
                    - type: STRING
                      name: value_arc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_arc_size
                      value: '35'
                    - type: INTEGER
                      name: value_bold
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                - type: gauge
                  name: 'I/O utilization'
                  'y': '6'
                  width: '18'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 6C00D9
                    - type: STRING
                      name: description
                      value: I/O
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: STRING
                      name: empty_color
                      value: 5000A1
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.util.io
                    - type: STRING
                      name: max
                      value: '100'
                    - type: STRING
                      name: min
                      value: '0'
                    - type: INTEGER
                      name: rf_rate
                      value: '30'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: INTEGER
                      name: show.2
                      value: '5'
                    - type: STRING
                      name: units
                      value: '%'
                    - type: INTEGER
                      name: units_bold
                      value: '1'
                    - type: STRING
                      name: units_color
                      value: FFFFFF
                    - type: STRING
                      name: value_arc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_arc_size
                      value: '35'
                    - type: INTEGER
                      name: value_bold
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                - type: gauge
                  name: 'SYS utilization'
                  'y': '9'
                  width: '18'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 6C00D9
                    - type: STRING
                      name: description
                      value: SYS
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: STRING
                      name: empty_color
                      value: 5000A1
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.util.sys
                    - type: STRING
                      name: max
                      value: '100'
                    - type: STRING
                      name: min
                      value: '0'
                    - type: INTEGER
                      name: rf_rate
                      value: '30'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: INTEGER
                      name: show.2
                      value: '5'
                    - type: STRING
                      name: units
                      value: '%'
                    - type: INTEGER
                      name: units_bold
                      value: '1'
                    - type: STRING
                      name: units_color
                      value: FFFFFF
                    - type: STRING
                      name: value_arc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_arc_size
                      value: '35'
                    - type: INTEGER
                      name: value_bold
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                - type: item
                  name: 'Redfish API'
                  x: '18'
                  width: '27'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 2196F3
                    - type: STRING
                      name: description
                      value: 'Redfish API'
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: 'net.tcp.service[https]'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'HW model'
                  x: '18'
                  'y': '3'
                  width: '54'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 2196F3
                    - type: STRING
                      name: description
                      value: 'HW model'
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.hw.model
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Serial number'
                  x: '18'
                  'y': '6'
                  width: '54'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 2196F3
                    - type: STRING
                      name: description
                      value: 'Serial number'
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.hw.serialnumber
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: Firmware
                  x: '18'
                  'y': '9'
                  width: '54'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 2196F3
                    - type: STRING
                      name: description
                      value: Firmware
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.hw.firmware
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'System health'
                  x: '45'
                  width: '27'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 2196F3
                    - type: STRING
                      name: description
                      value: 'System Health'
                    - type: STRING
                      name: desc_color
                      value: FFFFFF
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'DELL PowerEdge R840 by HTTP'
                        key: dell.server.status
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: show.1
                      value: '1'
                    - type: STRING
                      name: value_color
                      value: FFFFFF
                    - type: INTEGER
                      name: value_size
                      value: '35'
            - name: Discoveries
              display_period: '30'
              widgets:
                - type: honeycomb
                  name: 'Interface link'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Interface*Link status'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAA
                    - type: STRING
                      name: thresholds.0.color
                      value: D3212C
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.1.color
                      value: 069C56
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '3'
                - type: honeycomb
                  name: 'Temperature sensors'
                  'y': '4'
                  width: '72'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Probe*Value'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAB
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                - type: honeycomb
                  name: 'Physical disks'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Physical disk*Status'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAC
                    - type: STRING
                      name: thresholds.0.color
                      value: 069C56
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.1.color
                      value: FF681E
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.2.color
                      value: D3212C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '3'
                - type: honeycomb
                  name: 'Power supplies'
                  'y': '12'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Power supply*Voltage'
                    - type: STRING
                      name: items.1
                      value: 'Power supply*Current'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: honeycomb
                  name: 'Interface speed'
                  x: '36'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Interface*Speed'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAABA
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                    - type: STRING
                      name: thresholds.0.color
                      value: D3212C
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FF681E
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '10000000'
                    - type: STRING
                      name: thresholds.2.color
                      value: FF980E
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '100000000'
                    - type: STRING
                      name: thresholds.3.color
                      value: 069C56
                    - type: STRING
                      name: thresholds.3.threshold
                      value: '1000000000'
                    - type: STRING
                      name: thresholds.4.color
                      value: 2196F3
                    - type: STRING
                      name: thresholds.4.threshold
                      value: '10000000000'
                    - type: STRING
                      name: thresholds.5.color
                      value: 6C00D9
                    - type: STRING
                      name: thresholds.5.threshold
                      value: '25000000000'
                    - type: STRING
                      name: thresholds.6.color
                      value: D900A6
                    - type: STRING
                      name: thresholds.6.threshold
                      value: '40000000000'
                - type: honeycomb
                  name: 'Virtual disks'
                  x: '36'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Virtual disk*: Status'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAD
                    - type: STRING
                      name: thresholds.0.color
                      value: 069C56
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.1.color
                      value: FF681E
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.2.color
                      value: D3212C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '3'
                - type: honeycomb
                  name: Fans
                  x: '36'
                  'y': '12'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Probe*Status'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("\[(.*?)\]", "\1")}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAF
                    - type: STRING
                      name: thresholds.0.color
                      value: 069C56
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.1.color
                      value: FF681E
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.2.color
                      value: D3212C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '3'
      valuemaps:
        - uuid: 4cb6f9b8048a4109849a7f12bf0aba1c
          name: 'Network interface status'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: 'Null'
            - value: '2'
              newvalue: Down
            - value: '3'
              newvalue: Up
        - uuid: dfee913787ba42e49a11dae28d1a603f
          name: 'Redfish API availability'
          mappings:
            - value: '0'
              newvalue: Unavailable
            - value: '1'
              newvalue: Available
        - uuid: 5b5774ab04ec4f3eaf1e528ad02e0978
          name: 'Redfish status health'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: OK
            - value: '2'
              newvalue: Warning
            - value: '3'
              newvalue: Critical
        - uuid: f73f21dc4f964efeb4f54f8565d4cd58
          name: 'Redfish status state'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Enabled
            - value: '2'
              newvalue: Disabled
            - value: '3'
              newvalue: Absent
            - value: '4'
              newvalue: Deferring
            - value: '5'
              newvalue: InTest
            - value: '6'
              newvalue: Quiesced
            - value: '7'
              newvalue: StandbyOffline
            - value: '8'
              newvalue: StandbySpare
            - value: '9'
              newvalue: Starting
            - value: '10'
              newvalue: UnavailableOffline
            - value: '11'
              newvalue: Updating
        - uuid: 865251146a524335be8ec054d8df15aa
          name: 'Virtual disk RAID status'
          mappings:
            - value: '0'
              newvalue: unknown
            - value: '1'
              newvalue: Blocked
            - value: '2'
              newvalue: Degraded
            - value: '3'
              newvalue: Failed
            - value: '4'
              newvalue: Foreign
            - value: '5'
              newvalue: Offline
            - value: '6'
              newvalue: Unknown
            - value: '7'
              newvalue: 'Null'
            - value: '8'
              newvalue: Ready
            - value: '9'
              newvalue: Online
        - uuid: b37b8981282944348ab2748fb09d55f4
          name: 'Virtual disk read policy'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: NoReadAhead
            - value: '2'
              newvalue: ReadAhead
            - value: '3'
              newvalue: AdaptiveReadAhead
        - uuid: ccdd0a176df640e09b95837aba7580f1
          name: 'Virtual disk write policy'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: WriteThrough
            - value: '2'
              newvalue: WriteBack
            - value: '3'
              newvalue: ProtectedWriteBack
            - value: '4'
              newvalue: UnprotectedWriteBack
  graphs:
    - uuid: a0444e242bcf432b9464d2fe8edbe9e3
      name: 'Dell R840: CPU utilization'
      graph_items:
        - color: 199C0D
          item:
            host: 'DELL PowerEdge R840 by HTTP'
            key: dell.server.util.cpu
    - uuid: 893045a4df4c44e6966833c8c5e2d05a
      name: 'Dell R840: IO utilization'
      graph_items:
        - color: 199C0D
          item:
            host: 'DELL PowerEdge R840 by HTTP'
            key: dell.server.util.io
    - uuid: 1ab63e40fcd54d22a96e1ba6ba7038e2
      name: 'Dell R840: Memory utilization'
      graph_items:
        - color: 199C0D
          item:
            host: 'DELL PowerEdge R840 by HTTP'
            key: dell.server.util.mem
    - uuid: ce878cd735004169938aefc97e4043aa
      name: 'Dell R840: SYS utilization'
      graph_items:
        - color: 199C0D
          item:
            host: 'DELL PowerEdge R840 by HTTP'
            key: dell.server.util.sys
