zabbix_export:
  version: '5.4'
  date: '2021-05-09T00:00:00Z'
  groups:
    -
      name: 'Templates/Server hardware'
  templates:
    -
      template: 'Intel SR1530 IPMI'
      name: 'Intel SR1530 IPMI'
      groups:
        -
          name: 'Templates/Server hardware'
      items:
        -
          name: 'BB +1.8V SM'
          type: IPMI
          key: bb_1.8v_sm
          history: 1w
          value_type: FLOAT
          units: V
          ipmi_sensor: 'BB +1.8V SM'
          tags:
            -
              tag: Application
              value: Voltage
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/bb_1.8v_sm)<1.597 or last(/Intel SR1530 IPMI/bb_1.8v_sm)>2.019'
              name: 'BB +1.8V SM Critical [{ITEM.VALUE}]'
              priority: DISASTER
              dependencies:
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
            -
              expression: 'last(/Intel SR1530 IPMI/bb_1.8v_sm)<1.646 or last(/Intel SR1530 IPMI/bb_1.8v_sm)>1.960'
              name: 'BB +1.8V SM Non-Critical [{ITEM.VALUE}]'
              priority: HIGH
              dependencies:
                -
                  name: 'BB +1.8V SM Critical [{ITEM.VALUE}]'
                  expression: 'last(/Intel SR1530 IPMI/bb_1.8v_sm)<1.597 or last(/Intel SR1530 IPMI/bb_1.8v_sm)>2.019'
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
        -
          name: 'BB +3.3V'
          type: IPMI
          key: bb_3.3v
          history: 1w
          value_type: FLOAT
          units: V
          ipmi_sensor: 'BB +3.3V'
          tags:
            -
              tag: Application
              value: Voltage
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/bb_3.3v)<2.876 or last(/Intel SR1530 IPMI/bb_3.3v)>3.729'
              name: 'BB +3.3V Critical [{ITEM.VALUE}]'
              priority: DISASTER
              dependencies:
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
            -
              expression: 'last(/Intel SR1530 IPMI/bb_3.3v)<2.970 or last(/Intel SR1530 IPMI/bb_3.3v)>3.618'
              name: 'BB +3.3V Non-Critical [{ITEM.VALUE}]'
              priority: HIGH
              dependencies:
                -
                  name: 'BB +3.3V Critical [{ITEM.VALUE}]'
                  expression: 'last(/Intel SR1530 IPMI/bb_3.3v)<2.876 or last(/Intel SR1530 IPMI/bb_3.3v)>3.729'
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
        -
          name: 'BB +3.3V STBY'
          type: IPMI
          key: bb_3.3v_stby
          history: 1w
          value_type: FLOAT
          units: V
          ipmi_sensor: 'BB +3.3V STBY'
          tags:
            -
              tag: Application
              value: Voltage
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/bb_3.3v_stby)<2.876 or last(/Intel SR1530 IPMI/bb_3.3v_stby)>3.729'
              name: 'BB +3.3V STBY Critical [{ITEM.VALUE}]'
              priority: DISASTER
            -
              expression: 'last(/Intel SR1530 IPMI/bb_3.3v_stby)<2.970 or last(/Intel SR1530 IPMI/bb_3.3v_stby)>3.618'
              name: 'BB +3.3V STBY Non-Critical [{ITEM.VALUE}]'
              priority: HIGH
              dependencies:
                -
                  name: 'BB +3.3V STBY Critical [{ITEM.VALUE}]'
                  expression: 'last(/Intel SR1530 IPMI/bb_3.3v_stby)<2.876 or last(/Intel SR1530 IPMI/bb_3.3v_stby)>3.729'
        -
          name: 'BB +5.0V'
          type: IPMI
          key: bb_5.0v
          history: 1w
          value_type: FLOAT
          units: V
          ipmi_sensor: 'BB +5.0V'
          tags:
            -
              tag: Application
              value: Voltage
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/bb_5.0v)<4.362 or last(/Intel SR1530 IPMI/bb_5.0v)>5.663'
              name: 'BB +5.0V Critical [{ITEM.VALUE}]'
              priority: DISASTER
              dependencies:
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
            -
              expression: 'last(/Intel SR1530 IPMI/bb_5.0v)<4.483 or last(/Intel SR1530 IPMI/bb_5.0v)>5.495'
              name: 'BB +5.0V Non-Critical [{ITEM.VALUE}]'
              priority: HIGH
              dependencies:
                -
                  name: 'BB +5.0V Critical [{ITEM.VALUE}]'
                  expression: 'last(/Intel SR1530 IPMI/bb_5.0v)<4.362 or last(/Intel SR1530 IPMI/bb_5.0v)>5.663'
                -
                  name: Power
                  expression: 'last(/Intel SR1530 IPMI/power)=0'
        -
          name: 'BB Ambient Temp'
          type: IPMI
          key: bb_ambient_temp
          history: 1w
          value_type: FLOAT
          units: C
          ipmi_sensor: 'BB Ambient Temp'
          tags:
            -
              tag: Application
              value: Temperature
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/bb_ambient_temp)<5 or last(/Intel SR1530 IPMI/bb_ambient_temp)>66'
              name: 'BB Ambient Temp Critical [{ITEM.VALUE}]'
              priority: DISASTER
            -
              expression: 'last(/Intel SR1530 IPMI/bb_ambient_temp)<10 or last(/Intel SR1530 IPMI/bb_ambient_temp)>61'
              name: 'BB Ambient Temp Non-Critical [{ITEM.VALUE}]'
              priority: HIGH
              dependencies:
                -
                  name: 'BB Ambient Temp Critical [{ITEM.VALUE}]'
                  expression: 'last(/Intel SR1530 IPMI/bb_ambient_temp)<5 or last(/Intel SR1530 IPMI/bb_ambient_temp)>66'
        -
          name: Power
          type: IPMI
          key: power
          history: 1w
          ipmi_sensor: power
          tags:
            -
              tag: Application
              value: Voltage
          triggers:
            -
              expression: 'last(/Intel SR1530 IPMI/power)=0'
              name: Power
              priority: WARNING
        -
          name: 'Processor Vcc'
          type: IPMI
          key: processor_vcc
          history: 1w
          value_type: FLOAT
          units: V
          ipmi_sensor: 'Processor Vcc'
          tags:
            -
              tag: Application
              value: Voltage
        -
          name: 'System Fan 3'
          type: IPMI
          key: system_fan_3
          history: 1w
          value_type: FLOAT
          units: RPM
          ipmi_sensor: 'System Fan 3'
          tags:
            -
              tag: Application
              value: Fans
  graphs:
    -
      name: 'Fan speed and ambient temperature'
      graph_items:
        -
          drawtype: GRADIENT_LINE
          color: EE0000
          item:
            host: 'Intel SR1530 IPMI'
            key: bb_ambient_temp
        -
          sortorder: '1'
          color: '000000'
          yaxisside: RIGHT
          item:
            host: 'Intel SR1530 IPMI'
            key: system_fan_3
    -
      name: Voltage
      yaxismax: '5.5'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          drawtype: BOLD_LINE
          color: '880000'
          item:
            host: 'Intel SR1530 IPMI'
            key: power
        -
          sortorder: '1'
          color: '009900'
          item:
            host: 'Intel SR1530 IPMI'
            key: bb_1.8v_sm
        -
          sortorder: '2'
          color: 00CCCC
          item:
            host: 'Intel SR1530 IPMI'
            key: bb_3.3v
        -
          sortorder: '3'
          color: '000000'
          item:
            host: 'Intel SR1530 IPMI'
            key: bb_3.3v_stby
        -
          sortorder: '4'
          color: 3333FF
          item:
            host: 'Intel SR1530 IPMI'
            key: bb_5.0v
        -
          sortorder: '5'
          color: '777700'
          item:
            host: 'Intel SR1530 IPMI'
            key: processor_vcc
