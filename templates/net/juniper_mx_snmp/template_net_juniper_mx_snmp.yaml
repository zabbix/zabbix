zabbix_export:
  version: '8.0'
  template_groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: fe7eb8b22ce84017b07bcab36e9032dc
      template: 'Juniper MX by SNMP'
      name: 'Juniper MX by SNMP'
      description: |
        The template for monitoring Juniper MX Series by SNMP.
        
        MIBs used:
        SNMPv2-MIB
        EtherLike-MIB
        HOST-RESOURCES-MIB
        IF-MIB
        OSPF-MIB
        JUNIPER-ALARM-MIB
        JUNIPER-DOM-MIB
        JUNIPER-MIB
        BGP4-V2-MIB-JUNIPER
        OSPFV3-MIB-JUNIPER
        
        Generated by official Zabbix template tool "Templator"
      wizard_ready: 'YES'
      readme: |
        The template for monitoring Juniper MX Series by SNMP.
        
            MIBs used:
            SNMPv2-MIB
            EtherLike-MIB
            HOST-RESOURCES-MIB
            IF-MIB
            OSPF-MIB
            JUNIPER-ALARM-MIB
            JUNIPER-DOM-MIB
            JUNIPER-MIB
            BGP4-V2-MIB-JUNIPER
            OSPFV3-MIB-JUNIPER
      vendor:
        name: Zabbix
        version: 8.0-2
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: 2af50dac1b3245a9b6c350c1096209b6
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          valuemap:
            name: 'Service state'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 07752b9c9851403a9ce753fcd122f808
              expression: 'max(/Juniper MX by SNMP/icmpping,#3)=0'
              name: 'Juniper MX: Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout. Please check device connectivity.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 250e30e7298444df8208e15c6a32a1c5
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          value_type: FLOAT
          units: '%'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: e4cc0c30ff1544d68adfe9f3863e0f19
              expression: 'min(/Juniper MX by SNMP/icmppingloss,5m)>{$JUNIPER.MX.ICMP_LOSS_WARN} and min(/Juniper MX by SNMP/icmppingloss,5m)<100'
              name: 'Juniper MX: High ICMP ping loss'
              event_name: 'Juniper MX: High ICMP ping loss (over {$JUNIPER.MX.ICMP_LOSS_WARN}% for 5m)'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'ICMP packet loss detected.'
              dependencies:
                - name: 'Juniper MX: Unavailable by ICMP ping'
                  expression: 'max(/Juniper MX by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 8b40a9b8da8546e2a0b593e7dbb72537
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          value_type: FLOAT
          units: s
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: d573e7a77408476e854de2e556480acc
              expression: 'avg(/Juniper MX by SNMP/icmppingsec,5m)>{$JUNIPER.MX.ICMP_RESPONSE_TIME_WARN}'
              name: 'Juniper MX: High ICMP ping response time'
              event_name: 'Juniper MX: High ICMP ping response time (over {$JUNIPER.MX.ICMP_RESPONSE_TIME_WARN}s for 5m)'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Average ICMP response time is too high.'
              dependencies:
                - name: 'Juniper MX: High ICMP ping loss'
                  expression: 'min(/Juniper MX by SNMP/icmppingloss,5m)>{$JUNIPER.MX.ICMP_LOSS_WARN} and min(/Juniper MX by SNMP/icmppingloss,5m)<100'
                - name: 'Juniper MX: Unavailable by ICMP ping'
                  expression: 'max(/Juniper MX by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 0335221808684100bd1e062a730a909d
          name: 'SNMP walk BGP Peer'
          type: SNMP_AGENT
          snmp_oid: 'walk[ 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.3, 1.3.6.1.4.1.2636.5.1.1.2.4.1.1.1, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.2, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.7, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.8, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.10, 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.2, 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.11, 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.14, 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.13]'
          key: juniper.mx.bgp.peer.data.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerData` for BGP Peer Data.'
          tags:
            - tag: component
              value: raw
        - uuid: a6bab1f7b7bd45cf9dcfbb309957cf91
          name: 'SNMP walk BGP Prefix Counters'
          type: SNMP_AGENT
          snmp_oid: 'walk[ 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.1, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.2, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.7, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.8, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.9, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.10, 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.11]'
          key: juniper.mx.bgp.prefix.counters.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `BGP4-V2-MIB-JUNIPER::jnxBgpM2PrefixCountersTable` for Prefix Counters.'
          tags:
            - tag: component
              value: raw
        - uuid: 9d7d94b8c0d046d2a1a6426e89128719
          name: 'SNMP walk Multi-lane digital optical monitoring'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.2636.3.60.1.2.1.1.1, 1.3.6.1.4.1.2636.3.60.1.2.1.1.2, 1.3.6.1.4.1.2636.3.60.1.2.1.1.4, 1.3.6.1.4.1.2636.3.60.1.2.1.1.6, 1.3.6.1.4.1.2636.3.60.1.2.1.1.8, 1.3.6.1.4.1.2636.3.60.1.2.1.1.9, 1.3.6.1.4.1.2636.3.60.1.1.1.1.8, 1.3.6.1.4.1.2636.3.60.1.1.1.1.30, 1.3.6.1.2.1.2.2.1.8, 1.3.6.1.2.1.2.2.1.7, 1.3.6.1.2.1.31.1.1.1.18, 1.3.6.1.2.1.31.1.1.1.1, 1.3.6.1.2.1.2.2.1.2, 1.3.6.1.2.1.2.2.1.3]'
          key: juniper.mx.dom.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `JUNIPER-DOM-MIB::jnxDomModuleLaneTable` for multi-lane digital optical monitoring.'
          tags:
            - tag: component
              value: raw
        - uuid: 7ddc368f670e40d1b5770e0a4428ce45
          name: 'SNMP walk EtherLike-MIB interfaces'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.2.1.10.7.2.1.19,1.3.6.1.2.1.2.2.1.8,1.3.6.1.2.1.31.1.1.1.18,1.3.6.1.2.1.31.1.1.1.1,1.3.6.1.2.1.2.2.1.2]'
          key: juniper.mx.net.if.duplex.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of interfaces from IF-MIB and EtherLike-MIB. Interfaces with operational status `up(1)` are discovered.'
          tags:
            - tag: component
              value: raw
        - uuid: b11839f1bddd4781b23111511db1615a
          name: 'SNMP walk Network interfaces'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.2.1.2.2.1.8, 1.3.6.1.2.1.2.2.1.2, 1.3.6.1.2.1.2.2.1.3, 1.3.6.1.2.1.2.2.1.7, 1.3.6.1.2.1.2.2.1.13, 1.3.6.1.2.1.2.2.1.14, 1.3.6.1.2.1.2.2.1.19, 1.3.6.1.2.1.2.2.1.20, 1.3.6.1.2.1.31.1.1.1.1, 1.3.6.1.2.1.31.1.1.1.6, 1.3.6.1.2.1.31.1.1.1.10, 1.3.6.1.2.1.31.1.1.1.15, 1.3.6.1.2.1.31.1.1.1.18]'
          key: juniper.mx.net.if.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of interfaces from IF-MIB.'
          tags:
            - tag: component
              value: raw
        - uuid: f42152e7c0504aa4bfa611725f365afc
          name: 'SNMP walk Operating Table'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.2636.3.1.13.1.5, 1.3.6.1.4.1.2636.3.1.13.1.7, 1.3.6.1.4.1.2636.3.1.13.1.8, 1.3.6.1.4.1.2636.3.1.13.1.5.2, 1.3.6.1.4.1.2636.3.1.13.1.5.4, 1.3.6.1.4.1.2636.3.1.13.1.6.4, 1.3.6.1.4.1.2636.3.1.13.1.6.2, 1.3.6.1.4.1.2636.3.1.13.1.11]'
          key: juniper.mx.operating.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `JUNIPER-MIB::jnxOperatingTable` for CPU, Memory, Temperature, and Fans.'
          tags:
            - tag: component
              value: raw
        - uuid: 80f06a9c2725450e9b5a16377b2cf7af
          name: 'SNMP walk OSPF Neighbors'
          type: SNMP_AGENT
          snmp_oid: 'walk[ 1.3.6.1.2.1.14.10.1.1, 1.3.6.1.2.1.14.10.1.3, 1.3.6.1.2.1.14.10.1.5, 1.3.6.1.2.1.14.10.1.6, 1.3.6.1.2.1.14.10.1.7, 1.3.6.1.2.1.14.10.1.11]'
          key: juniper.mx.ospf.nbr.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `OSPF-MIB::ospfNbrTable` for OSPF Neighbors.'
          tags:
            - tag: component
              value: raw
        - uuid: 4f3115a33a6a43b6bf0ab2be3eeec995
          name: 'SNMP walk OSPFv3 Neighbors'
          type: SNMP_AGENT
          snmp_oid: 'walk[ 1.3.6.1.4.1.2636.5.4.1.1.9.1.5, 1.3.6.1.4.1.2636.5.4.1.1.9.1.7, 1.3.6.1.4.1.2636.5.4.1.1.9.1.8, 1.3.6.1.4.1.2636.5.4.1.1.9.1.9, 1.3.6.1.4.1.2636.5.4.1.1.9.1.11]'
          key: juniper.mx.ospfv3.nbr.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `OSPFV3-MIB-JUNIPER::jnxOspfv3NbrTable` for OSPFv3 Neighbors.'
          tags:
            - tag: component
              value: raw
        - uuid: d72814c5b9c64f4e843a04137b99dad6
          name: 'SNMP walk Redundancy Table'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.2636.3.1.14.1.5, 1.3.6.1.4.1.2636.3.1.14.1.6, 1.3.6.1.4.1.2636.3.1.14.1.10, 1.3.6.1.4.1.2636.3.1.14.1.16, 1.3.6.1.4.1.2636.3.1.14.1.7]'
          key: juniper.mx.redundancy.table.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Scanning `JUNIPER-MIB::jnxRedundancyTable` for Router Redundancy.'
          tags:
            - tag: component
              value: raw
        - uuid: b9b7da53c32a4b48958c313ed45870b1
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.4.0]'
          key: 'juniper.mx.system.contact[sysContact.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            Name and contact information of the contact person for the node. If not provided, the value is a zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 092dbc3c0da648449e69047d3f83b2ba
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'juniper.mx.system.descr[sysDescr.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should include the full name and version identification of the system's hardware type, software operating system, and networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: e101a0bd30ae45f6bff0b2b8c914f95b
          name: 'Hardware model name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.2636.3.1.2.0]'
          key: juniper.mx.system.hw.model
          delay: 1h
          value_type: CHAR
          description: |
            MIB: JUNIPER-MIB
            The name, model, or detailed description of the device, indicating which product it represents, for example, `M40`.
          inventory_link: MODEL
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: 7fbc5fa8ef084cf585d5a617812b2d70
          name: 'Hardware serial number'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.2636.3.1.3.0]'
          key: juniper.mx.system.hw.serialnumber
          delay: 1h
          value_type: CHAR
          description: |
            MIB: JUNIPER-MIB
            The serial number of this subject, blank if unknown or unavailable.
          inventory_link: SERIALNO_A
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 317bc72900e24f4991798775b48bc641
              expression: 'last(/Juniper MX by SNMP/juniper.mx.system.hw.serialnumber,#1)<>last(/Juniper MX by SNMP/juniper.mx.system.hw.serialnumber,#2) and length(last(/Juniper MX by SNMP/juniper.mx.system.hw.serialnumber))>0'
              name: 'Juniper MX: Device has been replaced'
              event_name: 'Juniper MX: Device has been replaced (new serial number received)'
              priority: INFO
              description: 'Device serial number has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: c2bcb74f5afe4659af6a614ea98dbf51
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.25.1.1.0]'
          key: 'juniper.mx.system.hw.uptime[hrSystemUptime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from `sysUpTime` in the SNMPv2-MIB [RFC1907] because `sysUpTime` is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: ef6895d078204d17b7f3ba142c2075bf
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.6.0]'
          key: 'juniper.mx.system.location[sysLocation.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            Physical location of the node (e.g., `equipment room`, `3rd floor`). If not provided, the value is a zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 1a80dba9043e43edb4c073f397e471c9
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.5.0]'
          key: juniper.mx.system.name
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node. By convention, this is the node's fully-qualified domain name. If the name is unknown, the value is a zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: faec7813bfc14e5da59bfaf7ad639461
              expression: 'last(/Juniper MX by SNMP/juniper.mx.system.name,#1)<>last(/Juniper MX by SNMP/juniper.mx.system.name,#2) and length(last(/Juniper MX by SNMP/juniper.mx.system.name))>0'
              name: 'Juniper MX: System name has changed'
              event_name: 'Juniper MX: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: 33b048b47db542d6bc304a0048e4b743
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.3.0]'
          key: 'juniper.mx.system.net.uptime[sysUpTime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            Time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 832ad6d2465e4c20813c194114d2655b
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.2.0]'
          key: 'juniper.mx.system.objectid[sysObjectID.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the entity as part of the vendor's SMI enterprises subtree with the prefix 1.3.6.1.4.1 (e.g., a vendor with the identifier 1.3.6.1.4.1.4242 might assign a system object with the OID 1.3.6.1.4.1.4242.1.1).
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 8f743934b3364cadbef2f178cc5aabb1
          name: 'Operating system'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'juniper.mx.system.sw.os[sysDescr.0]'
          delay: 1h
          value_type: CHAR
          description: 'MIB: SNMPv2-MIB'
          inventory_link: OS
          preprocessing:
            - type: REGEX
              parameters:
                - 'kernel (JUNOS [0-9a-zA-Z\.\-]+)'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: os
          triggers:
            - uuid: 007d3cb1343144cc9ee01d24df45082d
              expression: 'last(/Juniper MX by SNMP/juniper.mx.system.sw.os[sysDescr.0],#1)<>last(/Juniper MX by SNMP/juniper.mx.system.sw.os[sysDescr.0],#2) and length(last(/Juniper MX by SNMP/juniper.mx.system.sw.os[sysDescr.0]))>0'
              name: 'Juniper MX: Operating system description has changed'
              priority: INFO
              description: 'Operating system description has changed. Possible reasons - system has been updated or replaced. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              dependencies:
                - name: 'Juniper MX: System name has changed'
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.system.name,#1)<>last(/Juniper MX by SNMP/juniper.mx.system.name,#2) and length(last(/Juniper MX by SNMP/juniper.mx.system.name))>0'
              tags:
                - tag: scope
                  value: notice
        - uuid: d2d0f8b19fc3474880ce2decd2880ce8
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other `snmptrap` items.'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: 8223b49a0d1f4467a5f79e423a4bf862
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible values:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: a30f49e7b715409abec697f303ccc46c
              expression: 'max(/Juniper MX by SNMP/zabbix[host,snmp,available],{$JUNIPER.MX.SNMP.TIMEOUT})=0'
              name: 'Juniper MX: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              dependencies:
                - name: 'Juniper MX: Unavailable by ICMP ping'
                  expression: 'max(/Juniper MX by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 68b0e4b2b82e41db9293dfff16bba68a
          name: 'BGP Peer discovery'
          type: DEPENDENT
          key: juniper.mx.bgp.peer.discovery
          description: 'Scanning `BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerData` for BGP Peer.'
          item_prototypes:
            - uuid: 86a197104cd74bea88d26179e645146e
              name: 'BGP AS [{#BGPM2_PEER_REMOTE_AS}] Peer [{#BGPM2_PEER_REMOTE_ADDR}]: Established time'
              type: DEPENDENT
              key: 'juniper.mx.bgp.established.time[jnxBgpM2PeerFsmEstablishedTime.{#SNMPINDEX}]'
              value_type: FLOAT
              units: s
              description: 'This timer indicates how long (in seconds) this peer has been in the Established state or how long since this peer was last in the Established state. It is set to zero when a new peer is configured or the router is booted.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.4.1.1.1.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.peer.data.snmp.walk
              tags:
                - tag: address
                  value: '{#BGPM2_PEER_REMOTE_ADDR}'
                - tag: as
                  value: '{#BGPM2_PEER_REMOTE_AS}'
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: 68baa298dd0d44fb823ae291fbe21db3
              name: 'BGP AS [{#BGPM2_PEER_REMOTE_AS}] Peer [{#BGPM2_PEER_REMOTE_ADDR}]: State'
              type: DEPENDENT
              key: 'juniper.mx.bgp.state[jnxBgpM2PeerState.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The remote BGP peer''s FSM state.'
              valuemap:
                name: 'BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.1.1.1.2.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.peer.data.snmp.walk
              tags:
                - tag: address
                  value: '{#BGPM2_PEER_REMOTE_ADDR}'
                - tag: as
                  value: '{#BGPM2_PEER_REMOTE_AS}'
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: 21a9a3b2f07c4b5b844b6e26289f5789
              name: 'BGP AS [{#BGPM2_PEER_REMOTE_AS}] Peer [{#BGPM2_PEER_REMOTE_ADDR}]: Status'
              type: DEPENDENT
              key: 'juniper.mx.bgp.status[jnxBgpM2PeerStatus.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'Whether or not the BGP FSM for this remote peer is halted or running. The BGP FSM for a remote peer is halted after processing a Stop event. Likewise, it is in the running state after a Start event. The `jnxBgpM2PeerState` will generally be in the idle state when the FSM is halted, although some extensions such as Graceful Restart will leave the peer in the Idle state but with the FSM running.'
              valuemap:
                name: 'BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerStatus'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.1.1.1.3.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.peer.data.snmp.walk
              tags:
                - tag: address
                  value: '{#BGPM2_PEER_REMOTE_ADDR}'
                - tag: as
                  value: '{#BGPM2_PEER_REMOTE_AS}'
                - tag: component
                  value: bgp
                - tag: component
                  value: network
          trigger_prototypes:
            - uuid: cdbf01b1b5bc4dfd8e53fe43efe8f6c0
              expression: 'last(/Juniper MX by SNMP/juniper.mx.bgp.state[jnxBgpM2PeerState.{#SNMPINDEX}],#3)<>6 and last(/Juniper MX by SNMP/juniper.mx.bgp.status[jnxBgpM2PeerStatus.{#SNMPINDEX}])=2'
              name: 'Juniper MX: BGP AS [{#BGPM2_PEER_REMOTE_AS}] Peer [{#BGPM2_PEER_REMOTE_ADDR}]: is down'
              opdata: 'Current state: {ITEM.LASTVALUE1}, Status: {ITEM.LASTVALUE2}'
              priority: HIGH
              description: 'Session [BGP AS [{#BGPM2_PEER_REMOTE_AS}] Peer [{#BGPM2_PEER_REMOTE_ADDR}]] is down, check the BGP configuration. For information on checking the BGP configuration, see https://www.juniper.net/documentation/us/en/software/junos/bgp/topics/topic-map/troubleshooting-bgp-sessions.html.'
              tags:
                - tag: scope
                  value: notice
          master_item:
            key: juniper.mx.bgp.peer.data.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#BGPM2_PEER_INDEX}'
                - 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.14
                - '0'
                - '{#BGPM2_PEER_REMOTE_ADDR}'
                - 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.11
                - '0'
                - '{#BGPM2_PEER_REMOTE_AS}'
                - 1.3.6.1.4.1.2636.5.1.1.2.1.1.1.13
                - '0'
              error_handler: CUSTOM_ERROR
              error_handler_params: 'BGP instance is not running'
            - type: JAVASCRIPT
              parameters:
                - |
                  var bgp = JSON.parse(value);
                  
                  bgp.forEach(function (item, index, array) {
                  	var ip = item["{#BGPM2_PEER_REMOTE_ADDR}"];
                  	var parts = ip.trim().split(' ');
                  
                  	if (parts.length === 4) {
                  		for (var i = 0; i < parts.length; ++i) {
                  			parts[i] = parseInt(parts[i], 16);
                  		}
                  		ip = parts.join('.');
                  	}
                  	else if (parts.length == 16) {
                  		var ipSegments = [];
                  		for (var i = 0; i < parts.length; i += 4) {
                  			var ipv6 = parts.slice(i, i + 4).join('');
                  			ipv6 = parseInt(ipv6, 16).toString(16);
                  			ipSegments.push(ipv6 || '0');
                  		}
                  		ip = ipSegments.join(':').toLowerCase();
                  
                  		var maxZeros = 0, currZeros = 0, startIdx = -1, maxStartIdx = -1;
                  		for (i = 0; i < ipSegments.length; i++) {
                  			if (ipSegments[i] === '0') {
                  				if (currZeros === 0) startIdx = i;
                  				currZeros++;
                  			} else {
                  				if (currZeros > maxZeros) {
                  					maxZeros = currZeros;
                  					maxStartIdx = startIdx;
                  				}
                  				currZeros = 0;
                  			}
                  		}
                  		if (currZeros > maxZeros) {
                  			maxZeros = currZeros;
                  			maxStartIdx = startIdx;
                  		}
                  		if (maxZeros > 1) {
                  			ipSegments.splice(maxStartIdx, maxZeros, '');
                  			ip = ipSegments.join(':').replace(/(^:|:$)/, '');
                  		}
                  	}
                  
                  	array[index]["{#BGPM2_PEER_REMOTE_ADDR}"] = ip;
                  });
                  
                  return JSON.stringify(bgp);
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: cf094cdd507c4de2987638b4eae8c7f2
          name: 'BGP Prefix counter discovery'
          type: DEPENDENT
          key: juniper.mx.bgp.prefix.discovery
          description: 'Scanning `BGP4-V2-MIB-JUNIPER::jnxBgpM2PrefixCountersTable` for Prefix Counters.'
          item_prototypes:
            - uuid: bbb40d9366e2447284f131be0757f771
              name: 'BGP [{#BGPM2_AFI_SAFI}]: Accepted prefixes'
              type: DEPENDENT
              key: 'juniper.mx.bgp.prefix.accepted[jnxBgpM2PrefixInPrefixesAccepted.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of prefixes for a peer that are installed in the Adj-Ribs-In and are eligible to become active in the Loc-Rib.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.6.2.1.8.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.prefix.counters.snmp.walk
              tags:
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: 5a4790cb345945518b5fb72ad3d1e600
              name: 'BGP [{#BGPM2_AFI_SAFI}]: Active prefixes'
              type: DEPENDENT
              key: 'juniper.mx.bgp.prefix.active[jnxBgpM2PrefixInPrefixesActive.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of prefixes for a peer that are installed in the Adj-Ribs-In and are the active route in the Loc-Rib.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.6.2.1.11.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.prefix.counters.snmp.walk
              tags:
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: d6ed9f3cf0c046e692fe22a1bbb42637
              name: 'BGP [{#BGPM2_AFI_SAFI}]: Advertised prefixes'
              type: DEPENDENT
              key: 'juniper.mx.bgp.prefix.advertised[jnxBgpM2PrefixOutPrefixes.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of prefixes for a peer that are installed in the peer''s Adj-Ribs-Out.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.6.2.1.10.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.prefix.counters.snmp.walk
              tags:
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: 573ceb98192c403ab93a7e4df07f982d
              name: 'BGP [{#BGPM2_AFI_SAFI}]: Received prefixes'
              type: DEPENDENT
              key: 'juniper.mx.bgp.prefix.received[jnxBgpM2PrefixInPrefixes.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of prefixes received from a peer and stored in the Adj-Ribs-In for that peer.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.6.2.1.7.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.prefix.counters.snmp.walk
              tags:
                - tag: component
                  value: bgp
                - tag: component
                  value: network
            - uuid: 827208095c444966b85b0ce9e5cf16da
              name: 'BGP [{#BGPM2_AFI_SAFI}]: Rejected prefixes'
              type: DEPENDENT
              key: 'juniper.mx.bgp.prefix.rejected[jnxBgpM2PrefixInPrefixesRejected.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of prefixes for a peer that are installed in the Adj-Ribs-In and are NOT eligible to become active in the Loc-Rib.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.1.1.2.6.2.1.9.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.bgp.prefix.counters.snmp.walk
              tags:
                - tag: component
                  value: bgp
                - tag: component
                  value: network
          master_item:
            key: juniper.mx.bgp.prefix.counters.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#BGPM2_PREFIX_AFI}'
                - 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.1
                - '0'
                - '{#BGPM2_PREFIX_SAFI}'
                - 1.3.6.1.4.1.2636.5.1.1.2.6.2.1.2
                - '0'
              error_handler: CUSTOM_ERROR
              error_handler_params: 'BGP instance is not running'
            - type: JAVASCRIPT
              parameters:
                - |
                  var inArray = JSON.parse(value);
                  var afiSafiMap = {
                  	'1.1': 'IPv4 unicast',
                  	'1.2': 'IPv4 multicast',
                  	'2.1': 'IPv6 unicast',
                  	'2.2': 'IPv6 multicast',
                  	'25.65': 'BGP-VPLS/BGP-L2VPN',
                  	'1.128': 'L3VPN IPv4 unicast',
                  	'1.129': 'L3VPN IPv4 multicast',
                  	'2.128': 'L3VPN IPv6 unicast',
                  	'2.129': 'L3VPN IPv6 multicast',
                  	'1.132': 'RT-Constrain',
                  	'1.133': 'Flow-spec',
                  	'1.134': 'Flow-spec',
                  	'3.128': 'CLNS VPN',
                  	'1.5': 'NG-MVPN IPv4',
                  	'2.5': 'NG-MVPN IPv6',
                  	'1.66': 'MDT-SAFI',
                  	'1.4': 'labeled IPv4',
                  	'2.4': 'labeled IPv6 (6PE)'
                  };
                  
                  var outArr = [];
                  inArray.forEach(function (item) {
                  	item['{#BGPM2_AFI_SAFI}'] = afiSafiMap[item['{#SNMPINDEX}'].slice(2)] === undefined ? "" : afiSafiMap[item['{#SNMPINDEX}'].slice(2)];
                  	outArr.push(item)
                  });
                  return JSON.stringify(outArr);
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 68ad7154365b434f90e6461d4352fbfb
          name: 'CPU and Memory discovery'
          type: DEPENDENT
          key: juniper.mx.cpu.mem.discovery
          filter:
            conditions:
              - macro: '{#SNMPVALUE}'
                value: 'FPC.*'
              - macro: '{#SNMPVALUE}'
                value: 'Routing Engine.*'
          description: |
            Scanning `JUNIPER-MIB::jnxOperatingTable` for CPU and Memory.
            http://kb.juniper.net/InfoCenter/index?page=content&id=KB17526&actp=search. Filter limits results to Routing Engines.
          item_prototypes:
            - uuid: fc9c467c5aef496286063eb22150399b
              name: 'System [{#SNMPVALUE}]: CPU utilization'
              type: DEPENDENT
              key: 'juniper.mx.cpu.util[jnxOperatingCPU.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: JUNIPER-MIB
                The CPU utilization, in percent, of this subject. Zero if unavailable or inapplicable.
                Reference: http://kb.juniper.net/library/CUSTOMERSERVICE/GLOBAL_JTAC/BK26199/SRX%20SNMP%20Monitoring%20Guide_v1.1.pdf
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.13.1.8.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.operating.snmp.walk
              tags:
                - tag: component
                  value: cpu
              trigger_prototypes:
                - uuid: 2739dd5737084c40ab83214560b5a750
                  expression: 'min(/Juniper MX by SNMP/juniper.mx.cpu.util[jnxOperatingCPU.{#SNMPINDEX}],5m)>{$JUNIPER.MX.CPU.UTIL.CRIT}'
                  name: 'Juniper MX: System [{#SNMPVALUE}]: High CPU utilization'
                  event_name: 'Juniper MX: System [{#SNMPVALUE}]: High CPU utilization (over {$JUNIPER.MX.CPU.UTIL.CRIT}% for 5m)'
                  opdata: 'Current utilization: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'The CPU utilization is too high. The system might be slow to respond.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: e6809619fd6e468190ec180e482badb7
              name: 'System [{#SNMPVALUE}]: Memory utilization'
              type: DEPENDENT
              key: 'juniper.mx.memory.util[jnxOperatingBuffer.{#SNMPINDEX}]'
              value_type: FLOAT
              units: '%'
              description: |
                MIB: JUNIPER-MIB
                The buffer pool utilization, in percent, of this subject. Zero if unavailable or inapplicable.
                Reference: http://kb.juniper.net/library/CUSTOMERSERVICE/GLOBAL_JTAC/BK26199/SRX%20SNMP%20Monitoring%20Guide_v1.1.pdf
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.13.1.11.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.operating.snmp.walk
              tags:
                - tag: component
                  value: memory
              trigger_prototypes:
                - uuid: b88715979b6e4d56ab60dccdb6ce1089
                  expression: 'min(/Juniper MX by SNMP/juniper.mx.memory.util[jnxOperatingBuffer.{#SNMPINDEX}],5m)>{$JUNIPER.MX.MEMORY.UTIL.MAX}'
                  name: 'Juniper MX: System [{#SNMPVALUE}]: High memory utilization'
                  event_name: 'Juniper MX: System [{#SNMPVALUE}]: High memory utilization (>{$JUNIPER.MX.MEMORY.UTIL.MAX}% for 5m)'
                  opdata: 'Current utilization: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'The system is running out of free memory.'
                  tags:
                    - tag: scope
                      value: capacity
                    - tag: scope
                      value: performance
          graph_prototypes:
            - uuid: 409271fb7c764e94890fdf37dece3135
              name: 'Juniper MX: System [{#SNMPVALUE}]: CPU utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.cpu.util[jnxOperatingCPU.{#SNMPINDEX}]'
            - uuid: fe3ee4ee1f8648de90d1462ba268963a
              name: 'Juniper MX: System [{#SNMPVALUE}]: Memory utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.memory.util[jnxOperatingBuffer.{#SNMPINDEX}]'
          master_item:
            key: juniper.mx.operating.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.4.1.2636.3.1.13.1.5
                - '0'
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 97578fc561dd40ba95a7f8baa331fda4
          name: 'Multi-lane DOM discovery'
          type: DEPENDENT
          key: juniper.mx.dom.lane.discovery
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFALIAS}'
                value: '{$JUNIPER.MX.NET.IF.IFALIAS.MATCHES}'
              - macro: '{#IFALIAS}'
                value: '{$JUNIPER.MX.NET.IF.IFALIAS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFDESCR}'
                value: '{$JUNIPER.MX.NET.IF.IFDESCR.MATCHES}'
              - macro: '{#IFDESCR}'
                value: '{$JUNIPER.MX.NET.IF.IFDESCR.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFNAME}'
                value: '{$JUNIPER.MX.NET.IF.IFNAME.MATCHES}'
              - macro: '{#IFNAME}'
                value: '{$JUNIPER.MX.NET.IF.IFNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#LASERTEMP}'
                value: ^0$
                operator: NOT_MATCHES_REGEX
              - macro: '{#MODULELANECOUNT}'
                operator: EXISTS
              - macro: '{#RXLASER}'
                value: ^0$
                operator: NOT_MATCHES_REGEX
          description: 'Used for information about Digital Optical Monitoring for a Lane of an SFF optical module, as defined in JUNIPER-DOM-MIB.'
          item_prototypes:
            - uuid: 8af21c5d4a5a422da72048b595e4b557
              name: 'SFP [{#IFNAME}][{#IFALIAS}]: Module lane [{#LANEINDEX}] alarms'
              type: DEPENDENT
              key: 'juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]'
              value_type: TEXT
              description: 'This item identifies all the active DOM alarms on a particular Lane of an SFF physical interface.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.60.1.2.1.1.2.{#PORTINDEX}.{#LANEINDEX}'
                    - '0'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      function parseBits(bitString) {
                      	var bitsArray = bitString.split(' ');
                      	var bits = '';
                      	for (var i = 0; i < bitsArray.length; i++) {
                      		var binaryString = parseInt(bitsArray[i], 16).toString(2);
                      
                      		while (binaryString.length < 8) {
                      			binaryString = '0' + binaryString;
                      		}
                      
                      		bits += binaryString;
                      	}
                      
                      	var bitFlags = {
                      		domLaneRxLaserPowerHighAlarm: 0,
                      		domLaneRxLaserPowerLowAlarm: 1,
                      		domLaneTxLaserBiasCurrentHighAlarm: 2,
                      		domLaneTxLaserBiasCurrentLowAlarm: 3,
                      		domLaneTxLaserOutputPowerHighAlarm: 4,
                      		domLaneTxLaserOutputPowerLowAlarm: 5,
                      		domLaneLaserTemperatureHighAlarm: 6,
                      		domLaneLaserTemperatureLowAlarm: 7
                      	};
                      
                      	var result = {};
                      
                      	for (var flag in bitFlags) {
                      		if (bitFlags.hasOwnProperty(flag)) {
                      			var index = bitFlags[flag];
                      			result[flag] = bits[index] === '1';
                      		}
                      	}
                      
                      	return result;
                      }
                      
                      return JSON.stringify(parseBits(value));
              master_item:
                key: juniper.mx.dom.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: dom
                - tag: component
                  value: network
                - tag: sfp
                  value: '{#IFNAME}'
              trigger_prototypes:
                - uuid: 06fa038e24c54f4db6d9ff0394c508b3
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneRxLaserPowerHighAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Rx power high'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Rx laser power high on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Receiver laser power - high alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 51f020c7950d4337b88f0006a8895700
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneRxLaserPowerLowAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Rx power low'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Rx laser power low on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Receiver laser power - low alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 24dc66bf852a444cb8a5e8190d6c585d
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneLaserTemperatureHighAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Temperature High'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Laser temperature high on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Module temperature - high alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 030018ccb02e43af8ff228ca10c6175c
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneLaserTemperatureLowAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Temperature Low'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Laser temperature low on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Module temperature - low alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 67575aa6971e4aa6987d61a3cd890a41
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneTxLaserBiasCurrentHighAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx bias high'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx laser bias current high on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Transmitter laser bias current - high alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 27b9d3d1af0c4c65bcf22e6d71c760af
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneTxLaserBiasCurrentLowAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx bias low'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx laser bias current low on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Transmitter laser bias current - low alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: c64e77302be84ff7bb7e2b4b2e33b6c7
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneTxLaserOutputPowerHighAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx power high'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx laser power high on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Transmitter laser power - high alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: e8ff233746604369b4419ca405990d5b
                  expression: 'jsonpath(last(/Juniper MX by SNMP/juniper.mx.dom.alarms.lane.laser[jnxDomCurrentLaneAlarms.{#SNMPINDEX}.{#LANEINDEX}]),"$.domLaneTxLaserOutputPowerLowAlarm")="true"'
                  name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx power low'
                  event_name: 'Juniper MX: SFP [{#IFNAME}][{#IFALIAS}]: Tx laser power low on [{#LANEINDEX}] lane'
                  opdata: 'Status alarm: "true"'
                  priority: WARNING
                  description: 'Transmitter laser power - low alarm threshold.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: eb00143fd1364120aa02238f60d4c05e
              name: 'SFP [{#IFNAME}][{#IFALIAS}]: Rx optical power lane [{#LANEINDEX}]'
              type: DEPENDENT
              key: 'juniper.mx.dom.rx.lane.laser[jnxDomCurrentLaneRxLaserPower.{#SNMPINDEX}.{#LANEINDEX}]'
              value_type: FLOAT
              units: dbm
              description: 'Receiver laser power on a particular Lane of an SFF physical interface.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.60.1.2.1.1.6.{#PORTINDEX}.{#LANEINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '0.01'
              master_item:
                key: juniper.mx.dom.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: dom
                - tag: component
                  value: network
                - tag: sfp
                  value: '{#IFNAME}'
            - uuid: bc1cda13a6fd4041b30c1ac045927cd9
              name: 'SFP [{#IFNAME}][{#IFALIAS}]: Tx optical power lane [{#LANEINDEX}]'
              type: DEPENDENT
              key: 'juniper.mx.dom.tx.lane.laser[jnxDomCurrentLaneTxLaserOutputPower.{#SNMPINDEX}.{#LANEINDEX}]'
              value_type: FLOAT
              units: dbm
              description: 'Transmitter laser power on a particular Lane of an SFF physical interface.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.60.1.2.1.1.8.{#PORTINDEX}.{#LANEINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '0.01'
              master_item:
                key: juniper.mx.dom.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: dom
                - tag: component
                  value: network
                - tag: sfp
                  value: '{#IFNAME}'
          master_item:
            key: juniper.mx.dom.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#MODULELANECOUNT}'
                - 1.3.6.1.4.1.2636.3.60.1.1.1.1.30
                - '0'
                - '{#LASERTEMP}'
                - 1.3.6.1.4.1.2636.3.60.1.2.1.1.9
                - '0'
                - '{#RXLASER}'
                - 1.3.6.1.4.1.2636.3.60.1.2.1.1.6
                - '0'
                - '{#IFOPERSTATUS}'
                - 1.3.6.1.2.1.2.2.1.8
                - '0'
                - '{#IFADMINSTATUS}'
                - 1.3.6.1.2.1.2.2.1.7
                - '0'
                - '{#IFALIAS}'
                - 1.3.6.1.2.1.31.1.1.1.18
                - '0'
                - '{#IFNAME}'
                - 1.3.6.1.2.1.31.1.1.1.1
                - '0'
                - '{#IFDESCR}'
                - 1.3.6.1.2.1.2.2.1.2
                - '0'
                - '{#IFTYPE}'
                - 1.3.6.1.2.1.2.2.1.3
                - '0'
                - '{#LANEINDEX}'
                - 1.3.6.1.4.1.2636.3.60.1.2.1.1.1
                - '0'
              error_handler: DISCARD_VALUE
            - type: JAVASCRIPT
              parameters:
                - |
                  var inputArray = JSON.parse(value);
                  
                  var transformedArray = inputArray.reduce(function (acc, item) {
                  	var snmpIndex = item["{#SNMPINDEX}"];
                  	var mainIndex = snmpIndex.split('.')[0];
                  
                  	if (item["{#LANEINDEX}"] !== undefined) {
                  		var portData = null;
                  
                  		for (var i = 0; i < inputArray.length; i++) {
                  			if (inputArray[i]["{#SNMPINDEX}"] === mainIndex) {
                  				portData = inputArray[i];
                  				break;
                  			}
                  		}
                  
                  		if (portData) {
                  			acc.push(Object.assign(
                  				{},
                  				item,
                  				{ "{#PORTINDEX}": mainIndex },
                  				portData
                  			));
                  		}
                  	}
                  	return acc;
                  }, []);
                  
                  return JSON.stringify(transformedArray);
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 9ac8c0a8ae384e6898e89a873e54e1b0
          name: 'FAN discovery'
          type: DEPENDENT
          key: juniper.mx.fans.discovery
          description: 'Scanning `JUNIPER-MIB::jnxOperatingTable` for Fans.'
          item_prototypes:
            - uuid: ebd56d08899842779b2695ad3370c95e
              name: 'Sensor [{#SNMPVALUE}]: Fan status'
              type: DEPENDENT
              key: 'juniper.mx.sensor.fan.status[jnxOperatingState.4.{#SNMPINDEX}]'
              trends: '0'
              description: |
                MIB: JUNIPER-MIB
                Current status of the Fan tray.
              valuemap:
                name: 'JUNIPER-MIB::jnxOperatingState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.13.1.6.4.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.operating.snmp.walk
              tags:
                - tag: component
                  value: fan
              trigger_prototypes:
                - uuid: 6c40d7e7701b4615a29b0e4eafb04aff
                  expression: 'count(/Juniper MX by SNMP/juniper.mx.sensor.fan.status[jnxOperatingState.4.{#SNMPINDEX}],#1,"eq","{$JUNIPER.MX.FAN_CRIT_STATUS}")=1'
                  name: 'Juniper MX: Sensor [{#SNMPVALUE}]: Fan is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the Fan unit.'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.operating.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.4.1.2636.3.1.13.1.5.4
                - '0'
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 83627dc5919249198673890c25100b18
          name: 'Network interface discovery'
          type: DEPENDENT
          key: juniper.mx.net.if.discovery
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFADMINSTATUS}'
                value: '{$JUNIPER.MX.NET.IF.IFADMINSTATUS.MATCHES}'
              - macro: '{#IFADMINSTATUS}'
                value: '{$JUNIPER.MX.NET.IF.IFADMINSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFALIAS}'
                value: '{$JUNIPER.MX.NET.IF.IFALIAS.MATCHES}'
              - macro: '{#IFALIAS}'
                value: '{$JUNIPER.MX.NET.IF.IFALIAS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFDESCR}'
                value: '{$JUNIPER.MX.NET.IF.IFDESCR.MATCHES}'
              - macro: '{#IFDESCR}'
                value: '{$JUNIPER.MX.NET.IF.IFDESCR.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFNAME}'
                value: '{$JUNIPER.MX.NET.IF.IFNAME.MATCHES}'
              - macro: '{#IFNAME}'
                value: '{$JUNIPER.MX.NET.IF.IFNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFOPERSTATUS}'
                value: '{$JUNIPER.MX.NET.IF.IFOPERSTATUS.MATCHES}'
              - macro: '{#IFOPERSTATUS}'
                value: '{$JUNIPER.MX.NET.IF.IFOPERSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
              - macro: '{#IFTYPE}'
                value: '{$JUNIPER.MX.NET.IF.IFTYPE.MATCHES}'
              - macro: '{#IFTYPE}'
                value: '{$JUNIPER.MX.NET.IF.IFTYPE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
          description: 'Discovery of interfaces from IF-MIB.'
          item_prototypes:
            - uuid: 1e464a20cc784884b5287a4c0568a70d
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Inbound packets discarded'
              type: DEPENDENT
              key: 'juniper.mx.net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
              description: |
                MIB: IF-MIB
                The number of inbound packets which were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 9300b7ac45464856ae46f8f6294fcb48
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Inbound packets with errors'
              type: DEPENDENT
              key: 'juniper.mx.net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.
                For character-oriented or fixed-length interfaces, the number of inbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: d1f4a2d1ab0b4239a5c515f2afa1599d
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Bits received'
              type: DEPENDENT
              key: 'juniper.mx.net.if.in[ifHCInOctets.{#SNMPINDEX}]'
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets received on the interface, including framing characters. This object is a 64-bit version of `ifInOctets`. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 6ec380888ae745ec953c00ae3272dd85
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Outbound packets discarded'
              type: DEPENDENT
              key: 'juniper.mx.net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
              description: |
                MIB: IF-MIB
                The number of outbound packets which were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: ca31a4568ca64a91acab57c7d4a12171
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Outbound packets with errors'
              type: DEPENDENT
              key: 'juniper.mx.net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of outbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.
                For character-oriented or fixed-length interfaces, the number of outbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 69165e8edad0451f9571eba53d484453
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Bits sent'
              type: DEPENDENT
              key: 'juniper.mx.net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets transmitted out of the interface, including framing characters. This object is a 64-bit version of `ifOutOctets`. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of `ifCounterDiscontinuityTime`.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}'
                    - '0'
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 38d091d8365b44eea6ead60d5b6090e7
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Speed'
              type: DEPENDENT
              key: 'juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}]'
              trends: '0'
              units: bps
              description: |
                MIB: IF-MIB
                An estimate of the interface's current bandwidth in units of 1,000,000 bits per second. If this object reports a value of `n`, then the speed of the interface is somewhere in the range of `n-500,000` to `n+499,999`.
                For interfaces which do not vary in bandwidth or for those where no accurate estimation can be made, this object should contain the nominal bandwidth.
                For a sub-layer which has no concept of bandwidth, this object should be zero.
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1000000'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: f731f0ad12c94b57aa3e819a9a3f8344
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Operational status'
              type: DEPENDENT
              key: 'juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}]'
              trends: '0'
              description: |
                MIB: IF-MIB
                The current operational state of the interface.
                - The `testing(3)` state indicates that no operational packet scan can be passed.
                - If `ifAdminStatus` is `down(2)`, then `ifOperStatus` should be `down(2)`.
                - If `ifAdminStatus` is changed to `up(1)`, then `ifOperStatus` should change to `up(1)` if the interface is ready to transmit and receive network traffic.
                - It should change to `dormant(5)` if the interface is waiting for external actions (such as a serial line waiting for an incoming connection).
                - It should remain in the `down(2)` state if and only if there is a fault that prevents it from going to the `up(1)` state.
                - It should remain in the `notPresent(6)` state if the interface has missing (typically, hardware) components.
              valuemap:
                name: 'IF-MIB::ifOperStatus'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
              trigger_prototypes:
                - uuid: e6e97882d81242019bbb072a4b3cd9aa
                  expression: '{$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=1 and last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=0'
                  name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Link down'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    This trigger expression works as follows:
                    1. It can be triggered if the operations status is down.
                    2. `{$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=1` - a user can redefine the context macro to "0", marking this interface as not important. No new trigger will be fired if this interface is down.
                    3. `last(/TEMPLATE_NAME/METRIC,#1)<>last(/TEMPLATE_NAME/METRIC,#2)` - the trigger fires only if the operational status was up to (1) sometime before (so, does not fire for "eternal off" interfaces.)
                    
                    WARNING: if closed manually - it will not fire again on the next poll, because of `.diff`.
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: availability
            - uuid: a1931245d15a4f0ca792ab62d149ba2c
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Interface type'
              type: DEPENDENT
              key: 'juniper.mx.net.if.type[ifType.{#SNMPINDEX}]'
              trends: '0'
              description: |
                MIB: IF-MIB
                The type of interface.
                Additional values for `ifType` are assigned by the Internet Assigned Numbers Authority (IANA), through updating the syntax of the IANAifType textual convention.
              valuemap:
                name: 'IF-MIB::ifType'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.2.2.1.3.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              master_item:
                key: juniper.mx.net.if.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
          trigger_prototypes:
            - uuid: 140de6180ae64aeab26d898518392c54
              expression: |
                change(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])<0 and last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
                and (
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=6 or
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=7 or
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=11 or
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=62 or
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=69 or
                last(/Juniper MX by SNMP/juniper.mx.net.if.type[ifType.{#SNMPINDEX}])=117
                )
                and
                (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])<>2)
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                (change(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0 and last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}],#2)>0) or
                (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])=2)
              name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Ethernet has changed to lower speed than it was before'
              opdata: 'Current reported speed: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              dependencies:
                - name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Link down'
                  expression: '{$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=1 and last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=0'
              tags:
                - tag: scope
                  value: performance
            - uuid: 0a9b64496e794daaa3fd126a0f821fec
              expression: |
                (avg(/Juniper MX by SNMP/juniper.mx.net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)>({$JUNIPER.MX.IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}]) or
                avg(/Juniper MX by SNMP/juniper.mx.net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)>({$JUNIPER.MX.IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])) and
                last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                avg(/Juniper MX by SNMP/juniper.mx.net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)<(({$JUNIPER.MX.IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}]) and
                avg(/Juniper MX by SNMP/juniper.mx.net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)<(({$JUNIPER.MX.IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/Juniper MX by SNMP/juniper.mx.net.if.speed[ifHighSpeed.{#SNMPINDEX}])
              name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: High bandwidth usage'
              event_name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: High bandwidth usage (>{$JUNIPER.MX.IF.UTIL.MAX:"{#IFNAME}"}%)'
              opdata: 'In: {ITEM.LASTVALUE1}, out: {ITEM.LASTVALUE3}, speed: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'The utilization of the network interface is close to its estimated maximum bandwidth.'
              manual_close: 'YES'
              dependencies:
                - name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Link down'
                  expression: '{$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=1 and last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=0'
              tags:
                - tag: scope
                  value: performance
            - uuid: 643b17bf71574d77bb06240af9c6fbc5
              expression: |
                min(/Juniper MX by SNMP/juniper.mx.net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)>{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"}
                or min(/Juniper MX by SNMP/juniper.mx.net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)>{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"}
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                max(/Juniper MX by SNMP/juniper.mx.net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)<{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"}*0.8
                and max(/Juniper MX by SNMP/juniper.mx.net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)<{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"}*0.8
              name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: High error rate'
              event_name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: High error rate (>{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"} for 5m)'
              opdata: 'errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'It recovers when it is below 80% of the `{$JUNIPER.MX.IF.ERRORS.WARN:"{#IFNAME}"}` threshold.'
              manual_close: 'YES'
              dependencies:
                - name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Link down'
                  expression: '{$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=1 and last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Juniper MX by SNMP/juniper.mx.net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$JUNIPER.MX.IFCONTROL:"{#IFNAME}"}=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
          graph_prototypes:
            - uuid: 4200eaa606f94c35a4a9ab787c752761
              name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: Network traffic'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.in[ifHCInOctets.{#SNMPINDEX}]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: F63100
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
                - sortorder: '2'
                  color: 00611C
                  yaxisside: RIGHT
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
                - sortorder: '3'
                  color: F7941D
                  yaxisside: RIGHT
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
                - sortorder: '4'
                  color: FC6EA3
                  yaxisside: RIGHT
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
                - sortorder: '5'
                  color: 6C59DC
                  yaxisside: RIGHT
                  item:
                    host: 'Juniper MX by SNMP'
                    key: 'juniper.mx.net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
          master_item:
            key: juniper.mx.net.if.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#IFOPERSTATUS}'
                - 1.3.6.1.2.1.2.2.1.8
                - '0'
                - '{#IFADMINSTATUS}'
                - 1.3.6.1.2.1.2.2.1.7
                - '0'
                - '{#IFALIAS}'
                - 1.3.6.1.2.1.31.1.1.1.18
                - '0'
                - '{#IFNAME}'
                - 1.3.6.1.2.1.31.1.1.1.1
                - '0'
                - '{#IFDESCR}'
                - 1.3.6.1.2.1.2.2.1.2
                - '0'
                - '{#IFTYPE}'
                - 1.3.6.1.2.1.2.2.1.3
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 3dcf819694834d29aae6a35c4aaa1c18
          name: 'EtherLike-MIB discovery'
          type: DEPENDENT
          key: juniper.mx.net.if.duplex.discovery
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFOPERSTATUS}'
                value: '1'
              - macro: '{#SNMPVALUE}'
                value: (2|3)
              - macro: '{#SNMPVALUE}'
                operator: EXISTS
          description: 'Discovery of interfaces from IF-MIB and EtherLike-MIB. Interfaces with the `up(1)` operational status are discovered.'
          item_prototypes:
            - uuid: 03c1a0c21ef04f428af38ad963a7c5ec
              name: 'Interface [{#IFNAME}][{#IFALIAS}]: Duplex status'
              type: DEPENDENT
              key: 'juniper.mx.net.if.duplex[dot3StatsDuplexStatus.{#SNMPINDEX}]'
              description: |
                MIB: EtherLike-MIB
                The current mode of operation of the MAC entity. `unknown` indicates that the current duplex mode could not be determined.
                Management control of the duplex mode is accomplished through the MAU MIB. When an interface does not support autonegotiation or when autonegotiation is not enabled, the duplex mode is controlled using `ifMauDefaultType`. When autonegotiation is supported and enabled, duplex mode is controlled using `ifMauAutoNegAdvertisedBits`. In either case, the currently operating duplex mode in reflected both in this object and in `ifMauType`.
                Note that this object provides redundant information with `ifMauType`. Normally, redundant objects are discouraged. However, in this instance, it allows a management application to determine the duplex status of an interface without having to know every possible value of `ifMauType`. This was felt to be sufficiently valuable to justify the redundancy.
                Reference: [IEEE 802.3 Std.], 30.3.1.1.32,aDuplexStatus.
              valuemap:
                name: 'EtherLike-MIB::dot3StatsDuplexStatus'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.10.7.2.1.19.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.net.if.duplex.snmp.walk
              tags:
                - tag: alias
                  value: '{#IFALIAS}'
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
              trigger_prototypes:
                - uuid: 0e37a15e7be949d9a2706b298c4d4182
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.net.if.duplex[dot3StatsDuplexStatus.{#SNMPINDEX}])=2'
                  name: 'Juniper MX: Interface [{#IFNAME}][{#IFALIAS}]: In half-duplex mode'
                  priority: WARNING
                  description: 'Please check autonegotiation settings and cabling.'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.net.if.duplex.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.2.1.10.7.2.1.19
                - '0'
                - '{#IFOPERSTATUS}'
                - 1.3.6.1.2.1.2.2.1.8
                - '0'
                - '{#IFALIAS}'
                - 1.3.6.1.2.1.31.1.1.1.18
                - '0'
                - '{#IFNAME}'
                - 1.3.6.1.2.1.31.1.1.1.1
                - '0'
                - '{#IFDESCR}'
                - 1.3.6.1.2.1.2.2.1.2
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 9e66d89fdca04840b28d11d80de100ad
          name: 'OSPF Neighbor discovery'
          type: DEPENDENT
          key: juniper.mx.ospf.neighbor.discovery
          description: 'Scanning `OSPF-MIB::ospfNbrTable` for OSPF Neighbors.'
          item_prototypes:
            - uuid: d8e5d85898294f2cbfb97e59458fdac5
              name: 'OSPF Neighbor [{#OSPF_IP_ADDR}]: Events'
              type: DEPENDENT
              key: 'juniper.mx.ospf.events[ospfNbrEvents.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of times this neighbor relationship has changed state, or an error has occurred.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.14.10.1.7.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospf.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPF_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospf
              trigger_prototypes:
                - uuid: 604dcfd4cee146aaa1c74bea48aec3fd
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospf.events[ospfNbrEvents.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.ospf.events[ospfNbrEvents.{#SNMPINDEX}],#2)'
                  name: 'Juniper MX: OSPF Neighbor [{#OSPF_IP_ADDR}]: Number of relationship has changed'
                  opdata: 'Number of relationship changes: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'The number of times the [{#OSPF_IP_ADDR}] neighbor relationship has changed.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: 9d4b254d98a14c3ca3a34c7a5ccdc4c2
              name: 'OSPF Neighbor [{#OSPF_IP_ADDR}]: Hello suppressed'
              type: DEPENDENT
              key: 'juniper.mx.ospf.hello.suppressed[ospfNbrHelloSuppressed.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'Indicates whether Hellos are being suppressed to the neighbor.'
              valuemap:
                name: 'OSPF-MIB::ospfNbrHelloSuppressed'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.14.10.1.11.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospf.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPF_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospf
            - uuid: 78726e19b6f34285868684ee2b6bfb84
              name: 'OSPF Neighbor [{#OSPF_IP_ADDR}]: Router Id'
              type: DEPENDENT
              key: 'juniper.mx.ospf.rtr.id[ospfNbrRtrId.{#SNMPINDEX}]'
              value_type: CHAR
              description: 'A 32-bit integer (represented as a type `IpAddress`) uniquely identifying the neighboring router in the Autonomous System.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.14.10.1.3.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospf.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPF_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospf
            - uuid: a09f5412c1854cb28ac393e0b8568802
              name: 'OSPF Neighbor [{#OSPF_IP_ADDR}]: State'
              type: DEPENDENT
              key: 'juniper.mx.ospf.state[ospfNbrState.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The state of the relationship with this neighbor.'
              valuemap:
                name: 'OSPF-MIB::ospfNbrState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.2.1.14.10.1.6.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospf.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPF_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospf
              trigger_prototypes:
                - uuid: 72fa4c432ac64c16a2eb624750813ff6
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospf.state[ospfNbrState.{#SNMPINDEX}]) = 1'
                  name: 'Juniper MX: OSPF Neighbor [{#OSPF_IP_ADDR}]: State down'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'OSPF neighbor [{#OSPF_IP_ADDR}] in operational state `down`.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: 1b9b5f7074bd4321bfa000d5dfc8d487
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospf.state[ospfNbrState.{#SNMPINDEX}]) = 3'
                  name: 'Juniper MX: OSPF Neighbor [{#OSPF_IP_ADDR}]: State init'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'OSPF neighbor [{#OSPF_IP_ADDR}] in operational state `init`.'
                  tags:
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.ospf.nbr.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#OSPF_IP_ADDR}'
                - 1.3.6.1.2.1.14.10.1.1
                - '0'
              error_handler: CUSTOM_ERROR
              error_handler_params: 'OSPF instance is not running'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 66a0878f65f6420b82a4249a3f7956b0
          name: 'OSPFv3 Neighbor discovery'
          type: DEPENDENT
          key: juniper.mx.ospfv3.neighbor.discovery
          description: 'Scanning `OSPFV3-MIB-JUNIPER::jnxOspfv3NbrTable` for OSPFv3 Neighbors.'
          item_prototypes:
            - uuid: f4c944eaeafb4b3480fc5c5d9d089842
              name: 'OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: Events'
              type: DEPENDENT
              key: 'juniper.mx.ospfv3.events[jnxOspfv3NbrEvents.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The number of times the [{#OSPFV3_IP_ADDR}] neighbor relationship has changed state, or an error has occurred.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.4.1.1.9.1.9.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospfv3.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPFV3_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospfv3
              trigger_prototypes:
                - uuid: 25b9d8bd021646ecb3f0b6293b8c01b3
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospfv3.events[jnxOspfv3NbrEvents.{#SNMPINDEX}],#1)<>last(/Juniper MX by SNMP/juniper.mx.ospfv3.events[jnxOspfv3NbrEvents.{#SNMPINDEX}],#2)'
                  name: 'Juniper MX: OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: relationship has changed'
                  opdata: 'Number of relationship changes: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'The number of times the [{#OSPFV3_IP_ADDR}] neighbor relationship has changed.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: b64ebde2fd354302acc3d087aab5a155
              name: 'OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: Hello suppressed'
              type: DEPENDENT
              key: 'juniper.mx.ospfv3.hello.suppressed[jnxOspfv3NbrHelloSuppressed.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'Indicates whether Hellos are being suppressed to the neighbor.'
              valuemap:
                name: 'OSPF-MIB::ospfNbrHelloSuppressed'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.4.1.1.9.1.11.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospfv3.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPFV3_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospfv3
            - uuid: baed51479df94547a2a089543ed3928c
              name: 'OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: Priority'
              type: DEPENDENT
              key: 'juniper.mx.ospfv3.priority[jnxOspfv3NbrPriority.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The priority of this neighbor in the designated router election algorithm. The value `0` signifies that the neighbor is not eligible to become the designated router on this particular network.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.4.1.1.9.1.7.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospfv3.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPFV3_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospfv3
            - uuid: 4adfe63f7b5042d8bd312dd8285c17e5
              name: 'OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: State'
              type: DEPENDENT
              key: 'juniper.mx.ospfv3.state[jnxOspfv3NbrState.{#SNMPINDEX}]'
              value_type: FLOAT
              description: 'The state of the relationship with this neighbor.'
              valuemap:
                name: 'OSPF-MIB::ospfNbrState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.5.4.1.1.9.1.8.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: juniper.mx.ospfv3.nbr.snmp.walk
              tags:
                - tag: address
                  value: '{#OSPFV3_IP_ADDR}'
                - tag: component
                  value: network
                - tag: component
                  value: ospfv3
              trigger_prototypes:
                - uuid: acfa268322b044cdbdeef1d4c97b8c15
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospfv3.state[jnxOspfv3NbrState.{#SNMPINDEX}]) = 1'
                  name: 'Juniper MX: OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: State down'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'OSPF neighbor [{#OSPFV3_IP_ADDR}] in operational state `down`.'
                  tags:
                    - tag: scope
                      value: performance
                - uuid: abbab005937b4c488205b70860ffc5a6
                  expression: 'last(/Juniper MX by SNMP/juniper.mx.ospfv3.state[jnxOspfv3NbrState.{#SNMPINDEX}]) = 3'
                  name: 'Juniper MX: OSPFv3 Neighbor [{#OSPFV3_IP_ADDR}]: State init'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'OSPFv3 neighbor [{#OSPFV3_IP_ADDR}] in operational state `init`.'
                  tags:
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.ospfv3.nbr.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#OSPFV3_IP_ADDR}'
                - 1.3.6.1.4.1.2636.5.4.1.1.9.1.5
                - '0'
              error_handler: CUSTOM_ERROR
              error_handler_params: 'OSPF instance is not running'
            - type: JAVASCRIPT
              parameters:
                - |
                  var ospf = JSON.parse(value);
                  
                  ospf.forEach(function (item, index, array) {
                  	var ip = item["{#OSPFV3_IP_ADDR}"];
                  	var parts = ip.trim().split(' ');
                  
                  	if (parts.length === 4) {
                  		for (var i = 0; i < parts.length; ++i) {
                  			parts[i] = parseInt(parts[i], 16);
                  		}
                  		ip = parts.join('.');
                  	}
                  	else if (parts.length == 16) {
                  		var ipSegments = [];
                  		for (var i = 0; i < parts.length; i += 4) {
                  			var ipv6 = parts.slice(i, i + 4).join('');
                  			ipv6 = parseInt(ipv6, 16).toString(16);
                  			ipSegments.push(ipv6 || '0');
                  		}
                  		ip = ipSegments.join(':').toLowerCase();
                  
                  		var maxZeros = 0, currZeros = 0, startIdx = -1, maxStartIdx = -1;
                  		for (i = 0; i < ipSegments.length; i++) {
                  			if (ipSegments[i] === '0') {
                  				if (currZeros === 0) startIdx = i;
                  				currZeros++;
                  			} else {
                  				if (currZeros > maxZeros) {
                  					maxZeros = currZeros;
                  					maxStartIdx = startIdx;
                  				}
                  				currZeros = 0;
                  			}
                  		}
                  		if (currZeros > maxZeros) {
                  			maxZeros = currZeros;
                  			maxStartIdx = startIdx;
                  		}
                  		if (maxZeros > 1) {
                  			ipSegments.splice(maxStartIdx, maxZeros, '');
                  			ip = ipSegments.join(':').replace(/(^:|:$)/, '');
                  		}
                  	}
                  
                  	array[index]["{#OSPFV3_IP_ADDR}"] = ip;
                  });
                  
                  return JSON.stringify(ospf);
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 25dab3bda75b497eb91101d2a687b3d2
          name: 'PSU discovery'
          type: DEPENDENT
          key: juniper.mx.psu.discovery
          description: 'Scanning `JUNIPER-MIB::jnxOperatingTable` for Power Supplies.'
          item_prototypes:
            - uuid: 3526d4374e8d422ab87b92dca0159a8e
              name: 'Sensor [{#SNMPVALUE}]: Power supply status'
              type: DEPENDENT
              key: 'juniper.mx.sensor.psu.status["{#SNMPINDEX}"]'
              trends: '0'
              description: |
                MIB: JUNIPER-MIB
                If are using DC power supplies, there is a known issue on PR 1064039 where the fans do not detect the temperature correctly and fail to cool the power supply causing shutdown to occur.
                This is fixed in Junos 13.3R7 https://forums.juniper.net/t5/Routing/PEM-0-not-OK-MX104/m-p/289644#M14122
              valuemap:
                name: 'JUNIPER-MIB::jnxOperatingState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.13.1.6.2.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.operating.snmp.walk
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 2e68ce04be164ea5a728639ad0dadd35
                  expression: 'count(/Juniper MX by SNMP/juniper.mx.sensor.psu.status["{#SNMPINDEX}"],#1,"eq","{$JUNIPER.MX.PSU_CRIT_STATUS}")=1'
                  name: 'Juniper MX: Sensor [{#SNMPVALUE}]: Power supply is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the power supply unit for errors.'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.operating.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.4.1.2636.3.1.13.1.5.2
                - '0'
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: f63fb6e235914131baff69bf7778e082
          name: 'Redundancy discovery'
          type: DEPENDENT
          key: juniper.mx.redundancy.discovery
          description: 'Scanning `JUNIPER-MIB::jnxRedundancyTable`.'
          item_prototypes:
            - uuid: 6fe1d6a3d81240ecb1d9b0d7123b653e
              name: 'Redundancy [{#SNMPVALUE}][{#CHASSISDESCR}]: Current running state'
              type: DEPENDENT
              key: 'juniper.mx.redundancy.state["{#SNMPINDEX}"]'
              trends: '0'
              description: |
                MIB: JUNIPER-MIB
                The current running state for the `Redundancy [{#SNMPVALUE}][{#CHASSISDESCR}]` subject.
              valuemap:
                name: 'JUNIPER-MIB::jnxRedundancyState'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.14.1.7.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.redundancy.table.snmp.walk
              tags:
                - tag: component
                  value: redundancy
            - uuid: da3134d4cb084090a7c2c7df9d99c6f8
              name: 'Redundancy [{#SNMPVALUE}][{#CHASSISDESCR}]: Reason of the last switchover'
              type: DEPENDENT
              key: 'juniper.mx.redundancy.switchover.reason["{#SNMPINDEX}"]'
              trends: '0'
              description: |
                MIB: JUNIPER-MIB
                The reason of the last switchover for the `Redundancy [{#SNMPVALUE}][{#CHASSISDESCR}]` subject.
              valuemap:
                name: 'JUNIPER-MIB::jnxRedundancySwitchoverReason'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.14.1.10.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.redundancy.table.snmp.walk
              tags:
                - tag: component
                  value: redundancy
          master_item:
            key: juniper.mx.redundancy.table.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.4.1.2636.3.1.14.1.5
                - '0'
                - '{#CHASSISDESCR}'
                - 1.3.6.1.4.1.2636.3.1.14.1.16
                - '0'
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: de9c2e302e6445d0b78235b9cc29444d
          name: 'Temperature discovery'
          type: DEPENDENT
          key: juniper.mx.temperature.discovery
          filter:
            conditions:
              - macro: '{#SNMPVALUE}'
                value: '[^0]+'
          description: 'Scanning `JUNIPER-MIB::jnxOperatingTable` for Temperature.'
          item_prototypes:
            - uuid: e01b55a38ca6441ca87672285ea896d5
              name: 'Sensor [{#SENSOR_INFO}]: Temperature'
              type: DEPENDENT
              key: 'sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}]'
              value_type: FLOAT
              units: C
              description: |
                MIB: JUNIPER-MIB
                The temperature in Celsius of [{#SENSOR_INFO}].
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.2636.3.1.13.1.7.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 3m
              master_item:
                key: juniper.mx.operating.snmp.walk
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: 8ae058e6a8044f52b2f36159a089b5f1
                  expression: 'avg(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)>{$JUNIPER.MX.TEMP_CRIT:"{#SENSOR_INFO}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)<{$JUNIPER.MX.TEMP_CRIT:"{#SENSOR_INFO}"}-3'
                  name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is above critical threshold'
                  event_name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is above critical threshold: >{$JUNIPER.MX.TEMP_CRIT:"Juniper MX: Sensor [{#SENSOR_INFO}]"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'This trigger uses temperature sensor values as well as the temperature sensor status if available.'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: b48e691a3db64b9481c2b23b8f349dc3
                  expression: 'avg(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)>{$JUNIPER.MX.TEMP_WARN:"{#SENSOR_INFO}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)<{$JUNIPER.MX.TEMP_WARN:"{#SENSOR_INFO}"}-3'
                  name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is above warning threshold'
                  event_name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is above warning threshold: >{$JUNIPER.MX.TEMP_WARN:"Juniper MX: Sensor [{#SENSOR_INFO}]"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'This trigger uses temperature sensor values as well as the temperature sensor status if available.'
                  dependencies:
                    - name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is above critical threshold'
                      expression: 'avg(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)>{$JUNIPER.MX.TEMP_CRIT:"{#SENSOR_INFO}"}'
                      recovery_expression: 'max(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)<{$JUNIPER.MX.TEMP_CRIT:"{#SENSOR_INFO}"}-3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: eb9e6a9987584dedbae36d636569c03f
                  expression: 'avg(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)<{$JUNIPER.MX.TEMP_CRIT_LOW:"{#SENSOR_INFO}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Juniper MX by SNMP/sensor.temp.value[jnxOperatingTemp.{#SNMPINDEX}],5m)>{$JUNIPER.MX.TEMP_CRIT_LOW:"{#SENSOR_INFO}"}+3'
                  name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is too low'
                  event_name: 'Juniper MX: Sensor [{#SENSOR_INFO}]: Temperature is too low: <{$JUNIPER.MX.TEMP_CRIT_LOW:"Juniper MX: Sensor [{#SENSOR_INFO}]"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'This trigger uses temperature sensor values as well as the temperature sensor status if available.'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: juniper.mx.operating.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPVALUE}'
                - 1.3.6.1.4.1.2636.3.1.13.1.7
                - '0'
                - '{#SENSOR_INFO}'
                - 1.3.6.1.4.1.2636.3.1.13.1.5
                - '0'
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
      tags:
        - tag: class
          value: network
        - tag: target
          value: juniper
        - tag: target
          value: mx
      macros:
        - macro: '{$JUNIPER.MX.CPU.UTIL.CRIT}'
          value: '90'
          description: 'Threshold of CPU utilization for trigger in %. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '24'
            section_name: Thresholds
            label: 'CPU utilization critical'
            description: 'Threshold of CPU utilization for trigger in %. Can be used with interface name as context. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.FAN_CRIT_STATUS}'
          value: '6'
          description: 'Threshold of status sensor for trigger. All statuses defined in valuemap `JUNIPER-MIB::jnxOperatingState`.'
          config:
            type: TEXT
            priority: '21'
            section_name: Thresholds
            label: 'Fan critical status'
            description: 'Threshold of status sensor for trigger. All statuses defined in valuemap `JUNIPER-MIB::jnxOperatingState`.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.ICMP_LOSS_WARN}'
          value: '20'
          description: 'Warning threshold of ICMP packet loss in %.'
          config:
            type: TEXT
            priority: '26'
            section_name: Thresholds
            label: 'ICMP losses warning'
            description: 'Warning threshold of ICMP packet loss in %. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
          description: 'Warning threshold of the average ICMP response time in seconds.'
          config:
            type: TEXT
            priority: '27'
            section_name: Thresholds
            label: 'ICMP response time warning'
            description: 'Warning threshold of the average ICMP response time in seconds.'
        - macro: '{$JUNIPER.MX.IF.ERRORS.WARN}'
          value: '2'
          description: 'Warning threshold of error packet rate. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '1'
            section_name: Thresholds
            label: 'Warning threshold for error packet rate'
            description: 'Warning threshold of error packet rate. Can be used with interface name as context.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.IF.UTIL.MAX}'
          value: '90'
          description: 'Used as a threshold in the interface utilization trigger.'
          config:
            type: TEXT
            priority: '2'
            section_name: Thresholds
            label: 'Interface utilization threshold'
            description: 'Used as a threshold in the interface utilization trigger. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.IFCONTROL}'
          value: '1'
          description: 'Link status trigger will be fired only for interfaces where the context macro equals "1".'
          config:
            type: TEXT
            priority: '3'
            section_name: Other
            label: 'Link status trigger context flag'
            description: 'Link status trigger will be fired only for interfaces where the context macro equals "1".'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.MEMORY.UTIL.MAX}'
          value: '90'
          description: 'Threshold of memory utilization for trigger in %. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '23'
            section_name: Thresholds
            label: 'Memory utilization maximum'
            description: 'Threshold of memory utilization for trigger in %. Can be used with interface name as context. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.NET.IF.IFADMINSTATUS.MATCHES}'
          value: '^.*'
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '8'
            section_name: Filters
            label: 'Network interface admin status filter (include)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFADMINSTATUS.NOT_MATCHES}'
          value: ^2$
          description: 'Ignores `down(2)` administrative status'
          config:
            type: TEXT
            priority: '9'
            section_name: Filters
            label: 'Network interface admin status filter (exclude)'
            description: 'Ignores `down(2)` administrative status'
        - macro: '{$JUNIPER.MX.NET.IF.IFALIAS.MATCHES}'
          value: '.*'
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '12'
            section_name: Filters
            label: 'Network interface alias filter (include)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFALIAS.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '13'
            section_name: Filters
            label: 'Network interface alias filter (exclude)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFDESCR.MATCHES}'
          value: '.*'
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '10'
            section_name: Filters
            label: 'Network interface description filter (include)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFDESCR.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '11'
            section_name: Filters
            label: 'Network interface description filter (exclude)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFNAME.MATCHES}'
          value: '^.*$'
          description: 'Used for network interface discovery. Can be overridden on the host or linked template level.'
          config:
            type: TEXT
            priority: '4'
            section_name: Filters
            label: 'Network interface name filter (include)'
            description: 'Used for network interface discovery. Can be overridden on the host or linked template level.'
        - macro: '{$JUNIPER.MX.NET.IF.IFNAME.NOT_MATCHES}'
          value: '(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})'
          description: 'Filters out loopbacks, nulls, docker `veth` links, and `docker0 bridge` by default.'
          config:
            type: TEXT
            priority: '5'
            section_name: Filters
            label: 'Network interface name filter (exclude)'
            description: 'Filters out loopbacks, nulls, docker `veth` links, and `docker0 bridge` by default.'
        - macro: '{$JUNIPER.MX.NET.IF.IFOPERSTATUS.MATCHES}'
          value: '^.*$'
          description: 'Used for network interface discovery. Can be overridden on the host or linked template level.'
          config:
            type: TEXT
            priority: '6'
            section_name: Filters
            label: 'Network interface operational status filter (include)'
            description: 'Used for network interface discovery. Can be overridden on the host or linked template level.'
        - macro: '{$JUNIPER.MX.NET.IF.IFOPERSTATUS.NOT_MATCHES}'
          value: ^6$
          description: 'Ignores `notPresent(6)`'
          config:
            type: TEXT
            priority: '7'
            section_name: Filters
            label: 'Network interface operational status filter (exclude)'
            description: 'Ignores `notPresent(6)`'
        - macro: '{$JUNIPER.MX.NET.IF.IFTYPE.MATCHES}'
          value: '.*'
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '14'
            section_name: Filters
            label: 'Network interface type filter (include)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.NET.IF.IFTYPE.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Used in network interface discovery rule filters.'
          config:
            type: TEXT
            priority: '15'
            section_name: Filters
            label: 'Network interface type filter (exclude)'
            description: 'Used in network interface discovery rule filters.'
        - macro: '{$JUNIPER.MX.PSU_CRIT_STATUS}'
          value: '6'
          description: 'Threshold of status sensor for trigger. All statuses defined in valuemap `JUNIPER-MIB::jnxOperatingState`.'
          config:
            type: TEXT
            priority: '22'
            section_name: Thresholds
            label: 'PSU critical status'
            description: 'Threshold of status sensor for trigger. All statuses defined in valuemap `JUNIPER-MIB::jnxOperatingState`.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.SNMP.TIMEOUT}'
          value: 5m
          description: 'Time interval for the SNMP availability trigger.'
          config:
            type: TEXT
            priority: '25'
            section_name: Other
            label: 'SNMP timeout'
            description: 'Time interval for the SNMP availability trigger.'
        - macro: '{$JUNIPER.MX.TEMP_CRIT}'
          value: '60'
          description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '16'
            section_name: Thresholds
            label: 'Critical temperature (default)'
            description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.TEMP_CRIT:"Routing Engine"}'
          value: '80'
          description: 'Threshold of temperature sensor for trigger. Used for Routing Engine.'
          config:
            type: TEXT
            priority: '19'
            section_name: Thresholds
            label: 'Critical temperature (Routing Engine)'
            description: 'Threshold of temperature sensor for trigger. Used for Routing Engine.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.TEMP_CRIT_LOW}'
          value: '5'
          description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '17'
            section_name: Thresholds
            label: 'Critical low temperature (default)'
            description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.TEMP_WARN}'
          value: '50'
          description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
          config:
            type: TEXT
            priority: '18'
            section_name: Thresholds
            label: 'Warning temperature (default)'
            description: 'Threshold of temperature sensor for trigger. Can be used with interface name as context.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$JUNIPER.MX.TEMP_WARN:"Routing Engine"}'
          value: '70'
          description: 'Threshold of temperature sensor for trigger. Used for Routing Engine.'
          config:
            type: TEXT
            priority: '20'
            section_name: Thresholds
            label: 'Warning temperature (Routing Engine)'
            description: 'Threshold of temperature sensor for trigger. Used for Routing Engine.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
      dashboards:
        - uuid: 6131b952fe8f42e7b65a8a8538d86016
          name: 'Juniper MX: General'
          pages:
            - name: 'Juniper MX: Overview'
              widgets:
                - type: svggraph
                  name: 'Juniper MX: Memory utilization'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 3ea900
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Memory utilization'
                    - type: STRING
                      name: lefty_max
                      value: '100'
                    - type: STRING
                      name: lefty_min
                      value: '0'
                    - type: INTEGER
                      name: legend_aggregation
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '4'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: CCDBA
                    - type: INTEGER
                      name: righty
                      value: '0'
                    - type: INTEGER
                      name: simple_triggers
                      value: '1'
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: honeycomb
                  name: 'Juniper MX: Temperature'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*Temperature'
                    - type: STRING
                      name: primary_label
                      value: '{ITEM.NAME}'
                    - type: INTEGER
                      name: primary_label_bold
                      value: '1'
                    - type: STRING
                      name: reference
                      value: CACFE
                    - type: STRING
                      name: secondary_label_color
                      value: 2334b9
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                    - type: STRING
                      name: thresholds.0.color
                      value: FF0000
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '80'
                - type: svggraph
                  name: 'Juniper MX: CPU utilization'
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 00c3ff
                    - type: STRING
                      name: ds.0.items.0
                      value: '*CPU utilization'
                    - type: STRING
                      name: lefty_max
                      value: '100'
                    - type: STRING
                      name: lefty_min
                      value: '0'
                    - type: INTEGER
                      name: legend_aggregation
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '4'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: ADFBC
                    - type: INTEGER
                      name: righty
                      value: '0'
                    - type: INTEGER
                      name: simple_triggers
                      value: '1'
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: honeycomb
                  name: 'Juniper MX: Current running state'
                  x: '36'
                  'y': '5'
                  width: '12'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*Current running state'
                    - type: STRING
                      name: reference
                      value: EFDCB
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: honeycomb
                  name: 'Juniper MX: Reason of the last switchover'
                  x: '48'
                  'y': '5'
                  width: '12'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*Reason of the last switchover'
                    - type: STRING
                      name: reference
                      value: FCEDA
                    - type: INTEGER
                      name: show.0
                      value: '2'
                - type: item
                  name: 'Juniper MX: OS'
                  x: '60'
                  'y': '5'
                  width: '12'
                  height: '5'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Juniper MX by SNMP'
                        key: 'juniper.mx.system.sw.os[sysDescr.0]'
                    - type: INTEGER
                      name: show.0
                      value: '2'
                    - type: INTEGER
                      name: units_show
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '10'
            - name: 'Juniper MX: Network'
              widgets:
                - type: svggraph
                  name: 'Juniper MX: Bits received'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: '006274'
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Bits received'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: ABFFD
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Inbound packets discarded'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 9c640a
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Inbound packets discarded'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: DBEAF
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Inbound packets with errors'
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: d73deb
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Inbound packets with errors'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: DBDEA
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Bits sent'
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: b51b1b
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Bits sent'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: DEDDA
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Outbound packets discarded'
                  x: '36'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 3d5c25
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Outbound packets discarded'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: FBDDA
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Outbound packets with errors'
                  x: '36'
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 33309a
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Outbound packets with errors'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: EEDCC
                    - type: INTEGER
                      name: working_time
                      value: '1'
            - name: 'Juniper MX: Digital Lane Monitoring'
              widgets:
                - type: svggraph
                  name: 'Juniper MX: Tx optical power lane'
                  width: '36'
                  height: '8'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 29b00b
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Tx optical power lane*'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: BBCBB
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: Rx optical power lane'
                  x: '36'
                  width: '36'
                  height: '8'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 0d62c3
                    - type: STRING
                      name: ds.0.items.0
                      value: '*Rx optical power lane*'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: STRING
                      name: reference
                      value: CEACB
                    - type: INTEGER
                      name: working_time
                      value: '1'
            - name: 'Juniper MX: BGP/OSPF'
              widgets:
                - type: honeycomb
                  name: 'Juniper MX: BGP Peer state'
                  width: '18'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*peer * State'
                    - type: STRING
                      name: primary_label
                      value: '{ITEM.NAME}'
                    - type: INTEGER
                      name: primary_label_bold
                      value: '1'
                    - type: STRING
                      name: reference
                      value: CEFEB
                    - type: STRING
                      name: secondary_label_color
                      value: 2334b9
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                - type: svggraph
                  name: 'Juniper MX: BGP Accepted/Rejected prefixes'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: d882f2
                    - type: STRING
                      name: ds.0.items.0
                      value: 'BGP * Accepted prefixes'
                    - type: STRING
                      name: ds.1.color
                      value: 4ba26e
                    - type: STRING
                      name: ds.1.items.0
                      value: 'BGP * Rejected prefixes'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: STRING
                      name: reference
                      value: FEFAD
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: svggraph
                  name: 'Juniper MX: BGP Advertised/Received prefixes'
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: d882f2
                    - type: STRING
                      name: ds.0.items.0
                      value: 'BGP * Advertised prefixes'
                    - type: STRING
                      name: ds.1.color
                      value: 9bde59
                    - type: STRING
                      name: ds.1.items.0
                      value: 'BGP * Received prefixes'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: STRING
                      name: reference
                      value: EDDBF
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: honeycomb
                  name: 'Juniper MX: BGP Peer status'
                  x: '18'
                  width: '18'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*peer * Status'
                    - type: STRING
                      name: primary_label
                      value: '{ITEM.NAME}'
                    - type: INTEGER
                      name: primary_label_bold
                      value: '1'
                    - type: STRING
                      name: reference
                      value: DFDBB
                    - type: STRING
                      name: secondary_label_color
                      value: 2334b9
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                - type: honeycomb
                  name: 'Juniper MX: OSPF Neighbor State'
                  x: '36'
                  width: '18'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*OSPF Neighbor * State'
                    - type: STRING
                      name: primary_label
                      value: '{ITEM.NAME}'
                    - type: INTEGER
                      name: primary_label_bold
                      value: '1'
                    - type: STRING
                      name: reference
                      value: EDAAA
                    - type: STRING
                      name: secondary_label_color
                      value: 2334b9
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
                - type: svggraph
                  name: 'Juniper MX: OSPF/OSPFv3 Number of relationship'
                  x: '36'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color
                      value: 00c3ff
                    - type: STRING
                      name: ds.0.items.0
                      value: 'OSPF Neighbor * Events'
                    - type: INTEGER
                      name: ds.1.axisy
                      value: '1'
                    - type: STRING
                      name: ds.1.color
                      value: 756dbc
                    - type: STRING
                      name: ds.1.items.0
                      value: 'OSPFv3 Neighbor * Events'
                    - type: INTEGER
                      name: legend_aggregation
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: ABDDC
                    - type: INTEGER
                      name: simple_triggers
                      value: '1'
                    - type: INTEGER
                      name: working_time
                      value: '1'
                - type: honeycomb
                  name: 'Juniper MX: OSPFv3 Neighbor State'
                  x: '54'
                  width: '18'
                  height: '5'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: A5D6A7
                    - type: STRING
                      name: items.0
                      value: '*OSPFv3 Neighbor * State'
                    - type: STRING
                      name: primary_label
                      value: '{ITEM.NAME}'
                    - type: INTEGER
                      name: primary_label_bold
                      value: '1'
                    - type: STRING
                      name: reference
                      value: EECBF
                    - type: STRING
                      name: secondary_label_color
                      value: 2334b9
                    - type: INTEGER
                      name: secondary_label_decimal_places
                      value: '0'
      valuemaps:
        - uuid: 3b94e9f3175c4822b93682636e5cf64d
          name: 'BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerState'
          mappings:
            - value: '1'
              newvalue: idle
            - value: '2'
              newvalue: connect
            - value: '3'
              newvalue: active
            - value: '4'
              newvalue: opensent
            - value: '5'
              newvalue: openconfirm
            - value: '6'
              newvalue: established
        - uuid: 6a57534ae79048229a3ed10f9f0a52e4
          name: 'BGP4-V2-MIB-JUNIPER::jnxBgpM2PeerStatus'
          mappings:
            - value: '1'
              newvalue: halted
            - value: '2'
              newvalue: running
        - uuid: aba24883ea0f4a569748153eb554443a
          name: 'EtherLike-MIB::dot3StatsDuplexStatus'
          mappings:
            - value: '1'
              newvalue: unknown
            - value: '2'
              newvalue: halfDuplex
            - value: '3'
              newvalue: fullDuplex
        - uuid: 93ba7232ec5d47db9478d91b6bdfd01b
          name: 'IF-MIB::ifOperStatus'
          mappings:
            - value: '1'
              newvalue: up
            - value: '2'
              newvalue: down
            - value: '4'
              newvalue: unknown
            - value: '5'
              newvalue: dormant
            - value: '6'
              newvalue: notPresent
            - value: '7'
              newvalue: lowerLayerDown
        - uuid: ecb1a90bea804c79aa074876a95397ae
          name: 'IF-MIB::ifType'
          mappings:
            - value: '1'
              newvalue: other
            - value: '2'
              newvalue: regular1822
            - value: '3'
              newvalue: hdh1822
            - value: '4'
              newvalue: ddnX25
            - value: '5'
              newvalue: rfc877x25
            - value: '6'
              newvalue: ethernetCsmacd
            - value: '7'
              newvalue: iso88023Csmacd
            - value: '8'
              newvalue: iso88024TokenBus
            - value: '9'
              newvalue: iso88025TokenRing
            - value: '10'
              newvalue: iso88026Man
            - value: '11'
              newvalue: starLan
            - value: '12'
              newvalue: proteon10Mbit
            - value: '13'
              newvalue: proteon80Mbit
            - value: '14'
              newvalue: hyperchannel
            - value: '15'
              newvalue: fddi
            - value: '16'
              newvalue: lapb
            - value: '17'
              newvalue: sdlc
            - value: '18'
              newvalue: ds1
            - value: '19'
              newvalue: e1
            - value: '20'
              newvalue: basicISDN
            - value: '21'
              newvalue: primaryISDN
            - value: '22'
              newvalue: propPointToPointSerial
            - value: '23'
              newvalue: ppp
            - value: '24'
              newvalue: softwareLoopback
            - value: '25'
              newvalue: eon
            - value: '26'
              newvalue: ethernet3Mbit
            - value: '27'
              newvalue: nsip
            - value: '28'
              newvalue: slip
            - value: '29'
              newvalue: ultra
            - value: '30'
              newvalue: ds3
            - value: '31'
              newvalue: sip
            - value: '32'
              newvalue: frameRelay
            - value: '33'
              newvalue: rs232
            - value: '34'
              newvalue: para
            - value: '35'
              newvalue: arcnet
            - value: '36'
              newvalue: arcnetPlus
            - value: '37'
              newvalue: atm
            - value: '38'
              newvalue: miox25
            - value: '39'
              newvalue: sonet
            - value: '40'
              newvalue: x25ple
            - value: '41'
              newvalue: iso88022llc
            - value: '42'
              newvalue: localTalk
            - value: '43'
              newvalue: smdsDxi
            - value: '44'
              newvalue: frameRelayService
            - value: '45'
              newvalue: v35
            - value: '46'
              newvalue: hssi
            - value: '47'
              newvalue: hippi
            - value: '48'
              newvalue: modem
            - value: '49'
              newvalue: aal5
            - value: '50'
              newvalue: sonetPath
            - value: '51'
              newvalue: sonetVT
            - value: '52'
              newvalue: smdsIcip
            - value: '53'
              newvalue: propVirtual
            - value: '54'
              newvalue: propMultiplexor
            - value: '55'
              newvalue: ieee80212
            - value: '56'
              newvalue: fibreChannel
            - value: '57'
              newvalue: hippiInterface
            - value: '58'
              newvalue: frameRelayInterconnect
            - value: '59'
              newvalue: aflane8023
            - value: '60'
              newvalue: aflane8025
            - value: '61'
              newvalue: cctEmul
            - value: '62'
              newvalue: fastEther
            - value: '63'
              newvalue: isdn
            - value: '64'
              newvalue: v11
            - value: '65'
              newvalue: v36
            - value: '66'
              newvalue: g703at64k
            - value: '67'
              newvalue: g703at2mb
            - value: '68'
              newvalue: qllc
            - value: '69'
              newvalue: fastEtherFX
            - value: '70'
              newvalue: channel
            - value: '71'
              newvalue: ieee80211
            - value: '72'
              newvalue: ibm370parChan
            - value: '73'
              newvalue: escon
            - value: '74'
              newvalue: dlsw
            - value: '75'
              newvalue: isdns
            - value: '76'
              newvalue: isdnu
            - value: '77'
              newvalue: lapd
            - value: '78'
              newvalue: ipSwitch
            - value: '79'
              newvalue: rsrb
            - value: '80'
              newvalue: atmLogical
            - value: '81'
              newvalue: ds0
            - value: '82'
              newvalue: ds0Bundle
            - value: '83'
              newvalue: bsc
            - value: '84'
              newvalue: async
            - value: '85'
              newvalue: cnr
            - value: '86'
              newvalue: iso88025Dtr
            - value: '87'
              newvalue: eplrs
            - value: '88'
              newvalue: arap
            - value: '89'
              newvalue: propCnls
            - value: '90'
              newvalue: hostPad
            - value: '91'
              newvalue: termPad
            - value: '92'
              newvalue: frameRelayMPI
            - value: '93'
              newvalue: x213
            - value: '94'
              newvalue: adsl
            - value: '95'
              newvalue: radsl
            - value: '96'
              newvalue: sdsl
            - value: '97'
              newvalue: vdsl
            - value: '98'
              newvalue: iso88025CRFPInt
            - value: '99'
              newvalue: myrinet
            - value: '100'
              newvalue: voiceEM
            - value: '101'
              newvalue: voiceFXO
            - value: '102'
              newvalue: voiceFXS
            - value: '103'
              newvalue: voiceEncap
            - value: '104'
              newvalue: voiceOverIp
            - value: '105'
              newvalue: atmDxi
            - value: '106'
              newvalue: atmFuni
            - value: '107'
              newvalue: atmIma
            - value: '108'
              newvalue: pppMultilinkBundle
            - value: '109'
              newvalue: ipOverCdlc
            - value: '110'
              newvalue: ipOverClaw
            - value: '111'
              newvalue: stackToStack
            - value: '112'
              newvalue: virtualIpAddress
            - value: '113'
              newvalue: mpc
            - value: '114'
              newvalue: ipOverAtm
            - value: '115'
              newvalue: iso88025Fiber
            - value: '116'
              newvalue: tdlc
            - value: '117'
              newvalue: gigabitEthernet
            - value: '118'
              newvalue: hdlc
            - value: '119'
              newvalue: lapf
            - value: '120'
              newvalue: v37
            - value: '121'
              newvalue: x25mlp
            - value: '122'
              newvalue: x25huntGroup
            - value: '123'
              newvalue: trasnpHdlc
            - value: '124'
              newvalue: interleave
            - value: '125'
              newvalue: fast
            - value: '126'
              newvalue: ip
            - value: '127'
              newvalue: docsCableMaclayer
            - value: '128'
              newvalue: docsCableDownstream
            - value: '129'
              newvalue: docsCableUpstream
            - value: '130'
              newvalue: a12MppSwitch
            - value: '131'
              newvalue: tunnel
            - value: '132'
              newvalue: coffee
            - value: '133'
              newvalue: ces
            - value: '134'
              newvalue: atmSubInterface
            - value: '135'
              newvalue: l2vlan
            - value: '136'
              newvalue: l3ipvlan
            - value: '137'
              newvalue: l3ipxvlan
            - value: '138'
              newvalue: digitalPowerline
            - value: '139'
              newvalue: mediaMailOverIp
            - value: '140'
              newvalue: dtm
            - value: '141'
              newvalue: dcn
            - value: '142'
              newvalue: ipForward
            - value: '143'
              newvalue: msdsl
            - value: '144'
              newvalue: ieee1394
            - value: '145'
              newvalue: if-gsn
            - value: '146'
              newvalue: dvbRccMacLayer
            - value: '147'
              newvalue: dvbRccDownstream
            - value: '148'
              newvalue: dvbRccUpstream
            - value: '149'
              newvalue: atmVirtual
            - value: '150'
              newvalue: mplsTunnel
            - value: '151'
              newvalue: srp
            - value: '152'
              newvalue: voiceOverAtm
            - value: '153'
              newvalue: voiceOverFrameRelay
            - value: '154'
              newvalue: idsl
            - value: '155'
              newvalue: compositeLink
            - value: '156'
              newvalue: ss7SigLink
            - value: '157'
              newvalue: propWirelessP2P
            - value: '158'
              newvalue: frForward
            - value: '159'
              newvalue: rfc1483
            - value: '160'
              newvalue: usb
            - value: '161'
              newvalue: ieee8023adLag
            - value: '162'
              newvalue: bgppolicyaccounting
            - value: '163'
              newvalue: frf16MfrBundle
            - value: '164'
              newvalue: h323Gatekeeper
            - value: '165'
              newvalue: h323Proxy
            - value: '166'
              newvalue: mpls
            - value: '167'
              newvalue: mfSigLink
            - value: '168'
              newvalue: hdsl2
            - value: '169'
              newvalue: shdsl
            - value: '170'
              newvalue: ds1FDL
            - value: '171'
              newvalue: pos
            - value: '172'
              newvalue: dvbAsiIn
            - value: '173'
              newvalue: dvbAsiOut
            - value: '174'
              newvalue: plc
            - value: '175'
              newvalue: nfas
            - value: '176'
              newvalue: tr008
            - value: '177'
              newvalue: gr303RDT
            - value: '178'
              newvalue: gr303IDT
            - value: '179'
              newvalue: isup
            - value: '180'
              newvalue: propDocsWirelessMaclayer
            - value: '181'
              newvalue: propDocsWirelessDownstream
            - value: '182'
              newvalue: propDocsWirelessUpstream
            - value: '183'
              newvalue: hiperlan2
            - value: '184'
              newvalue: propBWAp2Mp
            - value: '185'
              newvalue: sonetOverheadChannel
            - value: '186'
              newvalue: digitalWrapperOverheadChannel
            - value: '187'
              newvalue: aal2
            - value: '188'
              newvalue: radioMAC
            - value: '189'
              newvalue: atmRadio
            - value: '190'
              newvalue: imt
            - value: '191'
              newvalue: mvl
            - value: '192'
              newvalue: reachDSL
            - value: '193'
              newvalue: frDlciEndPt
            - value: '194'
              newvalue: atmVciEndPt
            - value: '195'
              newvalue: opticalChannel
            - value: '196'
              newvalue: opticalTransport
            - value: '197'
              newvalue: propAtm
            - value: '198'
              newvalue: voiceOverCable
            - value: '199'
              newvalue: infiniband
            - value: '200'
              newvalue: teLink
            - value: '201'
              newvalue: q2931
            - value: '202'
              newvalue: virtualTg
            - value: '203'
              newvalue: sipTg
            - value: '204'
              newvalue: sipSig
            - value: '205'
              newvalue: docsCableUpstreamChannel
            - value: '206'
              newvalue: econet
            - value: '207'
              newvalue: pon155
            - value: '208'
              newvalue: pon622
            - value: '209'
              newvalue: bridge
            - value: '210'
              newvalue: linegroup
            - value: '211'
              newvalue: voiceEMFGD
            - value: '212'
              newvalue: voiceFGDEANA
            - value: '213'
              newvalue: voiceDID
            - value: '214'
              newvalue: mpegTransport
            - value: '215'
              newvalue: sixToFour
            - value: '216'
              newvalue: gtp
            - value: '217'
              newvalue: pdnEtherLoop1
            - value: '218'
              newvalue: pdnEtherLoop2
            - value: '219'
              newvalue: opticalChannelGroup
            - value: '220'
              newvalue: homepna
            - value: '221'
              newvalue: gfp
            - value: '222'
              newvalue: ciscoISLvlan
            - value: '223'
              newvalue: actelisMetaLOOP
            - value: '224'
              newvalue: fcipLink
            - value: '225'
              newvalue: rpr
            - value: '226'
              newvalue: qam
            - value: '227'
              newvalue: lmp
            - value: '228'
              newvalue: cblVectaStar
            - value: '229'
              newvalue: docsCableMCmtsDownstream
            - value: '230'
              newvalue: adsl2
            - value: '231'
              newvalue: macSecControlledIF
            - value: '232'
              newvalue: macSecUncontrolledIF
            - value: '233'
              newvalue: aviciOpticalEther
            - value: '234'
              newvalue: atmbond
            - value: '235'
              newvalue: voiceFGDOS
            - value: '236'
              newvalue: mocaVersion1
            - value: '237'
              newvalue: ieee80216WMAN
            - value: '238'
              newvalue: adsl2plus
            - value: '239'
              newvalue: dvbRcsMacLayer
            - value: '240'
              newvalue: dvbTdm
            - value: '241'
              newvalue: dvbRcsTdma
            - value: '242'
              newvalue: x86Laps
            - value: '243'
              newvalue: wwanPP
            - value: '244'
              newvalue: wwanPP2
            - value: '245'
              newvalue: voiceEBS
            - value: '246'
              newvalue: ifPwType
            - value: '247'
              newvalue: ilan
            - value: '248'
              newvalue: pip
            - value: '249'
              newvalue: aluELP
            - value: '250'
              newvalue: gpon
            - value: '251'
              newvalue: vdsl2
            - value: '252'
              newvalue: capwapDot11Profile
            - value: '253'
              newvalue: capwapDot11Bss
            - value: '254'
              newvalue: capwapWtpVirtualRadio
            - value: '255'
              newvalue: bits
            - value: '256'
              newvalue: docsCableUpstreamRfPort
            - value: '257'
              newvalue: cableDownstreamRfPort
            - value: '258'
              newvalue: vmwareVirtualNic
            - value: '259'
              newvalue: ieee802154
            - value: '260'
              newvalue: otnOdu
            - value: '261'
              newvalue: otnOtu
            - value: '262'
              newvalue: ifVfiType
            - value: '263'
              newvalue: g9981
            - value: '264'
              newvalue: g9982
            - value: '265'
              newvalue: g9983
            - value: '266'
              newvalue: aluEpon
            - value: '267'
              newvalue: aluEponOnu
            - value: '268'
              newvalue: aluEponPhysicalUni
            - value: '269'
              newvalue: aluEponLogicalLink
            - value: '270'
              newvalue: aluGponOnu
            - value: '271'
              newvalue: aluGponPhysicalUni
            - value: '272'
              newvalue: vmwareNicTeam
            - value: '277'
              newvalue: docsOfdmDownstream
            - value: '278'
              newvalue: docsOfdmaUpstream
            - value: '279'
              newvalue: gfast
            - value: '280'
              newvalue: sdci
            - value: '281'
              newvalue: xboxWireless
            - value: '282'
              newvalue: fastdsl
            - value: '283'
              newvalue: docsCableScte55d1FwdOob
            - value: '284'
              newvalue: docsCableScte55d1RetOob
            - value: '285'
              newvalue: docsCableScte55d2DsOob
            - value: '286'
              newvalue: docsCableScte55d2UsOob
            - value: '287'
              newvalue: docsCableNdf
            - value: '288'
              newvalue: docsCableNdr
            - value: '289'
              newvalue: ptm
            - value: '290'
              newvalue: ghn
        - uuid: 71aa874db0c647f2ab6b6f6ed741efa3
          name: 'JUNIPER-MIB::jnxOperatingState'
          mappings:
            - value: '1'
              newvalue: unknown
            - value: '2'
              newvalue: running
            - value: '3'
              newvalue: ready
            - value: '4'
              newvalue: reset
            - value: '5'
              newvalue: runningAtFullSpeed
            - value: '6'
              newvalue: 'down or off'
            - value: '7'
              newvalue: standby
        - uuid: 0432e6064cae4a22bdd512d0c8900f35
          name: 'JUNIPER-MIB::jnxRedundancyState'
          mappings:
            - value: '1'
              newvalue: unknown
            - value: '2'
              newvalue: master
            - value: '3'
              newvalue: backup
            - value: '4'
              newvalue: disabled
            - value: '5'
              newvalue: notApplicable
        - uuid: 742e0675e0b84ba685b1b06172334215
          name: 'JUNIPER-MIB::jnxRedundancySwitchoverReason'
          mappings:
            - value: '1'
              newvalue: other
            - value: '2'
              newvalue: neverSwitched
            - value: '3'
              newvalue: userSwitched
            - value: '4'
              newvalue: autoSwitched
        - uuid: 5d007beac7eb4743ab241d6a1c80847a
          name: 'OSPF-MIB::ospfNbrHelloSuppressed'
          mappings:
            - value: '1'
              newvalue: 'true'
            - value: '2'
              newvalue: 'false'
        - uuid: ed5b11312aaf44e0b888c58743e89f81
          name: 'OSPF-MIB::ospfNbrState'
          mappings:
            - value: '1'
              newvalue: down
            - value: '2'
              newvalue: attempt
            - value: '3'
              newvalue: init
            - value: '4'
              newvalue: twoWay
            - value: '5'
              newvalue: exchangeStart
            - value: '6'
              newvalue: exchange
            - value: '7'
              newvalue: loading
            - value: '8'
              newvalue: full
        - uuid: 1373262e914a430abe52ec79d2fc138b
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
        - uuid: bcba269d955b452d87a6f49f7a35ed2a
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: 4882bb9496ac40bc97c3c5278c0181c8
      expression: '(last(/Juniper MX by SNMP/juniper.mx.system.hw.uptime[hrSystemUptime.0])>0 and last(/Juniper MX by SNMP/juniper.mx.system.hw.uptime[hrSystemUptime.0])<10m) or (last(/Juniper MX by SNMP/juniper.mx.system.hw.uptime[hrSystemUptime.0])=0 and last(/Juniper MX by SNMP/juniper.mx.system.net.uptime[sysUpTime.0])<10m)'
      name: 'Juniper MX: Host has been restarted'
      event_name: 'Juniper MX: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'Juniper MX: No SNMP data collection'
          expression: 'max(/Juniper MX by SNMP/zabbix[host,snmp,available],{$JUNIPER.MX.SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
