zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: b84324c2a40a496dbbb379bbf5dde8d5
      template: 'Morningstar ProStar MPPT by SNMP'
      name: 'Morningstar ProStar MPPT by SNMP'
      description: |
        MIBs used:
        PROSTAR-MPPT
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: a517a7aafbab426eb6ced8d5f57c1fa4
          name: 'Array: Sweep Pmax'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.64.0
          key: 'array.sweep_pmax[arrayMaxPowerSweep.0]'
          value_type: FLOAT
          units: W
          description: |
            MIB: PROSTAR-MPPT
            Array Max. Power (sweep)
             Description:Array Max. Power (last sweep)
             Scaling Factor:1.0
             Units:W
             Range:[0.0, 500]
             Modbus address:0x003E
          tags:
            - tag: component
              value: array
        - uuid: 7714c76013e341f8b6753cc5a50a960f
          name: 'Array: Sweep Vmp'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.63.0
          key: 'array.sweep_vmp[arrayVmp.0]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PROSTAR-MPPT
            Array Vmp
              Description:Array Max. Power Point Voltage
              Scaling Factor:1.0
              Units:V
              Range:[0.0, 5000.0]
              Modbus address:0x003D
          tags:
            - tag: component
              value: array
        - uuid: 379ab969ad784968a1090ff98f5801ff
          name: 'Array: Sweep Voc'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.65.0
          key: 'array.sweep_voc[arrayVoc.0]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PROSTAR-MPPT
            Array Voc
             Description:Array Open Circuit Voltage
             Scaling Factor:1.0
             Units:V
             Range:[0.0, 80.0]
             Modbus address:0x003F
          tags:
            - tag: component
              value: array
        - uuid: 41a1118e1be3417daa79faace733d861
          name: 'Array: Voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.31.0
          key: 'array.voltage[arrayVoltage.0]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PROSTAR-MPPT
            Array Voltage
              Description:Array Voltage
              Scaling Factor:1.0
              Units:V
              Range:[0, 80]
              Modbus address:0x0013
          tags:
            - tag: component
              value: array
        - uuid: fe5c3b724e894573acdaf522a2213adb
          name: 'Battery: Battery Voltage discovery'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.30.0
          key: 'battery.voltage.discovery[batteryTerminalVoltage.0]'
          delay: 15m
          history: '0'
          value_type: FLOAT
          units: V
          description: 'MIB: PROSTAR-MPPT'
          tags:
            - tag: component
              value: battery
            - tag: component
              value: discovery
            - tag: component
              value: raw
        - uuid: ed1d54fce0904b7c9d0895a094f55108
          name: 'Battery: Charge Current'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.33.0
          key: 'charge.current[chargeCurrent.0]'
          value_type: FLOAT
          units: A
          description: |
            MIB: PROSTAR-MPPT
            Charge Current
              Description:Charge Current
              Scaling Factor:1.0
              Units:A
              Range:[0, 40]
              Modbus address:0x0010
          tags:
            - tag: component
              value: battery
        - uuid: 1b1b61995c0d4d89a7f9ad4e14c3541f
          name: 'Battery: Charge State'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.45.0
          key: 'charge.state[chargeState.0]'
          value_type: FLOAT
          description: |
            MIB: PROSTAR-MPPT
            Charge State
              Description:Control State
              Modbus address:0x0021
            
              0: Start
              1: NightCheck
              2: Disconnect
              3: Night
              4: Fault
              5: BulkMppt
              6: Absorption
              7: Float
              8: Equalize
              9: Slave
              10: Fixed
          valuemap:
            name: 'ProStar MPPT charge state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: battery
          triggers:
            - uuid: fe4863fdd4d64e1c977328bd3d0f687f
              expression: 'last(/Morningstar ProStar MPPT by SNMP/charge.state[chargeState.0])={$CHARGE.STATE.CRIT}'
              name: 'Morningstar ProStar MPPT: Battery: Device charge in critical state'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 4d064e4877474d72b85c9cdfb7b09dad
              expression: 'last(/Morningstar ProStar MPPT by SNMP/charge.state[chargeState.0])={$CHARGE.STATE.WARN}'
              name: 'Morningstar ProStar MPPT: Battery: Device charge in warning state'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'Morningstar ProStar MPPT: Battery: Device charge in critical state'
                  expression: 'last(/Morningstar ProStar MPPT by SNMP/charge.state[chargeState.0])={$CHARGE.STATE.CRIT}'
              tags:
                - tag: scope
                  value: notice
        - uuid: 009eb72ff6674da49d1dd85a6f9459cf
          name: 'Counter: Charge Amp-hours'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.49.0
          key: 'counter.charge_amp_hours[ahChargeResettable.0]'
          value_type: FLOAT
          units: Ah
          description: |
            MIB: PROSTAR-MPPT
            Ah Charge (Resettable)
             Description:Ah Charge (Resettable)
             Scaling Factor:0.1
             Units:Ah
             Range:[0.0, 4294967294]
             Modbus addresses:H=0x0026 L=0x0027
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            - tag: component
              value: counter
        - uuid: 4a53a2211a1249d59369ad65762ffe47
          name: 'Counter: Charge KW-hours'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.51.0
          key: 'counter.charge_kw_hours[kwhChargeResettable.0]'
          value_type: FLOAT
          units: '!kWh'
          description: |
            MIB: PROSTAR-MPPT
            kWh Charge (Resettable)
            Description:Kilowatt Hours Charge (Resettable)
            Scaling Factor:1.0
            Units:kWh
            Range:[0.0, 65535]
            Modbus address:0x002A
          tags:
            - tag: component
              value: counter
        - uuid: c72ef851c2d240c9835c1703cec49fd6
          name: 'Counter: Load Amp-hours'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.56.0
          key: 'counter.load_amp_hours[ahLoadResettable.0]'
          value_type: FLOAT
          units: Ah
          description: |
            MIB: PROSTAR-MPPT
            Description:Ah Load (Resettable)
            Scaling Factor:0.1
            Units:Ah
            Range:[0.0, 4294967294]
            Modbus addresses:H=0x0032 L=0x0033
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            - tag: component
              value: counter
        - uuid: 29a7d76472fb4025bc78fbeab273e955
          name: 'Load: Current'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.34.0
          key: 'load.current[loadCurrent.0]'
          value_type: FLOAT
          units: A
          description: |
            MIB: PROSTAR-MPPT
            Load Current
             Description:Load Current
             Scaling Factor:1.0
             Units:A
             Range:[0, 60]
             Modbus address:0x0016
          tags:
            - tag: component
              value: load
        - uuid: ae927b5cba5b43f5a2136fd3ee71b63d
          name: 'Load: State'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.53.0
          key: 'load.state[loadState.0]'
          value_type: FLOAT
          description: |
            MIB: PROSTAR-MPPT
            Load State
             Description:Load State
             Modbus address:0x002E
            
             0: Start
            1: Normal
            2: LvdWarning
            3: Lvd
            4: Fault
            5: Disconnect
            6: NormalOff
            7: Override
            8: NotUsed
          valuemap:
            name: 'ProStar MPPT load state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: load
          triggers:
            - uuid: a88025c5e5a748e3a6dfa01685ba075b
              expression: 'last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"lvd"} or last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"fault"}'
              name: 'Morningstar ProStar MPPT: Load: Device load in critical state'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 9ab107b39b874fed83d09e7c1964a699
              expression: 'last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.WARN:"lvdWarning"}  or last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.WARN:"override"}'
              name: 'Morningstar ProStar MPPT: Load: Device load in warning state'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'Morningstar ProStar MPPT: Load: Device load in critical state'
                  expression: 'last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"lvd"} or last(/Morningstar ProStar MPPT by SNMP/load.state[loadState.0])={$LOAD.STATE.CRIT:"fault"}'
              tags:
                - tag: scope
                  value: notice
        - uuid: 47894752dd1d41f1aa882387acf6dc3a
          name: 'Load: Voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.32.0
          key: 'load.voltage[loadVoltage.0]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PROSTAR-MPPT
            Load Voltage
             Description:Load Voltage
             Scaling Factor:1.0
             Units:V
             Range:[0, 80]
             Modbus address:0x0014
          tags:
            - tag: component
              value: load
        - uuid: d44cb5d7db31402dae79275a9148817d
          name: 'Status: Alarms'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.59.0
          key: 'status.alarms[alarms.0]'
          history: 1h
          value_type: TEXT
          description: |
            MIB: PROSTAR-MPPT
            Description:Alarms
            Modbus addresses:H=0x0038 L=0x0039
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
            - type: JAVASCRIPT
              parameters:
                - |
                  var FIELDS = [
                  	'rtsOpen',
                  	'rtsShorted',
                  	'rtsDisconnected',
                  	'heatsinkTempSensorOpen',
                  	'heatsinkTempSensorShorted',
                  	'heatsinkTempLimit',
                  	'inductorTempSensorOpen',
                  	'inductorTempSensorShorted',
                  	'inductorTempLimit',
                  	'currentLimit',
                  	'currentMeasurementError',
                  	'batterySenseOutOfRange',
                  	'batterySenseDisconnected',
                  	'uncalibrated',
                  	'tb5v',
                  	'fp10SupplyOutOfRange',
                  	'unused',
                  	'mosfetOpen',
                  	'arrayCurrentOffset',
                  	'loadCurrentOffset',
                  	'p33SupplyOutOfRange',
                  	'p12SupplyOutOfRange',
                  	'hightInputVoltageLimit',
                  	'controllerReset',
                  	'loadLvd',
                  	'logTimeout',
                  	'eepromAccessFailure'
                  ];
                  
                  var flags = parseInt(value.replace(/\x20/g, ''), 16),
                  	result = [];
                  
                  for (var i = 0, f = 1 << 31 >>> 0, l = FIELDS.length; i < l; i++, f >>>= 1) {
                  	if (flags & f) {
                  		result.push(FIELDS[i]);
                  	}
                  }
                  
                  return result.length ? result.join('\n') : 'No alarms';
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: a2d0ab5150dd4bad8b5ec4f2c6aa13f8
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","arrayCurrentOffset")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "arrayCurrentOffset" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: cc6a15f16fd8470a9dcd9a9e01cba61c
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","batterySenseDisconnected")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "batterySenseDisconnected" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 55d4726d9b9047c79cf690353d950797
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","batterySenseOutOfRange")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "batterySenseOutOfRange" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 7f015198395042219666cde4458d407c
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","controllerReset")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "controllerReset" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 48339339e5a7465fbc67266998c9a8fe
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","currentLimit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "currentLimit" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: c88074037099498c896bb4793e04fea3
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","currentMeasurementError")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "currentMeasurementError" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: cecd8ee17e5143ffb46495e927750c82
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","eepromAccessFailure")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "eepromAccessFailure" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 4affa15e1c1c42459ea8dd6820d1c008
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","fp10SupplyOutOfRange")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "fp10SupplyOutOfRange" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 41e4225072a3468696cfb534c65b9736
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","heatsinkTempLimit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "heatsinkTempLimit" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 5d269997a57d44ceb545e751e8e2d919
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","heatsinkTempSensorOpen")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "heatsinkTempSensorOpen" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: a8342a4e2fff40a7b830086dec303fd9
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","heatsinkTempSensorShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "heatsinkTempSensorShorted" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 32e5b7ae81ce4ebea9b05ff7ab411e5a
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","hightInputVoltageLimit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "hightInputVoltageLimit" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: c10d27c1d9d54b8981a639e7bf0dfc02
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","inductorTempLimit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "inductorTempLimit" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 9f80959684b34b6498a1634097cd0d22
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","inductorTempSensorOpen")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "inductorTempSensorOpen" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: cc735ddcc98e4c099bb770e2b2a171b5
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","inductorTempSensorShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "inductorTempSensorShorted" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 217935cd6c7547bc95f5af51b3e643d4
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","loadCurrentOffset")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "loadCurrentOffset" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: cb05261f120240bf944b304ffc4979e6
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","loadLvd")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "loadLvd" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 1ed1de932e084ce5ba03747bdd8ca4e5
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","logTimeout")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "logTimeout" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 8824f80f1ef245508d6d0d660e3cabf1
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","mosfetOpen")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "mosfetOpen" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 59569aaebf32403c9fd310f6b26845b0
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","p12SupplyOutOfRange")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "p12SupplyOutOfRange" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 4775d3a7b843455eb404661c070be092
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","p33SupplyOutOfRange")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "p33SupplyOutOfRange" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 2015d2b876564ad79699a23fc6b60f07
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","rtsDisconnected")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "rtsDisconnected" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: cce1eb2bee094a3b9a993ec2d60d182b
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","rtsShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "rtsShorted" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 7a07b757660a4c9a879ac03a94832720
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","tb5v")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "tb5v" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
            - uuid: 39205fc6d2cd4888994cccb016b4b2f8
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.alarms[alarms.0],#3,"like","uncalibrated")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "uncalibrated" alarm flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              tags:
                - tag: scope
                  value: notice
        - uuid: 8fbb5c650fa040c892a1d10a17fbbf14
          name: 'Status: Array Faults'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.46.0
          key: 'status.array_faults[arrayFaults.0]'
          history: 1h
          value_type: TEXT
          description: |
            MIB: PROSTAR-MPPT
            Description:Array Faults
            Modbus address:0x0022
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
            - type: JAVASCRIPT
              parameters:
                - |
                  var FIELDS = [
                  	'overcurrent',
                  	'mosfetSShorted',
                  	'software',
                  	'batteryHvd',
                  	'arrayHvd',
                  	'customSettingsEdit',
                  	'rtsShorted',
                  	'rtsNoLongerValid',
                  	'localTempSensorDamaged',
                  	'batteryLowVoltageDisconnect',
                  	'slaveTimeout',
                  	'dipSwitchChanged',
                  ];
                  
                  var flags = parseInt(value.replace(/\x20/g, ''), 16),
                  	result = [];
                  
                  for (var i = 0, f = 1 << 31 >>> 0, l = FIELDS.length; i < l; i++, f >>>= 1) {
                  	if (flags & f) {
                  		result.push(FIELDS[i]);
                  	}
                  }
                  
                  return result.length ? result.join('\n') : 'No faults';
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 8322f8ca8e2e462a8799dc399f17ba27
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","arrayHvd")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "arrayHvd" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 6a138cd2af754bb3a22173e8da28b254
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","batteryHvd")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "batteryHvd" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 8e42cf21ec10409da840021bfd26f74c
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","batteryLowVoltageDisconnect")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "batteryLowVoltageDisconnect" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: d1112d9828064a879d56626ac6339dbf
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","customSettingsEdit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "customSettingsEdit" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 75a67f17a33e41eea34585fade6319ef
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","dipSwitchChanged")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "dipSwitchChanged" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 4502112383524f0499ea13e6f83ce789
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","localTempSensorDamaged")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "localTempSensorDamaged" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: f1489dc1f8574895bd233b14ce080748
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","mosfetSShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "mosfetSShorted" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 4ea903d3e8644ddaa5309eaa9715b894
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","overcurrent")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "overcurrent" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: e12a29ec16ea423cb69ca4ce460f201b
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","rtsNoLongerValid")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "rtsNoLongerValid" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 3ec4307bb2c444fc8eca27f9b7a136e2
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","rtsShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "rtsShorted" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 915c00d98e144ee7a9a2d50d0bd474c0
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","slaveTimeout")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "slaveTimeout" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 9aac314eef594a8d86fd4b88308428e5
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.array_faults[arrayFaults.0],#3,"like","software")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "software" array faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 712a9b442bec4e89acf4ee5d5bf26fb8
          name: 'Status: Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.25.1.1.0
          key: status.hw.uptime
          units: uptime
          description: 'The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.'
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: status
        - uuid: fb4d2147a8224b599ad908eca1b019e4
          name: 'Status: Load Faults'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.54.0
          key: 'status.load_faults[loadFaults.0]'
          history: 1h
          value_type: TEXT
          description: |
            MIB: PROSTAR-MPPT
            Description:Array Faults
            Modbus address:0x0022
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
            - type: JAVASCRIPT
              parameters:
                - |
                  var FIELDS = [
                  	'externalShortCircuit',
                  	'overcurrent',
                  	'mosfetShorted',
                  	'software',
                  	'loadHvd',
                  	'highTempDisconnect',
                  	'dipSwitchChanged',
                  	'customSettingsEdit'
                  ];
                  
                  var flags = parseInt(value.replace(/\x20/g, ''), 16),
                  	result = [];
                  
                  for (var i = 0, f = 1 << 31 >>> 0, l = FIELDS.length; i < l; i++, f >>>= 1) {
                  	if (flags & f) {
                  		result.push(FIELDS[i]);
                  	}
                  }
                  
                  return result.length ? result.join('\n') : 'No faults';
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 93750f768ba94f1bb9302fc17c76faeb
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","customSettingsEdit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "customSettingsEdit" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 456e2c36369f4519b2c80bcfe1acb4b0
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","dipSwitchChanged")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "dipSwitchChanged" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 359df17c40684187b7ae92c8aa0c9624
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","externalShortCircuit")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "externalShortCircuit" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 6dadf09064304f4381ad9ed0436e562a
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","highTempDisconnect")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "highTempDisconnect" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: bc41145ae8074290913a47cc3fd11e1e
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","loadHvd")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "loadHvd" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 8c8a7021928e4bf78b6309574e298876
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","mosfetShorted")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "mosfetShorted" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: b7d3f05837bd4d788d14f1aaf18b0482
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","overcurrent")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "overcurrent" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 801728740c1948b1a751469e6443daab
              expression: 'count(/Morningstar ProStar MPPT by SNMP/status.load_faults[loadFaults.0],#3,"like","software")=2'
              name: 'Morningstar ProStar MPPT: Status: Device has "software" load faults flag'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
        - uuid: 526ee94df484462a9264e57d92954e64
          name: 'Status: Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: status.net.uptime
          units: uptime
          description: 'The time (in hundredths of a second) since the network management portion of the system was last re-initialized.'
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 59cbcaaee8304b38a1144b3abf40bd9d
              expression: 'nodata(/Morningstar ProStar MPPT by SNMP/status.net.uptime,5m)=1'
              name: 'Morningstar ProStar MPPT: Status: Failed to fetch data'
              event_name: 'Morningstar ProStar MPPT: Status: Failed to fetch data (or no data for 5m)'
              priority: WARNING
              description: 'Zabbix has not received data for items for the last 5 minutes.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
        - uuid: 20ce95acdff6486684461f10579a73b4
          name: 'Battery: Target Voltage'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.48.0
          key: 'target.voltage[targetVoltage.0]'
          value_type: FLOAT
          units: V
          description: |
            MIB: PROSTAR-MPPT
            Target Voltage
             Description:Target Regulation Voltage
             Scaling Factor:1.0
             Units:V
             Range:[0.0, 80.0]
             Modbus address:0x0024
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: battery
        - uuid: 9a87cdcf65184059be334e986bcf801d
          name: 'Temperature: Ambient'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.40.0
          key: 'temp.ambient[ambientTemperature.0]'
          value_type: FLOAT
          units: C
          description: |
            MIB: PROSTAR-MPPT
            Ambient Temperature
             Description:Ambient Temperature
             Scaling Factor:1.0
             Units:deg C
             Range:[-128, 127]
             Modbus address:0x001C
          tags:
            - tag: component
              value: temperature
        - uuid: 1a8e79f49e86429abc80dd29598299ee
          name: 'Temperature: Battery'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.39.0
          key: 'temp.battery[batteryTemperature.0]'
          value_type: FLOAT
          units: C
          description: |
            MIB: PROSTAR-MPPT
            Battery Temperature
              Description:Battery Temperature
              Scaling Factor:1.0
              Units:deg C
              Range:[-128, 127]
              Modbus address:0x001B
          tags:
            - tag: component
              value: temperature
          triggers:
            - uuid: c74e1d3be1c24bde986bbce068db4bb8
              expression: 'min(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)>{$BATTERY.TEMP.MAX.CRIT}'
              name: 'Morningstar ProStar MPPT: Temperature: Critically high battery temperature'
              event_name: 'Morningstar ProStar MPPT: Temperature: Critically high battery temperature (over {$BATTERY.TEMP.MAX.CRIT}C for 5m)'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 0c2180ae5deb41adb503e37bf91c34e2
              expression: 'max(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)<{$BATTERY.TEMP.MIN.CRIT}'
              name: 'Morningstar ProStar MPPT: Temperature: Critically low battery temperature'
              event_name: 'Morningstar ProStar MPPT: Temperature: Critically low battery temperature (below {$BATTERY.TEMP.MIN.WARN}C for 5m)'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              tags:
                - tag: scope
                  value: notice
            - uuid: 1ab91d781c734f1eb2b9552f6dee9370
              expression: 'min(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)>{$BATTERY.TEMP.MAX.WARN}'
              name: 'Morningstar ProStar MPPT: Temperature: High battery temperature'
              event_name: 'Morningstar ProStar MPPT: Temperature: High battery temperature (over {$BATTERY.TEMP.MAX.WARN}C for 5m)'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'Morningstar ProStar MPPT: Temperature: Critically high battery temperature'
                  expression: 'min(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)>{$BATTERY.TEMP.MAX.CRIT}'
              tags:
                - tag: scope
                  value: notice
            - uuid: 6ec855dc6a5c42a79f1f40e14655418a
              expression: 'max(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)<{$BATTERY.TEMP.MIN.WARN}'
              name: 'Morningstar ProStar MPPT: Temperature: Low battery temperature'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'Morningstar ProStar MPPT: Temperature: Critically low battery temperature'
                  expression: 'max(/Morningstar ProStar MPPT by SNMP/temp.battery[batteryTemperature.0],5m)<{$BATTERY.TEMP.MIN.CRIT}'
              tags:
                - tag: scope
                  value: notice
        - uuid: 7d0cf28c0d334154971738df11775d1f
          name: 'Temperature: Heatsink'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.33333.5.38.0
          key: 'temp.heatsink[heatsinkTemperature.0]'
          value_type: FLOAT
          units: C
          description: |
            MIB: PROSTAR-MPPT
            Heatsink Temperature
             Description:Heatsink Temperature
             Scaling Factor:1.0
             Units:deg C
             Range:[-128, 127]
             Modbus address:0x001A
          tags:
            - tag: component
              value: temperature
      discovery_rules:
        - uuid: 1a21c30663c74c23b60e6ad72e228681
          name: 'Battery voltage discovery'
          type: DEPENDENT
          key: battery.voltage.discovery
          description: 'Discovery for battery voltage triggers'
          item_prototypes:
            - uuid: c02c73a349ec4a6b8557e142c4866148
              name: 'Battery: Voltage{#SINGLETON}'
              type: SNMP_AGENT
              snmp_oid: 1.3.6.1.4.1.33333.5.30.0
              key: 'battery.voltage[batteryTerminalVoltage.0{#SINGLETON}]'
              value_type: FLOAT
              units: V
              description: |
                MIB: PROSTAR-MPPT
                Battery Terminal Voltage
                Description:Battery  Terminal Voltage
                Scaling Factor:1.0
                Units:V
                Range:[0.0, 80.0]
                Modbus address:0x0012
              tags:
                - tag: component
                  value: battery
              trigger_prototypes:
                - uuid: 402f73ca5b8d412689a7e715223e890d
                  expression: 'min(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)>{#VOLTAGE.MAX.CRIT}'
                  name: 'Morningstar ProStar MPPT: Battery: Critically high battery voltage'
                  event_name: 'Morningstar ProStar MPPT: Battery: Critically high battery voltage (over {#VOLTAGE.MAX.CRIT}V for 5m)'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 753a0d25832d434186f586f895124f31
                  expression: 'max(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)<{#VOLTAGE.MIN.CRIT}'
                  name: 'Morningstar ProStar MPPT: Battery: Critically low battery voltage'
                  event_name: 'Morningstar ProStar MPPT: Battery: Critically low battery voltage (below {#VOLTAGE.MIN.CRIT}V for 5m)'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 66e1fdfbfa5740dfa8945626f7f8be78
                  expression: 'min(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)>{#VOLTAGE.MAX.WARN}'
                  name: 'Morningstar ProStar MPPT: Battery: High battery voltage'
                  event_name: 'Morningstar ProStar MPPT: Battery: High battery voltage (over {#VOLTAGE.MAX.WARN}V for 5m)'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  dependencies:
                    - name: 'Morningstar ProStar MPPT: Battery: Critically high battery voltage'
                      expression: 'min(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)>{#VOLTAGE.MAX.CRIT}'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: c9f3d03ce06641eb9b184f511a3a0341
                  expression: 'max(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)<{#VOLTAGE.MIN.WARN}'
                  name: 'Morningstar ProStar MPPT: Battery: Low battery voltage'
                  event_name: 'Morningstar ProStar MPPT: Battery: Low battery voltage (below {#VOLTAGE.MIN.WARN}V for 5m)'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  dependencies:
                    - name: 'Morningstar ProStar MPPT: Battery: Critically low battery voltage'
                      expression: 'max(/Morningstar ProStar MPPT by SNMP/battery.voltage[batteryTerminalVoltage.0{#SINGLETON}],5m)<{#VOLTAGE.MIN.CRIT}'
                  tags:
                    - tag: scope
                      value: capacity
          graph_prototypes:
            - uuid: 480e4c11060a4e34851b48bf7b9c5bb1
              name: 'Voltage: Battery/Load{#SINGLETON}'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Morningstar ProStar MPPT by SNMP'
                    key: 'battery.voltage[batteryTerminalVoltage.0{#SINGLETON}]'
                - sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: F63100
                  item:
                    host: 'Morningstar ProStar MPPT by SNMP'
                    key: 'load.voltage[loadVoltage.0]'
          master_item:
            key: 'battery.voltage.discovery[batteryTerminalVoltage.0]'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  var v_range = [
                  	[[0, 18], [12, 15, 11.5, 15.5]],
                  	[[18, 36], [24, 30, 23, 31]],
                  	[[36, 99], [48, 60, 46, 62]],
                  ],
                  	result = [];
                  
                  for (var idx in v_range) {
                  	if (v_range[idx][0][0] < value && value <= v_range[idx][0][1]) {
                  		result = [{
                  			'{#VOLTAGE.MIN.WARN}': parseInt({$VOLTAGE.MIN.WARN}) || v_range[idx][1][0],
                  			'{#VOLTAGE.MAX.WARN}': parseInt({$VOLTAGE.MAX.WARN}) || v_range[idx][1][1],
                  			'{#VOLTAGE.MIN.CRIT}': parseInt({$VOLTAGE.MIN.CRIT}) || v_range[idx][1][2],
                  			'{#VOLTAGE.MAX.CRIT}': parseInt({$VOLTAGE.MAX.CRIT}) || v_range[idx][1][3],
                  			'{#SINGLETON}': ''
                  		}];
                  		break;
                  	}
                  }
                  
                  return JSON.stringify(result);
      tags:
        - tag: class
          value: power
        - tag: target
          value: morningstar
      macros:
        - macro: '{$BATTERY.TEMP.MAX.CRIT}'
          value: '60'
          description: 'Battery high temperature critical value'
        - macro: '{$BATTERY.TEMP.MAX.WARN}'
          value: '45'
          description: 'Battery high temperature warning value'
        - macro: '{$BATTERY.TEMP.MIN.CRIT}'
          value: '-20'
          description: 'Battery low temperature critical value'
        - macro: '{$BATTERY.TEMP.MIN.WARN}'
          value: '0'
          description: 'Battery low temperature warning value'
        - macro: '{$CHARGE.STATE.CRIT}'
          value: '4'
          description: fault
        - macro: '{$CHARGE.STATE.WARN}'
          value: '2'
          description: disconnect
        - macro: '{$LOAD.STATE.CRIT:"fault"}'
          value: '4'
          description: fault
        - macro: '{$LOAD.STATE.CRIT:"lvd"}'
          value: '3'
          description: lvd
        - macro: '{$LOAD.STATE.WARN:"disconnect"}'
          value: '5'
          description: disconnect
        - macro: '{$LOAD.STATE.WARN:"lvdWarning"}'
          value: '2'
          description: lvdWarning
        - macro: '{$LOAD.STATE.WARN:"override"}'
          value: '7'
          description: override
        - macro: '{$VOLTAGE.MAX.CRIT}'
        - macro: '{$VOLTAGE.MAX.WARN}'
        - macro: '{$VOLTAGE.MIN.CRIT}'
        - macro: '{$VOLTAGE.MIN.WARN}'
      dashboards:
        - uuid: 3765513f1a4945c0801639e4c689f99f
          name: 'Morningstar ProStar MPPT: Overview'
          pages:
            - widgets:
                - type: graph
                  width: '72'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Morningstar ProStar MPPT by SNMP'
                        name: 'Array: Voltage'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  'y': '4'
                  width: '72'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Morningstar ProStar MPPT by SNMP'
                        name: 'Current: Charge/Load'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: graph
                  'y': '8'
                  width: '72'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Morningstar ProStar MPPT by SNMP'
                        name: 'Temperature: Ambient/Battery/Heatsink'
                    - type: STRING
                      name: reference
                      value: AAAAC
      valuemaps:
        - uuid: 1703c3aeb1b24641821e1c6d2cb4c8b7
          name: 'ProStar MPPT charge state'
          mappings:
            - value: '0'
              newvalue: Start
            - value: '1'
              newvalue: NightCheck
            - value: '2'
              newvalue: Disconnect
            - value: '3'
              newvalue: Night
            - value: '4'
              newvalue: Fault
            - value: '5'
              newvalue: BulkMppt
            - value: '6'
              newvalue: Absorption
            - value: '7'
              newvalue: Float
            - value: '8'
              newvalue: Equalize
            - value: '9'
              newvalue: Slave
            - value: '10'
              newvalue: Fixed
        - uuid: b5403a0805a54b9294f69a1e11a438b1
          name: 'ProStar MPPT load state'
          mappings:
            - value: '0'
              newvalue: Start
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: LvdWarning
            - value: '3'
              newvalue: Lvd
            - value: '4'
              newvalue: Fault
            - value: '5'
              newvalue: Disconnect
            - value: '6'
              newvalue: NormalOff
            - value: '7'
              newvalue: Override
            - value: '8'
              newvalue: NotUsed
  triggers:
    - uuid: ca65a39c019046c29a522a6ca93ceb75
      expression: '(last(/Morningstar ProStar MPPT by SNMP/status.hw.uptime)>0 and last(/Morningstar ProStar MPPT by SNMP/status.hw.uptime)<10m) or (last(/Morningstar ProStar MPPT by SNMP/status.hw.uptime)=0 and last(/Morningstar ProStar MPPT by SNMP/status.net.uptime)<10m)'
      name: 'Morningstar ProStar MPPT: Status: Device has been restarted'
      event_name: 'Morningstar ProStar MPPT: Status: Device has been restarted (uptime < 10m)'
      priority: INFO
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: 0662dc480c2b487e9f9afc389166a15b
      name: 'Array: Voltage'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'array.sweep_vmp[arrayVmp.0]'
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'array.sweep_voc[arrayVoc.0]'
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 00611C
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'array.voltage[arrayVoltage.0]'
    - uuid: 94bbfd8a60a8412998ff617011db9372
      name: 'Current: Charge/Load'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'charge.current[chargeCurrent.0]'
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'load.current[loadCurrent.0]'
    - uuid: 02652b1251244702bf28f691e72ba27e
      name: 'Temperature: Ambient/Battery/Heatsink'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'temp.ambient[ambientTemperature.0]'
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: F63100
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'temp.battery[batteryTemperature.0]'
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 00611C
          item:
            host: 'Morningstar ProStar MPPT by SNMP'
            key: 'temp.heatsink[heatsinkTemperature.0]'
