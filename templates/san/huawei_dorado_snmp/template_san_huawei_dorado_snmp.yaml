zabbix_export:
  version: '8.0'
  template_groups:
    - uuid: 7c2cb727f85b492d88cd56e17127c64d
      name: Templates/SAN
  templates:
    - uuid: 521d864fe8574f19b350f7ddbe259042
      template: 'Huawei OceanStor Dorado by SNMP'
      name: 'Huawei OceanStor Dorado by SNMP'
      description: |
        This template is developed to monitor SAN Huawei OceanStor Dorado via the Zabbix SNMP agent.
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/418855-discussion-thread-for-official-zabbix-template-huawei-oceanstor
        
        Generated by official Zabbix template tool "Templator"
      wizard_ready: 'YES'
      readme: |
        ## setup:
        1. Create a host for Huawei OceanStor Dorado with the controller management IP as the SNMP interface.
        
        2. Link the template to the host.
        
        3. Customize macro values if needed.
        
        ## overview:
        This template is developed to monitor SAN Huawei OceanStor Dorado via the Zabbix SNMP agent.
      vendor:
        name: Zabbix
        version: 8.0-3
      groups:
        - name: Templates/SAN
      items:
        - uuid: b1b27fc308a643c080ca461aa43ac155
          name: 'BBU SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.5.5.1.1,1.3.6.1.4.1.34774.4.1.23.5.5.1.2,1.3.6.1.4.1.34774.4.1.23.5.5.1.3,1.3.6.1.4.1.34774.4.1.23.5.5.1.4]'
          key: huawei.dorado.bbu.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device backup battery units.'
          tags:
            - tag: component
              value: raw
        - uuid: 5966b59ae96c4044a2c53d84728aa385
          name: 'Capacity total'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.34774.4.1.1.5.0]'
          key: huawei.dorado.capacity.total
          units: B
          description: 'Total capacity of a device.'
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1048576'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: storage
        - uuid: 0bb56fda578e44b28dfaca63e37c6026
          name: 'Capacity used'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.34774.4.1.1.4.0]'
          key: huawei.dorado.capacity.used
          units: B
          description: 'Used capacity of a device.'
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '1048576'
          tags:
            - tag: component
              value: storage
        - uuid: 251875b1bf7f4aea800eebdf826c92cc
          name: 'Controller SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.5.2.1.1,1.3.6.1.4.1.34774.4.1.23.5.2.1.8,1.3.6.1.4.1.34774.4.1.23.5.2.1.9,1.3.6.1.4.1.34774.4.1.23.5.2.1.2,1.3.6.1.4.1.34774.4.1.23.5.2.1.3,1.3.6.1.4.1.34774.4.1.23.5.2.1.6]'
          key: huawei.dorado.controller.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device controllers.'
          tags:
            - tag: component
              value: raw
        - uuid: 502c0446b3ac4c7c91fb81076e8fded0
          name: 'Disk SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.5.1.1.1,1.3.6.1.4.1.34774.4.1.23.5.1.1.12,1.3.6.1.4.1.34774.4.1.23.5.1.1.4,1.3.6.1.4.1.34774.4.1.23.5.1.1.2,1.3.6.1.4.1.34774.4.1.23.5.1.1.3,1.3.6.1.4.1.34774.4.1.23.5.1.1.11]'
          key: huawei.dorado.disk.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device disks.'
          tags:
            - tag: component
              value: raw
        - uuid: dc3f094725ff4794844687d4037ea2c2
          name: 'Enclosure SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.5.6.1.2,1.3.6.1.4.1.34774.4.1.23.5.6.1.4,1.3.6.1.4.1.34774.4.1.23.5.6.1.5,1.3.6.1.4.1.34774.4.1.23.5.6.1.8]'
          key: huawei.dorado.enclosure.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device enclosures.'
          tags:
            - tag: component
              value: raw
        - uuid: fe922a88992f49f9a6bf4ed080c880d7
          name: 'Fan SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.5.4.1.1,1.3.6.1.4.1.34774.4.1.23.5.4.1.2,1.3.6.1.4.1.34774.4.1.23.5.4.1.3,1.3.6.1.4.1.34774.4.1.23.5.4.1.4]'
          key: huawei.dorado.fan.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device fans.'
          tags:
            - tag: component
              value: raw
        - uuid: 269a95fbb3ce4f1eb9dc684777875d87
          name: 'LUN SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.19.9.4.1.2,1.3.6.1.4.1.34774.4.1.19.9.4.1.11,1.3.6.1.4.1.34774.4.1.21.4.1.13,1.3.6.1.4.1.34774.4.1.21.4.1.15,1.3.6.1.4.1.34774.4.1.21.4.1.16,1.3.6.1.4.1.34774.4.1.21.4.1.3,1.3.6.1.4.1.34774.4.1.21.4.1.4,1.3.6.1.4.1.34774.4.1.21.4.1.5,1.3.6.1.4.1.34774.4.1.21.4.1.6,1.3.6.1.4.1.34774.4.1.21.4.1.7,1.3.6.1.4.1.34774.4.1.21.4.1.8,1.3.6.1.4.1.34774.4.1.19.9.4.1.5]'
          key: huawei.dorado.lun.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device logical unit numbers.'
          tags:
            - tag: component
              value: raw
        - uuid: 2170d4e5ca684e579dd511e59e5e9828
          name: 'Node SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.21.3.1.1,1.3.6.1.4.1.34774.4.1.21.3.1.2,1.3.6.1.4.1.34774.4.1.21.3.1.5,1.3.6.1.4.1.34774.4.1.21.3.1.6,1.3.6.1.4.1.34774.4.1.21.3.1.7,1.3.6.1.4.1.34774.4.1.21.3.1.8,1.3.6.1.4.1.34774.4.1.21.3.1.9,1.3.6.1.4.1.34774.4.1.21.3.1.10,1.3.6.1.4.1.34774.4.1.21.3.1.4]'
          key: huawei.dorado.node.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device nodes.'
          tags:
            - tag: component
              value: raw
        - uuid: 5daf9372f493406c818b27f5149dcff3
          name: 'Storage pool SNMP walk'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.4.1.34774.4.1.23.4.2.1.2,1.3.6.1.4.1.34774.4.1.23.4.2.1.14,1.3.6.1.4.1.34774.4.1.23.4.2.1.5,1.3.6.1.4.1.34774.4.1.23.4.2.1.6,1.3.6.1.4.1.34774.4.1.23.4.2.1.7,1.3.6.1.4.1.34774.4.1.23.4.2.1.9,1.3.6.1.4.1.34774.4.1.23.4.2.1.27]'
          key: huawei.dorado.pool.snmp.walk
          history: '0'
          value_type: TEXT
          description: 'Discovery of device storage pools.'
          tags:
            - tag: component
              value: raw
        - uuid: 4ad5a10227d74eaaaaf3678a6884b67d
          name: Status
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.34774.4.1.1.3.0]'
          key: huawei.dorado.status
          description: 'System status.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: health
            - tag: component
              value: system
        - uuid: 3ed972a612394bf285f816debcd8e89a
          name: Version
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.4.1.34774.4.1.1.6.0]'
          key: huawei.dorado.version
          value_type: CHAR
          description: 'The device version.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: eb140be38e9c4f51b105347ddffa6997
              expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.version,#1)<>last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.version,#2) and length(last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.version))>0'
              name: 'Huawei Dorado: Storage version has changed'
              event_name: 'Huawei Dorado: Version has changed (new version: {ITEM.VALUE})'
              priority: INFO
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 590714e7fb3f4d468c19385146f76433
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          description: |
            The host accessibility by ICMP ping.
            
            0 - ICMP ping fails;
            1 - ICMP ping successful.
          valuemap:
            name: 'Service state'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 914602a8433444a18ac0672f776b836e
              expression: 'max(/Huawei OceanStor Dorado by SNMP/icmpping,#3)=0'
              name: 'Huawei Dorado: Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout. Please check device connectivity.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 3bcc87c0fee74e64be9b66cc9080008e
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          value_type: FLOAT
          units: '%'
          description: 'The percentage of lost packets.'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 60f0ddb37f534c5baf4a7ad254d57ea7
              expression: 'min(/Huawei OceanStor Dorado by SNMP/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Huawei OceanStor Dorado by SNMP/icmppingloss,5m)<100'
              name: 'Huawei Dorado: High ICMP ping loss'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'ICMP packets loss detected.'
              dependencies:
                - name: 'Huawei Dorado: Unavailable by ICMP ping'
                  expression: 'max(/Huawei OceanStor Dorado by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 137b8177ba0b4949a895be9dde23400c
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          value_type: FLOAT
          units: s
          description: 'The ICMP ping response time (in seconds).'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 9af7c5ff0d974d0abb51cd483e46e537
              expression: 'avg(/Huawei OceanStor Dorado by SNMP/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'Huawei Dorado: High ICMP ping response time'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Average ICMP response time is too high.'
              dependencies:
                - name: 'Huawei Dorado: High ICMP ping loss'
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Huawei OceanStor Dorado by SNMP/icmppingloss,5m)<100'
                - name: 'Huawei Dorado: Unavailable by ICMP ping'
                  expression: 'max(/Huawei OceanStor Dorado by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 2959893b639d457abb18a2b7e9abda23
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: f80391019ebb4b18beb7a987c3a20830
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.4.0]'
          key: 'system.contact[sysContact.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person. If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: e7ddfe4774ad4ed7959d2e2200b50e8f
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.1.0]'
          key: 'system.descr[sysDescr.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 35b225e3dff343b0a0b82b8239d6bea3
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.25.1.1.0]'
          key: 'system.hw.uptime[hrSystemUptime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: f0fa4b45ea2b41d0b0f40630680fb532
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.6.0]'
          key: 'system.location[sysLocation.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            Physical location of the node (e.g., `equipment room`, `3rd floor`). If not provided, the value is a zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 494d880ba7be4d9fb641b148597f805d
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.5.0]'
          key: system.name
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name. If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 6beeaf5594eb46e183db9e725277e0b6
              expression: 'last(/Huawei OceanStor Dorado by SNMP/system.name,#1)<>last(/Huawei OceanStor Dorado by SNMP/system.name,#2) and length(last(/Huawei OceanStor Dorado by SNMP/system.name))>0'
              name: 'Huawei Dorado: System name has changed'
              event_name: 'Huawei Dorado: System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: 4371c836612f4456a6ce191af79a23a2
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.3.0]'
          key: 'system.net.uptime[sysUpTime.0]'
          delay: 30s
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            Time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 634f6b6a4e724c158ba4726f063a1684
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 'get[1.3.6.1.2.1.1.2.0]'
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity. This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 6816cad193a64edcbcf3f09d736eab9b
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible values:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 4c9c747fc91c493b9b35db7d1dcc1461
              expression: 'max(/Huawei OceanStor Dorado by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'Huawei Dorado: No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              dependencies:
                - name: 'Huawei Dorado: Unavailable by ICMP ping'
                  expression: 'max(/Huawei OceanStor Dorado by SNMP/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 362c06913f594e868ed1c8c90e29dfb3
          name: 'BBU discovery'
          type: DEPENDENT
          key: huawei.dorado.bbu.discovery
          description: 'Discovery of BBUs.'
          item_prototypes:
            - uuid: 1e9048a8d6884ad6a69af5a3d82e55b2
              name: 'BBU [{#ID}] on [{#LOCATION}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.bbu.health_status["{#ID}:{#LOCATION}"]'
              description: 'Health status of a BBU.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.5.1.3.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.bbu.snmp.walk
              tags:
                - tag: bbu
                  value: '{#ID}'
                - tag: component
                  value: health
                - tag: component
                  value: power
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: 0870e96a18244b1a856ed22109c30120
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.bbu.health_status["{#ID}:{#LOCATION}"])<>1'
                  name: 'Huawei Dorado: BBU [{#ID}] on [{#LOCATION}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: d426241b0e884e8d9b13a954435ba906
              name: 'BBU [{#ID}] on [{#LOCATION}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.bbu.running_status["{#ID}:{#LOCATION}"]'
              description: 'Running status of a BBU.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.5.1.4.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.bbu.snmp.walk
              tags:
                - tag: bbu
                  value: '{#ID}'
                - tag: component
                  value: health
                - tag: component
                  value: power
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: cd796c86d0784168864b50a3c710fe4a
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.bbu.running_status["{#ID}:{#LOCATION}"])<>27'
                  name: 'Huawei Dorado: BBU [{#ID}] on [{#LOCATION}]: Running status is not Online'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
          master_item:
            key: huawei.dorado.bbu.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#ID}'
                - 1.3.6.1.4.1.34774.4.1.23.5.5.1.1
                - '0'
                - '{#LOCATION}'
                - 1.3.6.1.4.1.34774.4.1.23.5.5.1.2
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 82033f0c72c1424eb606ad2cc9573015
          name: 'Controller discovery'
          type: DEPENDENT
          key: huawei.dorado.controller.discovery
          description: 'Discovery of controllers.'
          item_prototypes:
            - uuid: 6862050dda61467c9bb2f754441a7e75
              name: 'Controller [{#ID}]: CPU utilization'
              type: DEPENDENT
              key: 'huawei.dorado.controller.cpu["{#ID}"]'
              value_type: FLOAT
              units: '%'
              description: 'CPU utilization of the controller.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.2.1.8.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.controller.snmp.walk
              tags:
                - tag: component
                  value: cpu
                - tag: controller
                  value: '{#ID}'
              trigger_prototypes:
                - uuid: c24df0ffa9b04f22b0507abe1f600c61
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.cpu["{#ID}"],5m)>{$CPU.UTIL.CRIT}'
                  name: 'Huawei Dorado: Controller [{#ID}]: High CPU utilization'
                  event_name: 'Huawei Dorado: Controller [{#ID}]: High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
                  opdata: 'Current utilization: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'The CPU utilization is too high. The system might be slow to respond.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: ab427b8e87444481a6ab84630a1ff0f0
              name: 'Controller [{#ID}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.controller.health_status["{#ID}"]'
              description: 'Controller health status.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.2.1.2.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.controller.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: controller
                  value: '{#ID}'
              trigger_prototypes:
                - uuid: c9abbb0c329b4fdfba9e10cd2edacbc0
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.health_status["{#ID}"])<>1'
                  name: 'Huawei Dorado: Controller [{#ID}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 7e1f6c169dda4b7baed033a40c20a3f7
              name: 'Controller [{#ID}]: Memory utilization'
              type: DEPENDENT
              key: 'huawei.dorado.controller.memory["{#ID}"]'
              value_type: FLOAT
              units: '%'
              description: 'Memory utilization of the controller.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.2.1.9.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.controller.snmp.walk
              tags:
                - tag: component
                  value: memory
                - tag: controller
                  value: '{#ID}'
              trigger_prototypes:
                - uuid: 7c5da0319c4f47e3a96f6d088bb29627
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.memory["{#ID}"],{$HUAWEI.DORADO.MEM.MAX.TIME})>{$HUAWEI.DORADO.MEM.MAX.WARN}'
                  name: 'Huawei Dorado: Controller [{#ID}]: Memory usage is too high'
                  event_name: 'Huawei Dorado: Controller [{#ID}]: Memory usage is too high (over {$HUAWEI.DORADO.MEM.MAX.WARN} for {$HUAWEI.DORADO.MEM.MAX.TIME})'
                  opdata: 'Current memory usage: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: performance
            - uuid: 6de50a16225c43b9b1f9b36980e30ee8
              name: 'Controller [{#ID}]: Role'
              type: DEPENDENT
              key: 'huawei.dorado.controller.role["{#ID}"]'
              description: 'Controller role.'
              valuemap:
                name: 'Huawei storage: Controller role'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.2.1.6.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.controller.snmp.walk
              tags:
                - tag: component
                  value: system
                - tag: controller
                  value: '{#ID}'
              trigger_prototypes:
                - uuid: b0952e778f38497eb1ea54e64d036bdd
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.role["{#ID}"],#1)<>last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.role["{#ID}"],#2)'
                  name: 'Huawei Dorado: Controller [{#ID}]: Role has been changed'
                  opdata: 'Current role: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 935c5f5526a8456c941a1d8f2d5c6cb4
              name: 'Controller [{#ID}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.controller.running_status["{#ID}"]'
              description: 'Controller running status.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.2.1.3.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.controller.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: controller
                  value: '{#ID}'
              trigger_prototypes:
                - uuid: ecb968841d8e4a1781da9a095bd87582
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.controller.running_status["{#ID}"])<>27'
                  name: 'Huawei Dorado: Controller [{#ID}]: Running status is not Online'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: edfad14e047a49769c363c76f176e295
              name: 'Controller [{#ID}]: CPU utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.controller.cpu["{#ID}"]'
          master_item:
            key: huawei.dorado.controller.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#ID}'
                - 1.3.6.1.4.1.34774.4.1.23.5.2.1.1
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: a19ac722e1d846b5ab1458891e9146a3
          name: 'Disk discovery'
          type: DEPENDENT
          key: huawei.dorado.disk.discovery
          description: 'Discovery of disks.'
          item_prototypes:
            - uuid: fce3691a4029427b86d6475f45a562ba
              name: 'Disk [{#MODEL}] on [{#LOCATION}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.disk.health_status["{#ID}"]'
              description: 'Disk health status.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.1.1.2.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.disk.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: disk
                  value: '{#MODEL}'
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: 88bc0077cf754fe9beee20b00234ce9d
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.disk.health_status["{#ID}"])<>1'
                  name: 'Huawei Dorado: Disk [{#MODEL}] on [{#LOCATION}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 6462dd9890f9492399d39472eaca42e0
              name: 'Disk [{#MODEL}] on [{#LOCATION}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.disk.running_status["{#ID}"]'
              description: 'Disk running status.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.1.1.3.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.disk.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: disk
                  value: '{#MODEL}'
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: 568c21eb9f2744e183ab6dcd15493277
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.disk.running_status["{#ID}"])<>27'
                  name: 'Huawei Dorado: Disk [{#MODEL}] on [{#LOCATION}]: Running status is not Online'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
            - uuid: cd6759e70695454783dd7c0a68ed2739
              name: 'Disk [{#MODEL}] on [{#LOCATION}]: Temperature'
              type: DEPENDENT
              key: 'huawei.dorado.disk.temperature["{#ID}"]'
              units: °C
              description: 'Disk temperature.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.1.1.11.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.disk.snmp.walk
              tags:
                - tag: component
                  value: environment
                - tag: disk
                  value: '{#MODEL}'
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: aaf26be9ddff459692cd83187e66b5d4
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.disk.temperature["{#ID}"],{$HUAWEI.DORADO.DISK.TEMP.MAX.TIME})>{$HUAWEI.DORADO.DISK.TEMP.MAX.WARN:"{#MODEL}"}'
                  name: 'Huawei Dorado: Disk [{#MODEL}] on [{#LOCATION}]: Temperature is too high'
                  event_name: 'Huawei Dorado: Disk [{#MODEL}] on [{#LOCATION}]: Temperature is too high (over {$HUAWEI.DORADO.DISK.TEMP.MAX.WARN:"{#MODEL}"} for {$HUAWEI.DORADO.DISK.TEMP.MAX.TIME})'
                  opdata: 'Current value: {ITEM.LASTVALUE}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: notice
          master_item:
            key: huawei.dorado.disk.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#ID}'
                - 1.3.6.1.4.1.34774.4.1.23.5.1.1.1
                - '0'
                - '{#MODEL}'
                - 1.3.6.1.4.1.34774.4.1.23.5.1.1.12
                - '0'
                - '{#LOCATION}'
                - 1.3.6.1.4.1.34774.4.1.23.5.1.1.4
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: a4abd7c7f02a425a9fed40a9adbda88d
          name: 'Enclosure discovery'
          type: DEPENDENT
          key: huawei.dorado.enclosure.discovery
          description: 'Discovery of enclosures.'
          item_prototypes:
            - uuid: 7babf3c5b33b4a6096fb4dc30d0fb930
              name: 'Enclosure [{#NAME}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.enclosure.health_status["{#NAME}"]'
              description: 'Enclosure health status.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.6.1.4.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.enclosure.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: enclosure
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 2df422b9873044b58246384d439077e0
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.enclosure.health_status["{#NAME}"])<>1'
                  name: 'Huawei Dorado: Enclosure [{#NAME}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 7b084bb85c1c45cc951f798ef10cb749
              name: 'Enclosure [{#NAME}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.enclosure.running_status["{#NAME}"]'
              description: 'Enclosure running status.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.6.1.5.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.enclosure.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: enclosure
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 3878efb681404801b078e68d03c1f422
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.enclosure.running_status["{#NAME}"])<>27'
                  name: 'Huawei Dorado: Enclosure [{#NAME}]: Running status is not Online'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 67c17f51ee7e4ad696aa95b9d590c299
              name: 'Enclosure [{#NAME}]: Temperature'
              type: DEPENDENT
              key: 'huawei.dorado.enclosure.temperature["{#NAME}"]'
              units: °C
              description: 'Enclosure temperature.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.6.1.8.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.enclosure.snmp.walk
              tags:
                - tag: component
                  value: environment
                - tag: enclosure
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 84056bbf218a43ccbf6a3c94fff53973
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.enclosure.temperature["{#NAME}"],{$HUAWEI.DORADO.TEMP.MAX.TIME})>{$HUAWEI.DORADO.TEMP.MAX.WARN}'
                  name: 'Huawei Dorado: Enclosure [{#NAME}]: Temperature is too high'
                  event_name: 'Huawei Dorado: Enclosure [{#NAME}]: Temperature is too high (over {$HUAWEI.DORADO.TEMP.MAX.WARN} for {$HUAWEI.DORADO.TEMP.MAX.TIME})'
                  opdata: 'Current value: {ITEM.LASTVALUE}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: notice
          master_item:
            key: huawei.dorado.enclosure.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#NAME}'
                - 1.3.6.1.4.1.34774.4.1.23.5.6.1.2
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: a03f01844ebd4b44afd45614c7e5ed22
          name: 'Fan discovery'
          type: DEPENDENT
          key: huawei.dorado.fan.discovery
          description: 'Discovery of fans.'
          item_prototypes:
            - uuid: 4a08efa163e5448ab8d01e69535979a1
              name: 'Fan [{#ID}] on [{#LOCATION}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.fan.health_status["{#ID}:{#LOCATION}"]'
              description: 'Health status of a fan.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.4.1.3.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.fan.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: fan
                  value: '{#ID}'
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: 61b916bc59964edaab00fb2f7fba7bdb
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.fan.health_status["{#ID}:{#LOCATION}"])<>1'
                  name: 'Huawei Dorado: Fan [{#ID}] on [{#LOCATION}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 22c3254048bc4973a62069fe9ff35dab
              name: 'Fan [{#ID}] on [{#LOCATION}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.fan.running_status["{#ID}:{#LOCATION}"]'
              description: 'Operating status of a fan.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.5.4.1.4.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.fan.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: fan
                  value: '{#ID}'
                - tag: location
                  value: '{#LOCATION}'
              trigger_prototypes:
                - uuid: 6fbecb53cd334f65a8fba8d1ab0d9218
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.fan.running_status["{#ID}:{#LOCATION}"])<>2'
                  name: 'Huawei Dorado: Fan [{#ID}] on [{#LOCATION}]: Running status is not Running'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
          master_item:
            key: huawei.dorado.fan.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#ID}'
                - 1.3.6.1.4.1.34774.4.1.23.5.4.1.1
                - '0'
                - '{#LOCATION}'
                - 1.3.6.1.4.1.34774.4.1.23.5.4.1.2
                - '0'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 9ae2d586c6fd49dfa0e64bce7ed2f249
          name: 'LUN discovery'
          type: DEPENDENT
          key: huawei.dorado.lun.discovery
          description: 'Discovery of LUNs.'
          item_prototypes:
            - uuid: 3e6998def6124b32840002022139e540
              name: 'LUN [{#NAME}]: Read traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.bps.read["{#NAME}"]'
              units: Bps
              description: 'Current read bandwidth for the LUN.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.7.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: lun
                  value: '{#NAME}'
            - uuid: c43287cfec514dc1a5062b4acf6fa495
              name: 'LUN [{#NAME}]: Total traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.bps.total["{#NAME}"]'
              units: Bps
              description: 'Current total bandwidth for the LUN.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.6.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: lun
                  value: '{#NAME}'
            - uuid: c69a608ac519491cab8596fd4bfff1fb
              name: 'LUN [{#NAME}]: Write traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.bps.write["{#NAME}"]'
              units: Bps
              description: 'Current write bandwidth for the LUN.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.8.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: lun
                  value: '{#NAME}'
            - uuid: ec45b31280a2414d91ce7aa7fcf44615
              name: 'LUN [{#NAME}]: Capacity'
              type: DEPENDENT
              key: 'huawei.dorado.lun.capacity["{#NAME}"]'
              units: B
              description: 'Capacity of the LUN.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.19.9.4.1.5.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1024'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: lun
                  value: '{#NAME}'
            - uuid: e180a7a129a34ee3b8d2784cd892075b
              name: 'LUN [{#NAME}]: Read operations per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.iops.read["{#NAME}"]'
              units: '!iops'
              description: 'Read IOPS of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.4.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
            - uuid: 2353b672d2aa4a06804589419c5602e0
              name: 'LUN [{#NAME}]: Total I/O per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.iops.total["{#NAME}"]'
              units: '!iops'
              description: 'Current IOPS of the LUN.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.3.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
            - uuid: 21c76754695e4f09ae9907c6ca181fe7
              name: 'LUN [{#NAME}]: Write operations per second'
              type: DEPENDENT
              key: 'huawei.dorado.lun.iops.write["{#NAME}"]'
              units: '!iops'
              description: 'Write IOPS of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.5.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
            - uuid: 7cf0c90782b744a584e411bf3295a4fd
              name: 'LUN [{#NAME}]: Average read I/O latency'
              type: DEPENDENT
              key: 'huawei.dorado.lun.latency.read["{#NAME}"]'
              value_type: FLOAT
              units: s
              description: 'Average read I/O response time.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.15.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-6'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
            - uuid: beacd28febb1411ab77074fe5a344b3a
              name: 'LUN [{#NAME}]: Average total I/O latency'
              type: DEPENDENT
              key: 'huawei.dorado.lun.latency.total["{#NAME}"]'
              value_type: FLOAT
              units: s
              description: 'Average I/O latency of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.13.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-6'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 919c9c661e3f42dcba7cbceaebc05617
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.lun.latency.total["{#NAME}"],{$HUAWEI.DORADO.LUN.IO.TIME.MAX.TIME})>{$HUAWEI.DORADO.LUN.IO.TIME.MAX.WARN}'
                  name: 'Huawei Dorado: LUN [{#NAME}]: Average I/O response time is too high'
                  event_name: 'Huawei Dorado: LUN [{#NAME}]: Average I/O response time is too high (over {$HUAWEI.DORADO.LUN.IO.TIME.MAX.WARN}μs for {$HUAWEI.DORADO.LUN.IO.TIME.MAX.TIME})'
                  opdata: 'Current response time: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  tags:
                    - tag: scope
                      value: performance
            - uuid: 18edb1b0b27e4be4badf566ff6973dbb
              name: 'LUN [{#NAME}]: Average write I/O latency'
              type: DEPENDENT
              key: 'huawei.dorado.lun.latency.write["{#NAME}"]'
              value_type: FLOAT
              units: s
              description: 'Average write I/O response time.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.4.1.16.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-6'
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: lun
                  value: '{#NAME}'
            - uuid: e66dc4118b8043ca9be590ae1fc509ef
              name: 'LUN [{#NAME}]: Status'
              type: DEPENDENT
              key: 'huawei.dorado.lun.status["{#NAME}"]'
              description: 'Status of the LUN.'
              valuemap:
                name: 'Huawei storage: LUN status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.19.9.4.1.11.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.lun.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: lun
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 3ea80d4ef5294e9b86d9b500681b4816
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.lun.status["{#NAME}"])<>1'
                  name: 'Huawei Dorado: LUN [{#NAME}]: Status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: e6e60a64dc2540ab963a910ed4de7a51
              name: 'LUN [{#NAME}]: LUN I/O'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.iops.total["{#NAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.iops.read["{#NAME}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.iops.write["{#NAME}"]'
            - uuid: 46bdcee9618d4074b3ac6367146951a5
              name: 'LUN [{#NAME}]: LUN I/O latency'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.latency.total["{#NAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.latency.read["{#NAME}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.latency.write["{#NAME}"]'
            - uuid: 2ac150dce55249e3951edf46eb1cb0df
              name: 'LUN [{#NAME}]: LUN traffic'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.bps.total["{#NAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.bps.read["{#NAME}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.lun.bps.write["{#NAME}"]'
          master_item:
            key: huawei.dorado.lun.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#NAME}'
                - 1.3.6.1.4.1.34774.4.1.19.9.4.1.2
                - '0'
        - uuid: f7fad4cdd7e74a449318e31900c58dbb
          name: 'Node performance discovery'
          type: DEPENDENT
          key: huawei.dorado.node.discovery
          description: 'Discovery of node performance counters.'
          item_prototypes:
            - uuid: f95b67c8d5d34f9da3ed1491c353b33b
              name: 'Node [{#NODE}]: Read traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.bps.read["{#NODE}"]'
              units: Bps
              description: 'Read bandwidth for the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.9.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: node
                  value: '{#NODE}'
            - uuid: 1f3bb492970b4027884b92b505629c6e
              name: 'Node [{#NODE}]: Total traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.bps.total["{#NODE}"]'
              units: Bps
              description: 'Total bandwidth for the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.8.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: node
                  value: '{#NODE}'
            - uuid: af7c068d5134442bb09b38c767cbc631
              name: 'Node [{#NODE}]: Write traffic per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.bps.write["{#NODE}"]'
              units: Bps
              description: 'Write bandwidth for the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.10.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: node
                  value: '{#NODE}'
            - uuid: e853a21f897346e0a1756dad24ac1283
              name: 'Node [{#NODE}]: CPU utilization'
              type: DEPENDENT
              key: 'huawei.dorado.node.cpu["{#NODE}"]'
              value_type: FLOAT
              units: '%'
              description: 'CPU utilization of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.2.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: cpu
                - tag: node
                  value: '{#NODE}'
              trigger_prototypes:
                - uuid: c72396c32e084414baadfb348d3a1cea
                  expression: 'min(/Huawei OceanStor Dorado by SNMP/huawei.dorado.node.cpu["{#NODE}"],5m)>{$CPU.UTIL.CRIT}'
                  name: 'Huawei Dorado: Node [{#NODE}]: High CPU utilization'
                  event_name: 'Huawei Dorado: Node [{#NODE}]: High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
                  opdata: 'Current utilization: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'The CPU utilization is too high. The system might be slow to respond.'
                  tags:
                    - tag: scope
                      value: performance
            - uuid: d15b0dc04b75487285b131f7740063d7
              name: 'Node [{#NODE}]: Average latency'
              type: DEPENDENT
              key: 'huawei.dorado.node.delay["{#NODE}"]'
              value_type: FLOAT
              units: s
              description: 'Average I/O latency of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.4.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-6'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: network
                - tag: node
                  value: '{#NODE}'
            - uuid: c71f8355bde14dceb229fba492b9ac91
              name: 'Node [{#NODE}]: Read operations per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.iops.read["{#NODE}"]'
              units: '!iops'
              description: 'Read IOPS of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.6.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: node
                  value: '{#NODE}'
            - uuid: 51439886809745208877caa660a5e953
              name: 'Node [{#NODE}]: Total I/O per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.iops.total["{#NODE}"]'
              units: '!iops'
              description: 'Total IOPS of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.5.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: node
                  value: '{#NODE}'
            - uuid: fd9755ff4ef346c1a6e3ce43891fd6eb
              name: 'Node [{#NODE}]: Write operations per second'
              type: DEPENDENT
              key: 'huawei.dorado.node.iops.write["{#NODE}"]'
              units: '!iops'
              description: 'Write IOPS of the node.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.21.3.1.7.{#SNMPINDEX}'
                    - '0'
              master_item:
                key: huawei.dorado.node.snmp.walk
              tags:
                - tag: component
                  value: operations
                - tag: node
                  value: '{#NODE}'
          graph_prototypes:
            - uuid: 26e44f9399fd4d1f8504d8cbccab3a56
              name: 'Node [{#NODE}]: CPU utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.cpu["{#NODE}"]'
            - uuid: 5909816dcac74dd492cde0b964ac0705
              name: 'Node [{#NODE}]: Node I/O'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.iops.total["{#NODE}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.iops.read["{#NODE}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.iops.write["{#NODE}"]'
            - uuid: d69a0f1bf42a4fe6bdcd4bb10318effb
              name: 'Node [{#NODE}]: Node traffic'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.bps.total["{#NODE}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.bps.read["{#NODE}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.node.bps.write["{#NODE}"]'
          master_item:
            key: huawei.dorado.node.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#NODE}'
                - 1.3.6.1.4.1.34774.4.1.21.3.1.1
                - '0'
                - '{#NODE.DELAY}'
                - 1.3.6.1.4.1.34774.4.1.21.3.1.4
                - '0'
          overrides:
            - name: 'V700 specific, node delay'
              step: '1'
              filter:
                conditions:
                  - macro: '{#NODE.DELAY}'
                    operator: NOT_EXISTS
              operations:
                - operator: LIKE
                  value: 'Average latency'
                  discover: NO_DISCOVER
        - uuid: eb0e35cdc3014b3898ad5a6720715ce6
          name: 'Storage pool discovery'
          type: DEPENDENT
          key: huawei.dorado.pool.discovery
          description: 'Discovery of storage pools.'
          item_prototypes:
            - uuid: a3c342459f1c4c6dbdb58ff48efd1d9b
              name: 'Storage pool [{#NAME}]: Capacity free'
              type: DEPENDENT
              key: 'huawei.dorado.pool.capacity.free["{#NAME}"]'
              units: B
              description: 'Available capacity of a storage pool.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.4.2.1.9.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.pool.snmp.walk
              tags:
                - tag: component
                  value: storage
                - tag: pool
                  value: '{#NAME}'
            - uuid: 15d4e63a8295458cb17f873bff59791f
              name: 'Storage pool [{#NAME}]: Capacity total'
              type: DEPENDENT
              key: 'huawei.dorado.pool.capacity.total["{#NAME}"]'
              units: B
              description: 'Total capacity of a storage pool.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.4.2.1.7.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.pool.snmp.walk
              tags:
                - tag: component
                  value: storage
                - tag: pool
                  value: '{#NAME}'
            - uuid: 50f34df052df497db7bdcfb489619b5f
              name: 'Storage pool [{#NAME}]: Capacity used'
              type: DEPENDENT
              key: 'huawei.dorado.pool.capacity.used["{#NAME}"]'
              units: B
              description: 'Used capacity of a storage pool.'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.4.2.1.27.{#SNMPINDEX}'
                    - '0'
                - type: MULTIPLIER
                  parameters:
                    - '1048576'
              master_item:
                key: huawei.dorado.pool.snmp.walk
              tags:
                - tag: component
                  value: storage
                - tag: pool
                  value: '{#NAME}'
            - uuid: 1fea3b68249e475c97ff7e14645d5fda
              name: 'Storage pool [{#NAME}]: Health status'
              type: DEPENDENT
              key: 'huawei.dorado.pool.health_status["{#NAME}"]'
              description: 'Health status of a storage pool.'
              valuemap:
                name: 'Huawei storage: Health status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.4.2.1.5.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.pool.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: pool
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 86016fd601704dd6943e952aa5f4bff6
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.pool.health_status["{#NAME}"])<>1'
                  name: 'Huawei Dorado: Storage pool [{#NAME}]: Health status is not Normal'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 5d4c872c88864dcd9e19ea603914f8fb
              name: 'Storage pool [{#NAME}]: Running status'
              type: DEPENDENT
              key: 'huawei.dorado.pool.running_status["{#NAME}"]'
              description: 'Operating status of a storage pool.'
              valuemap:
                name: 'Huawei storage: Running status'
              preprocessing:
                - type: SNMP_WALK_VALUE
                  parameters:
                    - '1.3.6.1.4.1.34774.4.1.23.4.2.1.6.{#SNMPINDEX}'
                    - '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: huawei.dorado.pool.snmp.walk
              tags:
                - tag: component
                  value: health
                - tag: pool
                  value: '{#NAME}'
              trigger_prototypes:
                - uuid: 462a2775a1c144eb9854bccab7d38ca0
                  expression: 'last(/Huawei OceanStor Dorado by SNMP/huawei.dorado.pool.running_status["{#NAME}"])<>27'
                  name: 'Huawei Dorado: Storage pool [{#NAME}]: Running status is not Online'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
          graph_prototypes:
            - uuid: 7c57d0ba8e4144ba903104648709590e
              name: 'Storage pool [{#NAME}]: Capacity'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.pool.capacity.total["{#NAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.pool.capacity.free["{#NAME}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Huawei OceanStor Dorado by SNMP'
                    key: 'huawei.dorado.pool.capacity.used["{#NAME}"]'
          master_item:
            key: huawei.dorado.pool.snmp.walk
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#NAME}'
                - 1.3.6.1.4.1.34774.4.1.23.4.2.1.2
                - '0'
                - '{#POOL.USED.CAPACITY}'
                - 1.3.6.1.4.1.34774.4.1.23.4.2.1.27
                - '0'
          overrides:
            - name: 'V700 specific, pool used capacity'
              step: '1'
              filter:
                conditions:
                  - macro: '{#POOL.USED.CAPACITY}'
                    operator: NOT_EXISTS
              operations:
                - operator: LIKE
                  value: 'Capacity used'
                  discover: NO_DISCOVER
      tags:
        - tag: class
          value: hardware
        - tag: class
          value: storage
        - tag: subclass
          value: server
        - tag: target
          value: huawei
        - tag: target
          value: huawei-oceanstor-dorado
      macros:
        - macro: '{$CPU.UTIL.CRIT}'
          value: '90'
          description: 'The critical threshold of CPU utilization expressed in %.'
          config:
            type: TEXT
            priority: '1'
            section_name: Thresholds
            label: 'CPU utilization critical threshold'
            description: 'The critical threshold of CPU utilization expressed in %. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$HUAWEI.DORADO.DISK.TEMP.MAX.TIME}'
          value: 5m
          description: 'The time during which the disk temperature may exceed the threshold.'
          config:
            type: TEXT
            priority: '7'
            section_name: Thresholds
            label: 'Disk temperature threshold duration'
            description: 'The time during which the disk temperature may exceed the threshold.'
        - macro: '{$HUAWEI.DORADO.DISK.TEMP.MAX.WARN}'
          value: '45'
          description: 'Maximum disk temperature. Can be used with `{#MODEL}` as context.'
          config:
            type: TEXT
            priority: '6'
            section_name: Thresholds
            label: 'Disk temperature warning threshold'
            description: 'The warning threshold of disk temperature.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$HUAWEI.DORADO.LUN.IO.TIME.MAX.TIME}'
          value: 5m
          description: 'The time during which the average I/O response time of a LUN may exceed the threshold.'
          config:
            type: TEXT
            priority: '9'
            section_name: Thresholds
            label: 'LUN I/O response time threshold duration'
            description: 'The time during which the average I/O response time of a LUN may exceed the threshold.'
        - macro: '{$HUAWEI.DORADO.LUN.IO.TIME.MAX.WARN}'
          value: '0.0001'
          description: 'Maximum average I/O response time of a LUN in seconds.'
          config:
            type: TEXT
            priority: '8'
            section_name: Thresholds
            label: 'LUN maximum I/O response time'
            description: 'Maximum average I/O response time of a LUN in seconds.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$HUAWEI.DORADO.MEM.MAX.TIME}'
          value: 5m
          description: 'The time during which memory usage may exceed the threshold.'
          config:
            type: TEXT
            priority: '3'
            section_name: Thresholds
            label: 'Memory utilization threshold duration'
            description: 'The time during which memory usage may exceed the threshold.'
        - macro: '{$HUAWEI.DORADO.MEM.MAX.WARN}'
          value: '90'
          description: 'Maximum percentage of memory used.'
          config:
            type: TEXT
            priority: '2'
            section_name: Thresholds
            label: 'Memory utilization critical threshold'
            description: 'The critical threshold of memory utilization expressed in %. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$HUAWEI.DORADO.TEMP.MAX.TIME}'
          value: 3m
          description: 'The time during which the enclosure temperature may exceed the threshold.'
          config:
            type: TEXT
            priority: '5'
            section_name: Thresholds
            label: 'Enclosure temperature threshold duration'
            description: 'The time during which the enclosure temperature may exceed the threshold.'
        - macro: '{$HUAWEI.DORADO.TEMP.MAX.WARN}'
          value: '35'
          description: 'Maximum enclosure temperature.'
          config:
            type: TEXT
            priority: '4'
            section_name: Thresholds
            label: 'Enclosure temperature warning threshold'
            description: 'The warning threshold of enclosure temperature.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$ICMP_LOSS_WARN}'
          value: '20'
          description: 'Warning threshold of ICMP packet loss in %.'
          config:
            type: TEXT
            priority: '11'
            section_name: Thresholds
            label: 'Threshold of ICMP packet loss'
            description: 'Warning threshold of ICMP packet loss in %. In the range from 0 to 100 inclusive.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
          description: 'Warning threshold of the average ICMP response time in seconds.'
          config:
            type: TEXT
            priority: '12'
            section_name: Thresholds
            label: 'Threshold of the average ICMP response'
            description: 'Warning threshold of the average ICMP response time in seconds. No less than 0.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
          description: 'Time interval for the SNMP availability trigger.'
          config:
            type: TEXT
            priority: '10'
            section_name: Other
            label: 'Time interval'
            description: 'Time interval for the SNMP availability trigger.'
      dashboards:
        - uuid: 7660a71516b84b47b104ab4f976a13ef
          name: Overview
          pages:
            - name: 'Capacity total'
              widgets:
                - type: graph
                  name: 'Capacity total'
                  width: '72'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: Capacity
                    - type: STRING
                      name: reference
                      value: EFDAA
            - name: 'CPU utilization'
              widgets:
                - type: graphprototype
                  name: 'Controller [{#ID}]: CPU utilization'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'Controller [{#ID}]: CPU utilization'
                    - type: STRING
                      name: reference
                      value: FCBEC
                - type: graphprototype
                  name: 'Node [{#NODE}]: CPU utilization'
                  'y': '4'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'Node [{#NODE}]: CPU utilization'
                    - type: STRING
                      name: reference
                      value: EABAA
            - name: Node
              widgets:
                - type: graphprototype
                  name: 'Node [{#NODE}]: Node I/O'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'Node [{#NODE}]: Node I/O'
                    - type: STRING
                      name: reference
                      value: CEFEF
                - type: graphprototype
                  name: 'Node [{#NODE}]: Node traffic'
                  'y': '4'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'Node [{#NODE}]: Node traffic'
                    - type: STRING
                      name: reference
                      value: DEEEA
            - name: Lun
              widgets:
                - type: graphprototype
                  name: 'LUN [{#NAME}]: LUN I/O'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'LUN [{#NAME}]: LUN I/O'
                    - type: STRING
                      name: reference
                      value: BCFDA
                - type: graphprototype
                  name: 'LUN [{#NAME}]: LUN traffic'
                  'y': '4'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid.0
                      value:
                        host: 'Huawei OceanStor Dorado by SNMP'
                        name: 'LUN [{#NAME}]: LUN traffic'
                    - type: STRING
                      name: reference
                      value: CFFDA
      valuemaps:
        - uuid: 98ea0c82a56a434ea9cd02ddb31eef6a
          name: 'Huawei storage: Controller role'
          mappings:
            - value: '0'
              newvalue: Normal
            - value: '1'
              newvalue: Master
            - value: '2'
              newvalue: Slave
        - uuid: 7ef6825cca084ab9a3250448596fac32
          name: 'Huawei storage: Health status'
          mappings:
            - value: '0'
              newvalue: Undefined
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Fault
            - value: '3'
              newvalue: Pre-fail
            - value: '4'
              newvalue: 'Partially broken'
            - value: '5'
              newvalue: Degraded
            - value: '6'
              newvalue: 'Bad sectors found'
            - value: '7'
              newvalue: 'Bit errors found'
            - value: '8'
              newvalue: Consistent
            - value: '9'
              newvalue: Inconsistent
            - value: '10'
              newvalue: Busy
            - value: '11'
              newvalue: 'No input'
            - value: '12'
              newvalue: 'Low battery'
            - value: '13'
              newvalue: 'Single link fault'
            - value: '14'
              newvalue: Invalid
            - value: '15'
              newvalue: 'Write protect'
        - uuid: 654d5d768ff041c6abc0a438be5698f4
          name: 'Huawei storage: LUN status'
          mappings:
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Faulty
            - value: '3'
              newvalue: Unformatted
            - value: '4'
              newvalue: Formatting
        - uuid: e03d03289e84401b8c7e2ba1ddc67ba7
          name: 'Huawei storage: Running status'
          mappings:
            - value: '0'
              newvalue: Undefined
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: Running
            - value: '3'
              newvalue: 'Not running'
            - value: '4'
              newvalue: 'Not existed'
            - value: '5'
              newvalue: 'Sleep in high temperature'
            - value: '6'
              newvalue: Starting
            - value: '7'
              newvalue: 'Power failure protection'
            - value: '8'
              newvalue: 'Spin down'
            - value: '9'
              newvalue: Started
            - value: '10'
              newvalue: 'Link Up'
            - value: '11'
              newvalue: 'Link Down'
            - value: '12'
              newvalue: 'Powering on'
            - value: '13'
              newvalue: 'Powered off'
            - value: '14'
              newvalue: Pre-copy
            - value: '15'
              newvalue: Copyback
            - value: '16'
              newvalue: Reconstruction
            - value: '17'
              newvalue: Expansion
            - value: '18'
              newvalue: Unformatted
            - value: '19'
              newvalue: Formatting
            - value: '20'
              newvalue: Unmapped
            - value: '21'
              newvalue: 'Initial synchronizing'
            - value: '22'
              newvalue: Consistent
            - value: '23'
              newvalue: Synchronizing
            - value: '24'
              newvalue: Synchronized
            - value: '25'
              newvalue: Unsynchronized
            - value: '26'
              newvalue: Split
            - value: '27'
              newvalue: Online
            - value: '28'
              newvalue: Offline
            - value: '29'
              newvalue: Locked
            - value: '30'
              newvalue: Enabled
            - value: '31'
              newvalue: Disabled
            - value: '32'
              newvalue: Balancing
            - value: '33'
              newvalue: 'To be recovered'
            - value: '34'
              newvalue: Interrupted
            - value: '35'
              newvalue: Invalid
            - value: '36'
              newvalue: 'Not start'
            - value: '37'
              newvalue: Queuing
            - value: '38'
              newvalue: Stopped
            - value: '39'
              newvalue: Copying
            - value: '40'
              newvalue: Completed
            - value: '41'
              newvalue: Paused
            - value: '42'
              newvalue: 'Reverse synchronizing'
            - value: '43'
              newvalue: Activated
            - value: '44'
              newvalue: Restore
            - value: '45'
              newvalue: Inactive
            - value: '46'
              newvalue: Idle
            - value: '47'
              newvalue: 'Powering off'
            - value: '48'
              newvalue: Charging
            - value: '49'
              newvalue: 'Charging completed'
            - value: '50'
              newvalue: Discharging
            - value: '51'
              newvalue: Upgrading
            - value: '52'
              newvalue: 'Power Lost'
            - value: '53'
              newvalue: Initializing
            - value: '54'
              newvalue: 'Apply change'
            - value: '55'
              newvalue: 'Online disable'
            - value: '56'
              newvalue: 'Offline disable'
            - value: '57'
              newvalue: 'Online frozen'
            - value: '58'
              newvalue: 'Offline frozen'
            - value: '59'
              newvalue: Closed
            - value: '60'
              newvalue: Removing
            - value: '61'
              newvalue: 'In service'
            - value: '62'
              newvalue: 'Out of service'
            - value: '63'
              newvalue: 'Running normal'
            - value: '64'
              newvalue: 'Running fail'
            - value: '65'
              newvalue: 'Running success'
            - value: '66'
              newvalue: 'Running success'
            - value: '67'
              newvalue: 'Running failed'
            - value: '68'
              newvalue: Waiting
            - value: '69'
              newvalue: Canceling
            - value: '70'
              newvalue: Canceled
            - value: '71'
              newvalue: 'About to synchronize'
            - value: '72'
              newvalue: 'Synchronizing data'
            - value: '73'
              newvalue: 'Failed to synchronize'
            - value: '74'
              newvalue: Fault
            - value: '75'
              newvalue: Migrating
            - value: '76'
              newvalue: Migrated
            - value: '77'
              newvalue: Activating
            - value: '78'
              newvalue: Deactivating
            - value: '79'
              newvalue: 'Start failed'
            - value: '80'
              newvalue: 'Stop failed'
            - value: '81'
              newvalue: Decommissioning
            - value: '82'
              newvalue: Decommissioned
            - value: '83'
              newvalue: Recommissioning
            - value: '84'
              newvalue: 'Replacing node'
            - value: '85'
              newvalue: Scheduling
            - value: '86'
              newvalue: Pausing
            - value: '87'
              newvalue: Suspending
            - value: '88'
              newvalue: Suspended
            - value: '89'
              newvalue: Overload
            - value: '90'
              newvalue: 'To be switch'
            - value: '91'
              newvalue: Switching
            - value: '92'
              newvalue: 'To be cleanup'
            - value: '93'
              newvalue: 'Forced start'
            - value: '94'
              newvalue: Error
            - value: '95'
              newvalue: 'Job completed'
            - value: '96'
              newvalue: 'Partition Migrating'
            - value: '97'
              newvalue: Mount
            - value: '98'
              newvalue: Umount
            - value: '99'
              newvalue: INSTALLING
            - value: '100'
              newvalue: 'To Be Synchronized'
            - value: '101'
              newvalue: Connecting
            - value: '102'
              newvalue: 'Service Switching'
            - value: '103'
              newvalue: 'Power-on failed'
            - value: '104'
              newvalue: REPAIRING
            - value: '105'
              newvalue: abnormal
            - value: '106'
              newvalue: Deleting
            - value: '107'
              newvalue: Modifying
            - value: '108'
              newvalue: 'Running(clearing data)'
            - value: '109'
              newvalue: 'Running(synchronizing data)'
        - uuid: f8cf9fe95cc54dcba96d4bfe8d8ec34b
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
        - uuid: da38017b841a4c17adff896fe2cbc9fe
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: 41d6237c6623468ba232930318f7a335
      expression: '(last(/Huawei OceanStor Dorado by SNMP/system.hw.uptime[hrSystemUptime.0])>0 and last(/Huawei OceanStor Dorado by SNMP/system.hw.uptime[hrSystemUptime.0])<10m) or (last(/Huawei OceanStor Dorado by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/Huawei OceanStor Dorado by SNMP/system.net.uptime[sysUpTime.0])<10m)'
      name: 'Huawei Dorado: Host has been restarted'
      event_name: 'Huawei Dorado: {HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'Huawei Dorado: No SNMP data collection'
          expression: 'max(/Huawei OceanStor Dorado by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: b4c9351df38148929d02371a49b751e4
      name: Capacity
      graph_items:
        - color: 199C0D
          item:
            host: 'Huawei OceanStor Dorado by SNMP'
            key: huawei.dorado.capacity.total
        - sortorder: '1'
          color: F63100
          item:
            host: 'Huawei OceanStor Dorado by SNMP'
            key: huawei.dorado.capacity.used
