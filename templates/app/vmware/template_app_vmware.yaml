zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  host_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Applications
  templates:
    - uuid: 56079badd056419383cc26e6a4fcc7e0
      template: VMware
      name: VMware
      description: |
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/
        
        Note: To enable discovery of hardware sensors of VMware Hypervisors, set the macro '{$VMWARE.HV.SENSOR.DISCOVERY}' to the value 'true' on the discovered host level.
        
        Note: To create custom performance counter see documentation: https://www.zabbix.com/documentation/7.2/manual/vm_monitoring/vmware_keys#footnotes
        
        Note: To get all supported counters and generate path for custom performance counter see documentation: https://www.zabbix.com/documentation/7.2/manual/appendix/items/perf_counters
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: Templates/Applications
      items:
        - uuid: 5a0c711cae454f0e92a492dd1718101f
          name: 'Get alarms'
          type: SIMPLE
          key: 'vmware.alarms.get[{$VMWARE.URL}]'
          history: '0'
          value_type: TEXT
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Get alarm status.'
          tags:
            - tag: component
              value: raw
        - uuid: 5ce209f4d94f460488a74a92a52d92b1
          name: 'Event log'
          type: SIMPLE
          key: 'vmware.eventlog[{$VMWARE.URL},skip]'
          value_type: LOG
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Collect VMware event log. See also: https://www.zabbix.com/documentation/7.4/manual/config/items/preprocessing/examples#filtering_vmware_event_log_records'
          tags:
            - tag: component
              value: log
        - uuid: ee2edadb8ce943ef81d25dbbba8667a4
          name: 'Full name'
          type: SIMPLE
          key: 'vmware.fullname[{$VMWARE.URL}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware service full name.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: 91756015645746e68b3f85b4cd1b5abd
          name: 'Overall Health VC State error check'
          type: DEPENDENT
          key: vmware.health.check
          value_type: CHAR
          description: 'Data collection error check.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: vmware.health.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: a11ed3829afb48fb99b9feb2dab4a45d
              expression: length(last(/VMware/vmware.health.check))>0
              name: 'VMware: Failed to get Overall Health VC State'
              opdata: 'Current error: {ITEM.LASTVALUE}'
              priority: WARNING
              description: 'Failed to get data. Check debug log for more information.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 889333d3225147e1b1604119050a121f
          name: 'Get Overall Health VC State'
          type: SCRIPT
          key: vmware.health.get
          history: '0'
          value_type: TEXT
          params: |
            var Vcenter = {
            	 params: {},
            	 vmware_api_session_id: '',
            	 health_status: '',
            	 error_msg: '',
            
            	 setParams: function (params) {
            		  ['url', 'username', 'password'].forEach(function (field) {
            			  if (typeof params !== 'object' || typeof params[field] === 'undefined' || params[field] === '') {
            				  throw 'Required param is not set: ' + field + '.';
            			  }
            		  });
            
            		  if (params['url'].endsWith('/')) {
            			   params['url'] = params['url'].slice(0,-1);
            		  }
            		  params['url'] = params['url'].replace('/sdk','');
            
            		  Vcenter.params = params;
            	 },
            
            	 isGtOrEqVersion: function (first_version, second_version) {
            		  var first = first_version.split('.').map(Number),
            			  second = second_version.split('.').map(Number);
            
            		  if (first.length > second.length) {
            			  const max_componens_length = first.length
            		  }
            		  else {
            			  const max_componens_length = second.length
            		  }
            
            		  var num_components = first.length;
            		  while (num_components < max_componens_length) {
            			  first.push(0);
            			  num_components = num_components +1;
            		  }
            
            		  var num_components = second.length;
            		  while (num_components < max_componens_length) {
            			  second.push(0);
            			  num_components = num_components +1;
            		  }
            
            		  if (first[0] > second[0] ||
            			  (first[0] === second[0] && first[1] > second[1]) ||
            			  (first[0] === second[0] && first[1] === second[1] && first[2] >= second[2])) {
            			  return true;
            		  }
            
            		  return false;
            	  },
            
            	 login: function () {
            		  var response, request = new HttpRequest();
            		  request.setHttpAuth(HTTPAUTH_BASIC, Vcenter.params.username, Vcenter.params.password);
            		  request.addHeader('Accept: application/json');
            		  request.addHeader('Content-Type: application/json');
            
            		  response = request.post(Vcenter.params.url + '/api/session', '');
            		  if (request.getStatus() >= 200 && request.getStatus() < 300 && (!JSON.parse(response).error)) {
            			   Vcenter.vmware_api_session_id = Vcenter.removeQuotes(response);
            			   return true;
            		  }
            
            		  response = request.post(Vcenter.params.url + '/rest/com/vmware/cis/session', '');
            		  if (request.getStatus() >= 200 && request.getStatus() < 300) {
            			   Vcenter.vmware_api_session_id = JSON.parse(response).value;
            			   return true;
            		  }
            
            		  return false;
            	 },
            
            	 logout: function () {
            		  path = '/rest/com/vmware/cis/session';
            		  if (Vcenter.vmware_api_version && Vcenter.isGtOrEqVersion(Vcenter.vmware_api_version, '7.0.2')) {
            			   path = '/api/session';
            		  }
            
            		  Vcenter.request(Vcenter.params.url + path, 'delete');
            	 },
            
            	 get_version: function () {
            		  path = '/rest/appliance/system/version';
            
            		  try {
            			   Vcenter.vmware_api_version = Vcenter.request(Vcenter.params.url + path, 'get').version;
            			   return true;
            		  }
            		  catch (error) {
            			   return false;
            		  }
            	 },
            
            	 removeQuotes: function (str){
            		  if (str.startsWith('"') && str.endsWith('"')) {
            			  return str.slice(1, -1);
            		  }
            
            		  return str;
            	 },
            
            	 getHealthStatus: function () {
            		  path = '/api/appliance/health/system';
            		  if (!Vcenter.isGtOrEqVersion(Vcenter.vmware_api_version, '7.0.2')) {
            			   path = '/rest/appliance/health/system';
            		  }
            
            		  result = Vcenter.removeQuotes(Vcenter.request(Vcenter.params.url + path, 'get'));
            
            		  const idx = [
            			   'green',
            			   'yellow',
            			   'orange',
            			   'red',
            			   'gray'
            			   ].indexOf(result.toLowerCase());
            		  Vcenter.health_status = idx !== -1 ? idx : 5;
            	 },
            
            	 request: function (url, method) {
            		  var response, request = new HttpRequest();
            
            		  if (typeof Vcenter.params.proxy !== 'undefined' && Vcenter.params.proxy !== '') {
            			   request.setProxy(Vcenter.params.proxy);
            		  }
            
            		  request.setHttpAuth(HTTPAUTH_NONE);
            		  request.addHeader("Cookie: vmware-api-session-id=" + Vcenter.vmware_api_session_id);
            
            		  Zabbix.log(4, '[ VMware vCenter ] Sending request: ' + url);
            
            		  switch (method) {
            			   case 'get':
            				   response = request.get(url);
            				   break;
            
            			   case 'post':
            				   response = request.post(url);
            				   break;
            
            			   case 'delete':
            					response = request.delete(url);
            					break;
            
            			   default:
            				   throw 'Unsupported HTTP request method: ' + method;
            		  }
            
            		  Zabbix.log(4, '[ VMware vCenter ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		  if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			   throw 'Cannot connect to VMware vCenter. Check debug log for more information.';
            		  }
            
            		  if (method !== 'delete' && JSON.parse(response).value) {
            			   return JSON.parse(response).value;
            		  }
            		  else {
            			   return response;
            		  }
            	 }
            };
            
            try {
            	 Vcenter.setParams(JSON.parse(value));
            	 
            	 if (Vcenter.login() && Vcenter.get_version() && Vcenter.isGtOrEqVersion(Vcenter.vmware_api_version, '6.5.0')) {
            		  Vcenter.getHealthStatus();
            	 }
            	 else {
            		  Vcenter.health_status = 6;
            	 }
            
            	 if (Vcenter.vmware_api_session_id) {
            		  Vcenter.logout();
            	 }
            }
            catch (error) {
            	 Zabbix.log(3, '[ VMware vCenter ] ERROR: ' + error);
            	 Vcenter.error_msg = 'Failed to get data from API:' + error;
            }
            
            return JSON.stringify({'health': Vcenter.health_status, 'error': Vcenter.error_msg});
          description: 'Gets overall health of the system. This item works only with VMware vCenter versions above 6.5.'
          timeout: '10'
          parameters:
            - name: password
              value: '{$VMWARE.PASSWORD}'
            - name: proxy
              value: '{$VMWARE.PROXY}'
            - name: url
              value: '{$VMWARE.URL}'
            - name: username
              value: '{$VMWARE.USERNAME}'
          tags:
            - tag: component
              value: raw
        - uuid: 2d18e0c8b8284c1bafd4bd131dcb640d
          name: 'Overall Health VC State'
          type: DEPENDENT
          key: vmware.health.state
          description: |
            VMware Overall health of system. One of the following:
            - Gray: No health data is available for this service.
            - Green: Service is healthy.
            - Yellow: The service is in a healthy state, but experiencing some level of problems.
            - Orange: The service health is degraded. The service might have serious problems.
            - Red: The service is unavailable, not functioning properly, or will stop functioning soon.
            - Not available: The health status is unavailable (not supported on the vCenter or ESXi side).
          valuemap:
            name: 'VMware Overall Health VC State'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.health
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: vmware.health.get
          tags:
            - tag: component
              value: health
          triggers:
            - uuid: 4058114acbc743e087f5b10e22c997d1
              expression: 'last(/VMware/vmware.health.state)>0 and last(/VMware/vmware.health.state)<>6'
              name: 'VMware: Overall Health VC State is not Green'
              opdata: 'Current Overall Health VC State: {ITEM.LASTVALUE}'
              priority: AVERAGE
              description: 'One or more components in the appliance might be in an unusable status and the appliance might soon become unresponsive.'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: a0ec9145f2234fbea79a28c57ebdb44d
          name: Version
          type: SIMPLE
          key: 'vmware.version[{$VMWARE.URL}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware service version.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
      discovery_rules:
        - uuid: a1f545a8acb5423884a3ef46b0aaa1c6
          name: 'VMware alarm discovery'
          type: DEPENDENT
          key: vmware.alarms.discovery
          lifetime: '0'
          description: 'Discovery of alarms.'
          item_prototypes:
            - uuid: b52727a894964058a5f0a9701e3f7edb
              name: '{#VMWARE.ALARMS.NAME}'
              type: DEPENDENT
              key: 'vmware.alarms.status["{#VMWARE.ALARMS.KEY}"]'
              value_type: CHAR
              description: 'VMware alarm status.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@.key == "{#VMWARE.ALARMS.KEY}")].key.first()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '-1'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'vmware.alarms.get[{$VMWARE.URL}]'
              tags:
                - tag: component
                  value: alarms
              trigger_prototypes:
                - uuid: ec5711e1881149ffbf67325f16b960a4
                  expression: 'last(/VMware/vmware.alarms.status["{#VMWARE.ALARMS.KEY}"])<>-1'
                  name: 'VMware: {#VMWARE.ALARMS.NAME}'
                  description: '{#VMWARE.ALARMS.DESC}'
                  tags:
                    - tag: scope
                      value: notice
          master_item:
            key: 'vmware.alarms.get[{$VMWARE.URL}]'
          lld_macro_paths:
            - lld_macro: '{#VMWARE.ALARMS.DESC}'
              path: $.description
            - lld_macro: '{#VMWARE.ALARMS.KEY}'
              path: $.key
            - lld_macro: '{#VMWARE.ALARMS.NAME}'
              path: $.name
            - lld_macro: '{#VMWARE.ALARMS.STATUS}'
              path: $.overall_status
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          overrides:
            - name: 'Trigger priority red'
              step: '1'
              filter:
                conditions:
                  - macro: '{#VMWARE.ALARMS.STATUS}'
                    value: red
              operations:
                - operationobject: TRIGGER_PROTOTYPE
                  operator: REGEXP
                  value: 'VMware: *'
                  severity: HIGH
            - name: 'Trigger priority yellow'
              step: '2'
              filter:
                conditions:
                  - macro: '{#VMWARE.ALARMS.STATUS}'
                    value: yellow
              operations:
                - operationobject: TRIGGER_PROTOTYPE
                  operator: REGEXP
                  value: 'VMware: *'
                  severity: WARNING
            - name: 'Trigger priority green'
              step: '3'
              filter:
                conditions:
                  - macro: '{#VMWARE.ALARMS.STATUS}'
                    value: green
              operations:
                - operationobject: TRIGGER_PROTOTYPE
                  operator: REGEXP
                  value: 'VMware: *'
                  severity: INFO
        - uuid: 16ffc933cce74cf28a6edf306aa99782
          name: 'VMware cluster discovery'
          type: SIMPLE
          key: 'vmware.cluster.discovery[{$VMWARE.URL}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of clusters.'
          item_prototypes:
            - uuid: 46111f91dd564a459dbc1d396e2e6c76
              name: 'Status of [{#CLUSTER.NAME}] cluster'
              type: SIMPLE
              key: 'vmware.cluster.status[{$VMWARE.URL},{#CLUSTER.NAME}]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: |
                VMware cluster status. One of the following:
                - Gray: Unknown;
                - Green: OK;
                - Yellow: It might have a problem;
                - Red: It has a problem.
              valuemap:
                name: 'VMware status'
              tags:
                - tag: cluster
                  value: '{#CLUSTER.NAME}'
                - tag: component
                  value: cluster
              trigger_prototypes:
                - uuid: 9f7bcea84eb54fe5b79481267e6db341
                  expression: 'last(/VMware/vmware.cluster.status[{$VMWARE.URL},{#CLUSTER.NAME}])=3'
                  name: 'VMware: The [{#CLUSTER.NAME}] status is Red'
                  priority: HIGH
                  description: 'A cluster enabled for DRS becomes invalid (red) when the tree is no longer internally consistent, that is, when resource constraints are not observed. See also: https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-resource-management/GUID-C7417CAA-BD38-41D0-9529-9E7A5898BB12.html'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: bf1e7838597241228506c5cfb7063950
                  expression: 'last(/VMware/vmware.cluster.status[{$VMWARE.URL},{#CLUSTER.NAME}])=2'
                  name: 'VMware: The [{#CLUSTER.NAME}] status is Yellow'
                  priority: AVERAGE
                  description: 'A cluster becomes overcommitted (yellow) when the tree of resource pools and virtual machines is internally consistent but the cluster does not have the capacity to support all the resources reserved by the child resource pools. See also: https://docs.vmware.com/en/VMware-vSphere/8.0/vsphere-resource-management/GUID-ED8240A0-FB54-4A31-BD3D-F23FE740F10C.html'
                  dependencies:
                    - name: 'VMware: The [{#CLUSTER.NAME}] status is Red'
                      expression: 'last(/VMware/vmware.cluster.status[{$VMWARE.URL},{#CLUSTER.NAME}])=3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
        - uuid: 8fb6a45cbe074b0cb6df53758e2c6623
          name: 'VMware datastore discovery'
          type: SIMPLE
          key: 'vmware.datastore.discovery[{$VMWARE.URL}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of VMware datastores.'
          item_prototypes:
            - uuid: 4b61838ba4c34e709b25081ae5b059b5
              name: 'Average read latency of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.datastore.read[{$VMWARE.URL},{#DATASTORE.UUID},latency]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Amount of time for a read operation from the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 54c2631edeb04ef39701ad3bf03be1af
              name: 'Average read IOPS of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.datastore.read[{$VMWARE.URL},{#DATASTORE.UUID},rps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'IOPS for a read operation from the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 5355c401dc244bc588ccd18767577c93
              name: 'Free space on datastore [{#DATASTORE}] (percentage)'
              type: SIMPLE
              key: 'vmware.datastore.size[{$VMWARE.URL},{#DATASTORE.UUID},pfree]'
              delay: 5m
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore free space (percentage from the total).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
              trigger_prototypes:
                - uuid: 8783e6c0bb394763afecddfd49929a01
                  expression: 'last(/VMware/vmware.datastore.size[{$VMWARE.URL},{#DATASTORE.UUID},pfree])<{$VMWARE.DATASTORE.SPACE.CRIT}'
                  name: 'VMware: [{#DATASTORE}]: Free space is critically low'
                  event_name: 'VMware: Datastore free space is critically low ([{#DATASTORE}] free space < {$VMWARE.DATASTORE.SPACE.CRIT}%)'
                  priority: HIGH
                  description: 'Datastore free space has fallen below the critical threshold.'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 201980a75d734a42b3fbe1b0d3c9f55c
                  expression: 'last(/VMware/vmware.datastore.size[{$VMWARE.URL},{#DATASTORE.UUID},pfree])<{$VMWARE.DATASTORE.SPACE.WARN}'
                  name: 'VMware: [{#DATASTORE}]: Free space is low'
                  event_name: 'VMware: Datastore free space is low ([{#DATASTORE}] free space < {$VMWARE.DATASTORE.SPACE.WARN}%)'
                  priority: WARNING
                  description: 'Datastore free space has fallen below the warning threshold.'
                  dependencies:
                    - name: 'VMware: [{#DATASTORE}]: Free space is critically low'
                      expression: 'last(/VMware/vmware.datastore.size[{$VMWARE.URL},{#DATASTORE.UUID},pfree])<{$VMWARE.DATASTORE.SPACE.CRIT}'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: 84f13c4fde2d4a17baaf0c8c1eb4f2c0
              name: 'Total size of datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.datastore.size[{$VMWARE.URL},{#DATASTORE.UUID}]'
              delay: 5m
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in bytes.'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 540cd0fbc56c4b8ea19f2ff5839ce00d
              name: 'Average write latency of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.datastore.write[{$VMWARE.URL},{#DATASTORE.UUID},latency]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Amount of time for a write operation to the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 0026edd933404faf992d08628c9ab364
              name: 'Average write IOPS of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.datastore.write[{$VMWARE.URL},{#DATASTORE.UUID},rps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'IOPS for a write operation to the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
          overrides:
            - name: 'Disable IO perfCounter'
              step: '1'
              filter:
                conditions:
                  - macro: '{#DATASTORE.TYPE}'
                    value: vsan|nfs
              operations:
                - operator: LIKE
                  value: Average
                  discover: NO_DISCOVER
        - uuid: a5bc075e89f248e7b411d8f960897a08
          name: 'VMware hypervisor discovery'
          type: SIMPLE
          key: 'vmware.hv.discovery[{$VMWARE.URL}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of hypervisors.'
          host_prototypes:
            - uuid: 051a1469d4d045cbbf818fcc843a352e
              host: '{#HV.UUID}'
              name: '{#HV.NAME}'
              group_links:
                - group:
                    name: Applications
              group_prototypes:
                - name: '{#CLUSTER.NAME} (hypervisor)'
                - name: '{#DATACENTER.NAME}'
              templates:
                - name: 'VMware Hypervisor'
              macros:
                - macro: '{$VMWARE.HV.UUID}'
                  value: '{#HV.UUID}'
                  description: 'UUID of hypervisor.'
              custom_interfaces: 'YES'
              interfaces:
                - ip: '{#HV.IP}'
        - uuid: 9fd559f4e88c4677a1b874634dd686f5
          name: 'VMware VM discovery'
          type: SIMPLE
          key: 'vmware.vm.discovery[{$VMWARE.URL}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#VM.POWERSTATE}'
                value: '{$VMWARE.VM.POWERSTATE}'
          description: 'Discovery of guest virtual machines.'
          host_prototypes:
            - uuid: 23b9ae9d6f33414880db1cb107115810
              host: '{#VM.UUID}'
              name: '{#VM.NAME}'
              group_links:
                - group:
                    name: Applications
              group_prototypes:
                - name: '{#CLUSTER.NAME} (vm)'
                - name: '{#DATACENTER.NAME}/{#VM.FOLDER} (vm)'
                - name: '{#HV.NAME}'
              templates:
                - name: 'VMware Guest'
              macros:
                - macro: '{$VMWARE.VM.UUID}'
                  value: '{#VM.UUID}'
                  description: 'UUID of guest virtual machine.'
              custom_interfaces: 'YES'
              interfaces:
                - ip: '{#VM.IP}'
      tags:
        - tag: class
          value: software
        - tag: target
          value: vmware
      macros:
        - macro: '{$VMWARE.DATASTORE.SPACE.CRIT}'
          value: '10'
          description: 'The critical threshold of the datastore free space.'
        - macro: '{$VMWARE.DATASTORE.SPACE.WARN}'
          value: '20'
          description: 'The warning threshold of the datastore free space.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY}'
          value: 'false'
          description: 'Set "true"/"false" to enable or disable monitoring of hardware sensors.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Sets the regex string of hardware sensor names to be allowed in discovery.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Sets the regex string of hardware sensor names to be ignored in discovery.'
        - macro: '{$VMWARE.PASSWORD}'
          type: SECRET_TEXT
          description: 'VMware service `{$USERNAME}` user password.'
        - macro: '{$VMWARE.PROXY}'
          description: 'Sets the HTTP proxy for script items. If this parameter is empty, then no proxy is used.'
        - macro: '{$VMWARE.URL}'
          description: 'VMware service (vCenter or ESX hypervisor) SDK URL (https://servername/sdk).'
        - macro: '{$VMWARE.USERNAME}'
          description: 'VMware service user name.'
        - macro: '{$VMWARE.VM.POWERSTATE}'
          value: poweredOn|poweredOff|suspended
          description: 'Possibility to filter out VMs by power state.'
      dashboards:
        - uuid: 00e64ad19fff4dc9af2ab2c0c1ccc290
          name: Overview
          pages:
            - name: 'VMware: Overview'
              widgets:
                - type: honeycomb
                  name: 'Overall status'
                  width: '15'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Overall Health VC State'
                    - type: STRING
                      name: primary_label
                      value: 'Overall status'
                    - type: STRING
                      name: reference
                      value: AAAAA
                    - type: STRING
                      name: thresholds.0.color
                      value: 80FF00
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFFF00
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.2.color
                      value: FFBF00
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.3.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.3.threshold
                      value: '3'
                    - type: STRING
                      name: thresholds.4.color
                      value: D2D2D2
                    - type: STRING
                      name: thresholds.4.threshold
                      value: '4'
                    - type: STRING
                      name: thresholds.5.color
                      value: D2D2D2
                    - type: STRING
                      name: thresholds.5.threshold
                      value: '5'
                    - type: STRING
                      name: thresholds.6.color
                      value: 90A4AE
                    - type: STRING
                      name: thresholds.6.threshold
                      value: '6'
                - type: honeycomb
                  name: 'Total size of datastore'
                  'y': '4'
                  width: '36'
                  height: '8'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 81D4FA
                    - type: STRING
                      name: items.0
                      value: 'Total size of datastore*'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("datastore.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: item
                  name: 'Full name'
                  x: '15'
                  width: '57'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.fullname[{$VMWARE.URL}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: Version
                  x: '15'
                  'y': '2'
                  width: '57'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.version[{$VMWARE.URL}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: honeycomb
                  name: 'Free space on datastore'
                  x: '36'
                  'y': '4'
                  width: '36'
                  height: '8'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Free space on datastore*'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("datastore.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAC
                    - type: STRING
                      name: thresholds.0.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '10'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '20'
                    - type: STRING
                      name: thresholds.2.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '30'
            - name: 'VMware: Datastore'
              widgets:
                - type: graphprototype
                  name: 'Average read IOps of the datastore'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.datastore.read[{$VMWARE.URL},{#DATASTORE.UUID},rps]'
                    - type: STRING
                      name: reference
                      value: AAAAD
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average read latency of the datastore'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.datastore.read[{$VMWARE.URL},{#DATASTORE.UUID},latency]'
                    - type: STRING
                      name: reference
                      value: AAAAE
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average write IOps of the datastore'
                  x: '36'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.datastore.write[{$VMWARE.URL},{#DATASTORE.UUID},rps]'
                    - type: STRING
                      name: reference
                      value: AAAAF
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average write latency of the datastore'
                  x: '36'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: VMware
                        key: 'vmware.datastore.write[{$VMWARE.URL},{#DATASTORE.UUID},latency]'
                    - type: STRING
                      name: reference
                      value: AAAAG
                    - type: INTEGER
                      name: source_type
                      value: '3'
      valuemaps:
        - uuid: 7e24ccef9d754cb4805df5b1f27f4ef4
          name: 'VMware Overall Health VC State'
          mappings:
            - value: '0'
              newvalue: Green
            - value: '1'
              newvalue: Yellow
            - value: '2'
              newvalue: Orange
            - value: '3'
              newvalue: Red
            - value: '4'
              newvalue: Gray
            - value: '5'
              newvalue: Unknown
            - value: '6'
              newvalue: 'Not available'
        - uuid: 3c59c22905054d42ac4ee8b72fe5f270
          name: 'VMware status'
          mappings:
            - value: '0'
              newvalue: Gray
            - value: '1'
              newvalue: Green
            - value: '2'
              newvalue: Yellow
            - value: '3'
              newvalue: Red
    - uuid: 7942fb93ae3b47cf9ca0ea4beb0675ce
      template: 'VMware Guest'
      name: 'VMware Guest'
      description: |
        Note: To enable trigger for free space for guest VM, set macro '{$VMWARE.VM.FS.TRIGGER.USED}' to the value '1' on the discovered host level.
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: Templates/Applications
      items:
        - uuid: 061eed2d40d5427092b50172ea0a9c41
          name: 'Cluster name'
          type: SIMPLE
          key: 'vmware.vm.cluster.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Cluster name of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cluster
        - uuid: 20332e3c1ea54266a02ad500bc9ec1ca
          name: 'Snapshot consolidation needed'
          type: SIMPLE
          key: 'vmware.vm.consolidationneeded[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            Displays whether snapshot consolidation is needed or not. One of the following:
            - True;
            - False.
          valuemap:
            name: 'VMware Consolidation'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                  	'true',
                  	'false'
                  ].indexOf(value);
                  return idx !== -1 ? idx : 2;
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: storage
          triggers:
            - uuid: 28627af63fe64e79b08ad752dee5205e
              expression: 'last(/VMware Guest/vmware.vm.consolidationneeded[{$VMWARE.URL},{$VMWARE.VM.UUID}])=0'
              name: 'VMware Guest: Snapshot consolidation needed'
              priority: AVERAGE
              description: 'Snapshot consolidation needed.'
              manual_close: 'YES'
              dependencies:
                - name: 'VMware Guest: Hypervisor is in the maintenance mode'
                  expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
              tags:
                - tag: scope
                  value: availability
        - uuid: 31389342688f4b0696a49431923a528f
          name: 'CPU latency in percent'
          type: SIMPLE
          key: 'vmware.vm.cpu.latency[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of time the VM is unable to run because it is contending for access to the physical CPU(s).'
          tags:
            - tag: component
              value: cpu
        - uuid: bbfb146e74144160b2e47c0f2cdc6c20
          name: 'Number of virtual CPUs'
          type: SIMPLE
          key: 'vmware.vm.cpu.num[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of virtual CPUs assigned to the guest.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cpu
        - uuid: f4d72109b7ee4e0bb65aab1de85b6b05
          name: 'CPU readiness latency in percent'
          type: SIMPLE
          key: 'vmware.vm.cpu.readiness[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of time that the virtual machine was ready, but was unable to get scheduled to run on the physical CPU.'
          tags:
            - tag: component
              value: cpu
        - uuid: ff0a31df94784cfbbf10deca55f76145
          name: 'CPU ready'
          type: SIMPLE
          key: 'vmware.vm.cpu.ready[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: ms
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Time that the VM was ready, but unable to get scheduled to run on the physical CPU during the last measurement interval (VMware vCenter/ESXi Server performance counter sampling interval - 20 seconds).'
          tags:
            - tag: component
              value: cpu
        - uuid: 50de05f27f33425cb207a3fdece7ecb1
          name: 'CPU swap-in latency in percent'
          type: SIMPLE
          key: 'vmware.vm.cpu.swapwait[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of CPU time spent waiting for a swap-in.'
          tags:
            - tag: component
              value: cpu
        - uuid: 50606be978814b51b4bae54340965cdc
          name: 'CPU usage in percent'
          type: SIMPLE
          key: 'vmware.vm.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval.'
          tags:
            - tag: component
              value: cpu
        - uuid: ea416ff054cc4031ac6b5cf446156540
          name: 'CPU usage'
          type: SIMPLE
          key: 'vmware.vm.cpu.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Current upper-bound on CPU usage. The upper-bound is based on the host the VM is current running on, as well as limits configured on the VM itself or any parent resource pool. Valid while the VM is running.'
          tags:
            - tag: component
              value: cpu
        - uuid: 3e70b5d443b942db974b5f92a7acce19
          name: 'Datacenter name'
          type: SIMPLE
          key: 'vmware.vm.datacenter.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Datacenter name of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: datacenter
        - uuid: e645130999db470fbbf14a8055c95b23
          name: 'Guest memory swapped'
          type: SIMPLE
          key: 'vmware.vm.guest.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of guest physical memory that is swapped out to the swap space.'
          tags:
            - tag: component
              value: memory
        - uuid: 521a0396514845e3bc5d3dc54ec3d940
          name: 'Uptime of guest OS'
          type: SIMPLE
          key: 'vmware.vm.guest.osuptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total time elapsed since the last operating system boot-up (in seconds).'
          tags:
            - tag: component
              value: system
        - uuid: b794d9df3e764df8b04239d5779269cd
          name: 'Hypervisor maintenance mode'
          type: SIMPLE
          key: 'vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            Hypervisor maintenance mode. One of the following:
            - Normal mode;
            - Maintenance mode.
          valuemap:
            name: 'VMware Hypervisor maintenance mode'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 05c2982de3f94647808a523a91af554c
              expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
              name: 'VMware Guest: Hypervisor is in the maintenance mode'
              event_name: 'VMware Guest: Hypervisor is in the maintenance mode'
              priority: INFO
              description: 'Hypervisor is in the maintenance mode. All other problem on the host will be suppressed.'
              tags:
                - tag: scope
                  value: notice
        - uuid: fedec469a1d040ae971e0013102e1e7c
          name: 'Hypervisor name'
          type: SIMPLE
          key: 'vmware.vm.hv.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Hypervisor name of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: hypervisor
        - uuid: fbe7477fd85a4ee39a9226b2c6995446
          name: 'Ballooned memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is currently reclaimed through the balloon driver.'
          tags:
            - tag: component
              value: memory
        - uuid: 9e7b9360e4d84e9397b5f0a7ab074726
          name: 'Compressed memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.compressed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of memory currently in the compression cache for this VM.'
          tags:
            - tag: component
              value: memory
        - uuid: 04a40f805fed4ddfa1590274a996a019
          name: 'Host memory consumed'
          type: SIMPLE
          key: 'vmware.vm.memory.size.consumed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of host physical memory consumed for backing up guest physical memory pages.'
          tags:
            - tag: component
              value: memory
        - uuid: 6563409185804ed89b49dfde92edfa10
          name: 'Private memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.private[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of memory backed by host memory and not being shared.'
          tags:
            - tag: component
              value: memory
        - uuid: c6a539ee57bf48f78342358c391c65ea
          name: 'Shared memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.shared[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory shared through transparent page sharing.'
          tags:
            - tag: component
              value: memory
        - uuid: b064f0e0a53f4f6588827100becb4335
          name: 'Swapped memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory swapped out to the VM''s swap device by ESX.'
          tags:
            - tag: component
              value: memory
        - uuid: e960399726a240de9ecc12eff65415ae
          name: 'Guest memory usage'
          type: SIMPLE
          key: 'vmware.vm.memory.size.usage.guest[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is being used by the VM.'
          tags:
            - tag: component
              value: memory
        - uuid: 6fcbe4e95fce445aa417b9738004391f
          name: 'Host memory usage'
          type: SIMPLE
          key: 'vmware.vm.memory.size.usage.host[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of host physical memory allocated to the VM, accounting for the amount saved from memory sharing with other VMs.'
          tags:
            - tag: component
              value: memory
        - uuid: 9533bc39366443fe8a3808190801441a
          name: 'Memory size'
          type: SIMPLE
          key: 'vmware.vm.memory.size[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total size of configured memory.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: memory
        - uuid: e82daa73e03e43b9838d9e414d710e38
          name: 'Host memory usage in percent'
          type: SIMPLE
          key: 'vmware.vm.memory.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of host physical memory that has been consumed.'
          tags:
            - tag: component
              value: memory
        - uuid: 0943ff346c9d4cc69fc773843066c473
          name: 'Power state'
          type: SIMPLE
          key: 'vmware.vm.powerstate[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            The current power state of the VM. One of the following:
            - Powered off;
            - Powered on;
            - Suspended.
          valuemap:
            name: 'VMware VirtualMachinePowerState'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: power
        - uuid: de013bcc700f4878ab80aa3fdd87cc8c
          name: 'Snapshot count'
          type: DEPENDENT
          key: vmware.vm.snapshot.count
          description: 'Snapshot count of the guest VM.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.count
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: 'vmware.vm.snapshot.get[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          tags:
            - tag: component
              value: storage
        - uuid: 550350d76aa346c49ef828418ebc53be
          name: 'Get snapshots'
          type: SIMPLE
          key: 'vmware.vm.snapshot.get[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: '0'
          value_type: TEXT
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Snapshots of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: raw
        - uuid: da2d382ba9554661ba476e1f3d5294b3
          name: 'Snapshot latest date'
          type: DEPENDENT
          key: vmware.vm.snapshot.latestdate
          value_type: CHAR
          description: 'Latest snapshot date of the guest VM.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.latestdate
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: 'vmware.vm.snapshot.get[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          tags:
            - tag: component
              value: storage
        - uuid: 2e68d5709d4f46b49b62d37a890e4193
          name: 'VM state'
          type: SIMPLE
          key: 'vmware.vm.state[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            VMware virtual machine state. One of the following:
            - Not running;
            - Resetting;
            - Running;
            - Shutting down;
            - Standby;
            - Unknown.
          valuemap:
            name: 'VMware Virtual Machine state'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                  	'notRunning',
                  	'resetting',
                  	'running',
                  	'shuttingDown',
                  	'standby',
                  	'unknown'
                  ].indexOf(value);
                  return idx !== -1 ? idx : 5;
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: health
            - tag: component
              value: system
          triggers:
            - uuid: 6ebb2a2de81e4bacbb32d1b767c3cb04
              expression: 'last(/VMware Guest/vmware.vm.state[{$VMWARE.URL},{$VMWARE.VM.UUID}]) <> 2'
              name: 'VMware Guest: VM is not running'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'VMware virtual machine is not running.'
              dependencies:
                - name: 'VMware Guest: Hypervisor is in the maintenance mode'
                  expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
              tags:
                - tag: scope
                  value: notice
        - uuid: 13173517c99e4a87aa6750392d14b255
          name: 'Committed storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.committed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total storage space, in bytes, committed to this VM across all datastores.'
          tags:
            - tag: component
              value: storage
        - uuid: 8183cf2c54774d7eb544f645d5c26b8c
          name: 'Uncommitted storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.uncommitted[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Additional storage space, in bytes, potentially used by this VM on all datastores.'
          tags:
            - tag: component
              value: storage
        - uuid: 35aa9ee1743e4c1787c426da20f48097
          name: 'Unshared storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.unshared[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total storage space, in bytes, occupied by the VM across all datastores that is not shared with any other VM.'
          tags:
            - tag: component
              value: storage
        - uuid: 6089b7822620423aa2b2e66066d33217
          name: 'VMware Tools status'
          type: SIMPLE
          key: 'vmware.vm.tools[{$VMWARE.URL},{$VMWARE.VM.UUID},status]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            Monitoring of VMware Tools. One of the following:
            - Guest tools executing scripts: VMware Tools is starting.
            - Guest tools not running: VMware Tools is not running.
            - Guest tools running: VMware Tools is running.
          valuemap:
            name: 'VMware Tools status'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                  	'guestToolsExecutingScripts',
                  	'guestToolsNotRunning',
                  	'guestToolsRunning'
                  ].indexOf(value);
                  return idx !== -1 ? idx : 10;
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 132d6e490fea42e390de64ce389ad538
              expression: 'last(/VMware Guest/vmware.vm.tools[{$VMWARE.URL},{$VMWARE.VM.UUID},status]) = 1'
              name: 'VMware Guest: VMware Tools is not running'
              priority: WARNING
              description: 'VMware Tools is not running on the VM.'
              dependencies:
                - name: 'VMware Guest: Hypervisor is in the maintenance mode'
                  expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
                - name: 'VMware Guest: VM is not running'
                  expression: 'last(/VMware Guest/vmware.vm.state[{$VMWARE.URL},{$VMWARE.VM.UUID}]) <> 2'
              tags:
                - tag: scope
                  value: notice
        - uuid: 3870a0d8bfd1474db6e096a1a9a246b3
          name: 'VMware Tools version'
          type: SIMPLE
          key: 'vmware.vm.tools[{$VMWARE.URL},{$VMWARE.VM.UUID},version]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Monitoring of the VMware Tools version.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 4c3b010d7ea74da6b0dc1dd4e625bbb0
          name: Uptime
          type: SIMPLE
          key: 'vmware.vm.uptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'System uptime.'
          tags:
            - tag: component
              value: system
      discovery_rules:
        - uuid: 914634668bab4266bd641ee224dbc1e4
          name: 'Network device discovery'
          type: SIMPLE
          key: 'vmware.vm.net.if.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all network devices.'
          item_prototypes:
            - uuid: 1a7452a0061b45b1b1904e3ff64cf49f
              name: 'Number of bytes received on interface [{#IFBACKINGDEVICE}]/[{#IFDESC}]'
              type: SIMPLE
              key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface input statistics (bytes per second).'
              tags:
                - tag: component
                  value: interface
                - tag: interface
                  value: '{#IFDESC}'
            - uuid: 863c3aee5d9248d48adbf86832fa6c8e
              name: 'Number of packets received on interface [{#IFBACKINGDEVICE}]/[{#IFDESC}]'
              type: SIMPLE
              key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface input statistics (packets per second).'
              tags:
                - tag: component
                  value: interface
                - tag: interface
                  value: '{#IFDESC}'
            - uuid: 0993e42664a14cd7936351c55b1d64a4
              name: 'Number of bytes transmitted on interface [{#IFBACKINGDEVICE}]/[{#IFDESC}]'
              type: SIMPLE
              key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface output statistics (bytes per second).'
              tags:
                - tag: component
                  value: interface
                - tag: interface
                  value: '{#IFDESC}'
            - uuid: 144a2ed3f76e49af92462e0fea275ede
              name: 'Number of packets transmitted on interface [{#IFBACKINGDEVICE}]/[{#IFDESC}]'
              type: SIMPLE
              key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface output statistics (packets per second).'
              tags:
                - tag: component
                  value: interface
                - tag: interface
                  value: '{#IFDESC}'
            - uuid: 9c3cd13576cc4c0a8972fa188f911e96
              name: 'Network utilization on interface [{#IFBACKINGDEVICE}]/[{#IFDESC}]'
              type: SIMPLE
              key: 'vmware.vm.net.if.usage[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME}]'
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network utilization (combined transmit and receive rates) during the interval.'
              tags:
                - tag: component
                  value: interface
                - tag: interface
                  value: '{#IFDESC}'
        - uuid: b1543bdfb5a342d7ad694c87248fe173
          name: 'Disk device discovery'
          type: SIMPLE
          key: 'vmware.vm.vfs.dev.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all disk devices.'
          item_prototypes:
            - uuid: a4886b1072314819aaf21183949c94bb
              name: 'Average number of outstanding read requests to the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.storage.readoio[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average number of outstanding read requests to the virtual disk during the collection interval.'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: 172e4882d39f49d486ab5590163fdd4b
              name: 'Average read latency from the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.storage.totalreadlatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              units: '!ms'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'The average time a read from the virtual disk takes.'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: 4fe54828be084b15bb92507106756a5f
              name: 'Average write latency to the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.storage.totalwritelatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              units: '!ms'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'The average time a write to the virtual disk takes.'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: a74614af101c404eb7ebec10319dca05
              name: 'Average number of outstanding write requests to the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.storage.writeoio[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average number of outstanding write requests to the virtual disk during the collection interval.'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: bd151efc8a0b41e9b64cbf21303fc659
              name: 'Average number of bytes read from the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.read[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device read statistics (bytes per second).'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: e6248013150d4f23a0774f6cc80e8df3
              name: 'Average number of reads from the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.read[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},ops]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device read statistics (operations per second).'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: 7ea68380b855460b8e51281223659661
              name: 'Average number of bytes written to the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.write[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device write statistics (bytes per second).'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
            - uuid: 8344a1066f5c4ef49894d2d18fac2339
              name: 'Average number of writes to the disk [{#DISKDESC}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.write[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},ops]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device write statistics (operations per second).'
              tags:
                - tag: component
                  value: disk
                - tag: disk
                  value: '{#DISKDESC}'
        - uuid: 44ff9ef164dc4d20acf06b3368d64456
          name: 'Mounted filesystem discovery'
          type: SIMPLE
          key: 'vmware.vm.vfs.fs.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all guest file systems.'
          item_prototypes:
            - uuid: 622e96310f9d4f54b4ed82f655fa153b
              name: 'Free disk space on [{#FSNAME}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},free]'
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine file system statistics (bytes).'
              tags:
                - tag: component
                  value: filesystem
                - tag: filesystem
                  value: '{#FSNAME}'
            - uuid: 3103537bb1d24633a064d173b3b530f2
              name: 'Free disk space on [{#FSNAME}] (percentage)'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree]'
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine file system statistics (percentage).'
              tags:
                - tag: component
                  value: filesystem
                - tag: filesystem
                  value: '{#FSNAME}'
              trigger_prototypes:
                - uuid: 19c60e68a55d4910a278b6242ead7686
                  expression: 'max(/VMware Guest/vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree],5m)<{$VMWARE.VM.FS.PFREE.MIN.CRIT:"{#FSNAME}"} and {$VMWARE.VM.FS.TRIGGER.USED:"{#FSNAME}"}=1'
                  name: 'VMware Guest: [{#FSNAME}]: Disk space is critically low'
                  event_name: 'VMware Guest: [{#FSNAME}]: Disk space is critically low (below {$VMWARE.VM.FS.PFREE.MIN.CRIT:"{#FSNAME}"}% for 5m)'
                  opdata: 'Space free: {ITEM.LASTVALUE}'
                  priority: AVERAGE
                  description: 'The disk free space on [{#FSNAME}] has been less than `{$VMWARE.VM.FS.PFREE.MIN.CRIT:"{#FSNAME}"}`% for 5m.'
                  manual_close: 'YES'
                  dependencies:
                    - name: 'VMware Guest: Hypervisor is in the maintenance mode'
                      expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: cc995d4c595d46ee80954fd4bb3e0b1b
                  expression: 'max(/VMware Guest/vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree],5m)<{$VMWARE.VM.FS.PFREE.MIN.WARN:"{#FSNAME}"} and {$VMWARE.VM.FS.TRIGGER.USED:"{#FSNAME}"}=1'
                  name: 'VMware Guest: [{#FSNAME}]: Disk space is low'
                  event_name: 'VMware Guest: [{#FSNAME}]: Disk space is low (below {$VMWARE.VM.FS.PFREE.MIN.WARN:"{#FSNAME}"}% for 5m)'
                  opdata: 'Space free: {ITEM.LASTVALUE}'
                  priority: WARNING
                  description: 'The disk free space on [{#FSNAME}] has been less than `{$VMWARE.VM.FS.PFREE.MIN.WARN:"{#FSNAME}"}`% for 5m.'
                  manual_close: 'YES'
                  dependencies:
                    - name: 'VMware Guest: Hypervisor is in the maintenance mode'
                      expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
                    - name: 'VMware Guest: [{#FSNAME}]: Disk space is critically low'
                      expression: 'max(/VMware Guest/vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree],5m)<{$VMWARE.VM.FS.PFREE.MIN.CRIT:"{#FSNAME}"} and {$VMWARE.VM.FS.TRIGGER.USED:"{#FSNAME}"}=1'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: 08d05eac03994b56867ec302a346735c
              name: 'Total disk space on [{#FSNAME}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},total]'
              delay: 1h
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine total disk space (bytes).'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                - tag: component
                  value: filesystem
                - tag: filesystem
                  value: '{#FSNAME}'
            - uuid: 09bb15da42464d8295d5e94b1d42cc87
              name: 'Used disk space on [{#FSNAME}]'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},used]'
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine used disk space (bytes).'
              tags:
                - tag: component
                  value: filesystem
                - tag: filesystem
                  value: '{#FSNAME}'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const data = JSON.parse(value);
                  
                  for (var i in data) {
                  	if (data[i]['{#FSNAME}'].endsWith('\\')) {
                  		data[i]['{#FSNAME}'] = data[i]['{#FSNAME}'].replace(/\\+$/, '');
                  	}
                  }
                  
                  return JSON.stringify(data);
      tags:
        - tag: class
          value: software
        - tag: target
          value: vmware
        - tag: target
          value: vmware-guest
      macros:
        - macro: '{$VMWARE.HYPERVISOR.MAINTENANCE}'
          value: '1'
          description: 'If the hypervisor is in maintenance mode, all other problems on the VM will be suppressed automatically. Set to "1"/"0" to enable or disable this feature.'
        - macro: '{$VMWARE.PASSWORD}'
          type: SECRET_TEXT
          description: 'VMware service `{$USERNAME}` user password.'
        - macro: '{$VMWARE.URL}'
          description: 'VMware service (vCenter or ESX hypervisor) SDK URL (https://servername/sdk).'
        - macro: '{$VMWARE.USERNAME}'
          description: 'VMware service user name.'
        - macro: '{$VMWARE.VM.FS.PFREE.MIN.CRIT}'
          value: '10'
          description: 'VMware guest free space threshold for the critical trigger.'
        - macro: '{$VMWARE.VM.FS.PFREE.MIN.WARN}'
          value: '20'
          description: 'VMware guest free space threshold for the warning trigger.'
        - macro: '{$VMWARE.VM.FS.TRIGGER.USED}'
          value: '0'
          description: 'VMware guest used free space trigger. Set to "1"/"0" to enable or disable the trigger.'
      dashboards:
        - uuid: ea7f45fa45e4429abb2fd3a675765483
          name: 'Guest VM overview'
          pages:
            - name: 'VMware: Guest VM Overview'
              widgets:
                - type: gauge
                  name: 'CPU utilization'
                  width: '21'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: description
                      value: 'CPU usage'
                    - type: INTEGER
                      name: desc_size
                      value: '10'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: scale_size
                      value: '10'
                    - type: STRING
                      name: thresholds.0.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '70'
                    - type: STRING
                      name: thresholds.2.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '90'
                    - type: INTEGER
                      name: th_show_arc
                      value: '1'
                    - type: INTEGER
                      name: th_show_labels
                      value: '1'
                    - type: STRING
                      name: units
                      value: '%'
                - type: svggraph
                  name: 'CPU and memory usage in percents'
                  'y': '4'
                  width: '42'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 4FC3F7
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.0.width
                      value: '3'
                    - type: STRING
                      name: ds.1.color.0
                      value: FFAB91
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.1.fill
                      value: '5'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.1.width
                      value: '2'
                    - type: STRING
                      name: lefty_max
                      value: '100'
                    - type: STRING
                      name: lefty_min
                      value: '0'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: item
                  name: 'Number of virtual CPUs'
                  'y': '8'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.num[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Committed storage space'
                  'y': '10'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.storage.committed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Memory size'
                  x: '15'
                  'y': '8'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Uncommitted storage space'
                  x: '15'
                  'y': '10'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.storage.uncommitted[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: gauge
                  name: 'Host memory usage'
                  x: '21'
                  width: '21'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: description
                      value: 'Host memory usage'
                    - type: INTEGER
                      name: desc_size
                      value: '10'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: scale_size
                      value: '10'
                    - type: STRING
                      name: thresholds.0.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '70'
                    - type: STRING
                      name: thresholds.2.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '90'
                    - type: INTEGER
                      name: th_show_arc
                      value: '1'
                    - type: INTEGER
                      name: th_show_labels
                      value: '1'
                    - type: STRING
                      name: units
                      value: '%'
                - type: item
                  name: 'VMware Tools version'
                  x: '30'
                  'y': '8'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.tools[{$VMWARE.URL},{$VMWARE.VM.UUID},version]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: Uptime
                  x: '30'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.uptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'VM state'
                  x: '42'
                  width: '30'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.state[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: STRING
                      name: thresholds.0.color
                      value: FFBF00
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFBF00
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.2.color
                      value: 32CD32
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.3.color
                      value: FFECB3
                    - type: STRING
                      name: thresholds.3.threshold
                      value: '3'
                    - type: STRING
                      name: thresholds.4.color
                      value: FFECB3
                    - type: STRING
                      name: thresholds.4.threshold
                      value: '4'
                    - type: STRING
                      name: thresholds.5.color
                      value: D2D2D2
                    - type: STRING
                      name: thresholds.5.threshold
                      value: '5'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'VM Tools status'
                  x: '42'
                  'y': '2'
                  width: '30'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.tools[{$VMWARE.URL},{$VMWARE.VM.UUID},status]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: STRING
                      name: thresholds.0.color
                      value: FFBF00
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFBF00
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.2.color
                      value: 32CD32
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.3.color
                      value: D2D2D2
                    - type: STRING
                      name: thresholds.3.threshold
                      value: '10'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Cluster name'
                  x: '42'
                  'y': '4'
                  width: '30'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cluster.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Datacenter name'
                  x: '42'
                  'y': '6'
                  width: '30'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.datacenter.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Hypervisor name'
                  x: '42'
                  'y': '8'
                  width: '30'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.hv.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Snapshot count'
                  x: '42'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: vmware.vm.snapshot.count
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Snapshot latest date'
                  x: '54'
                  'y': '10'
                  width: '18'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: vmware.vm.snapshot.latestdate
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '30'
            - name: 'VMware: CPU'
              widgets:
                - type: svggraph
                  name: 'CPU usage'
                  width: '51'
                  height: '6'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 0288D1
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '4'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.0.transparency
                      value: '6'
                    - type: INTEGER
                      name: ds.0.width
                      value: '2'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAD
                - type: svggraph
                  name: 'CPU latency'
                  'y': '6'
                  width: '51'
                  height: '6'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.latency[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.0.transparency
                      value: '6'
                    - type: STRING
                      name: ds.1.color.0
                      value: CE93D8
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.readiness[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.1.transparency
                      value: '6'
                    - type: STRING
                      name: ds.2.color.0
                      value: FF4000
                    - type: INTEGER
                      name: ds.2.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.2.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.swapwait[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.2.transparency
                      value: '6'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: item
                  name: 'Number of virtual CPUs'
                  x: '51'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.num[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU usage'
                  x: '51'
                  'y': '2'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU ready'
                  x: '51'
                  'y': '4'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.ready[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU latency in percents'
                  x: '51'
                  'y': '6'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.latency[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU readiness latency in percent'
                  x: '51'
                  'y': '8'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.readiness[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU readiness latency in percent'
                  x: '51'
                  'y': '10'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.cpu.swapwait[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'VMware: Memory'
              widgets:
                - type: svggraph
                  name: 'Host memory usage in percent'
                  width: '51'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: EF9A9A
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '4'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.0.transparency
                      value: '6'
                    - type: INTEGER
                      name: ds.0.width
                      value: '2'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAF
                - type: svggraph
                  name: 'Host memory usage'
                  'y': '4'
                  width: '51'
                  height: '6'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: F06292
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.usage.guest[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.0.transparency
                      value: '3'
                    - type: STRING
                      name: ds.1.color.0
                      value: BF00FF
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.consumed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.1.transparency
                      value: '3'
                    - type: STRING
                      name: ds.2.color.0
                      value: 90CAF9
                    - type: INTEGER
                      name: ds.2.dataset_type
                      value: '0'
                    - type: ITEM
                      name: ds.2.itemids.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.usage.host[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: ds.2.transparency
                      value: '3'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '3'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAG
                - type: item
                  name: 'Guest memory swapped'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.guest.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Swapped memory'
                  x: '12'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Private memory'
                  x: '24'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.private[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Shared memory'
                  x: '36'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.shared[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Ballooned memory'
                  x: '48'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Memory size'
                  x: '51'
                  width: '21'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '25'
                    - type: INTEGER
                      name: desc_size
                      value: '7'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: units_size
                      value: '20'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '25'
                - type: item
                  name: 'Guest memory usage'
                  x: '51'
                  'y': '4'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.usage.guest[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Host memory consumed'
                  x: '51'
                  'y': '6'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.consumed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Host memory usage'
                  x: '51'
                  'y': '8'
                  width: '21'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.usage.host[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Compressed memory'
                  x: '60'
                  'y': '10'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.memory.size.compressed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'VMware: Storage'
              widgets:
                - type: graphprototype
                  name: 'Average number of bytes read from the disk'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.vfs.dev.read[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
                    - type: STRING
                      name: reference
                      value: AAAAH
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average read latency to the disk'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.storage.totalreadlatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
                    - type: STRING
                      name: reference
                      value: AAAAJ
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average number of bytes written to the disk'
                  x: '36'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.vfs.dev.write[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
                    - type: STRING
                      name: reference
                      value: AAAAK
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average write latency to the disk'
                  x: '36'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.storage.totalwritelatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
                    - type: STRING
                      name: reference
                      value: AAAAL
                    - type: INTEGER
                      name: source_type
                      value: '3'
            - name: 'VMware: Filesystem'
              widgets:
                - type: honeycomb
                  name: 'Total disk space'
                  width: '36'
                  height: '6'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 81D4FA
                    - type: STRING
                      name: items.0
                      value: 'Total disk space on*'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("space on.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAM
                - type: graphprototype
                  name: 'Free disk space'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},free]'
                    - type: STRING
                      name: reference
                      value: AAAAN
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: honeycomb
                  name: 'Free disk space'
                  x: '36'
                  width: '36'
                  height: '6'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Free disk space on*(percentage)'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("space on.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAO
                    - type: STRING
                      name: thresholds.0.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '10'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '20'
                    - type: STRING
                      name: thresholds.2.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '30'
                - type: graphprototype
                  name: 'Free disk space (percentage)'
                  x: '36'
                  'y': '6'
                  width: '36'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree]'
                    - type: STRING
                      name: reference
                      value: AAAAP
                    - type: INTEGER
                      name: source_type
                      value: '3'
            - name: 'VMware: Network'
              widgets:
                - type: graphprototype
                  name: 'Network utilization on interface'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.net.if.usage[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME}]'
                    - type: STRING
                      name: reference
                      value: AAAAQ
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Number of bytes received on interface'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
                    - type: STRING
                      name: reference
                      value: AAAAR
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Number of packets received on interface'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
                    - type: STRING
                      name: reference
                      value: AAAAS
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Number of bytes transmitted on interface'
                  x: '36'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
                    - type: STRING
                      name: reference
                      value: AAAAT
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Number of packets transmitted on interface'
                  x: '36'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Guest'
                        key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
                    - type: STRING
                      name: reference
                      value: AAAAU
                    - type: INTEGER
                      name: source_type
                      value: '3'
      valuemaps:
        - uuid: be14ef9303f040859e6edbb13d9b64c5
          name: 'VMware Consolidation'
          mappings:
            - value: '0'
              newvalue: 'True'
            - value: '1'
              newvalue: 'False'
            - value: '2'
              newvalue: Unknown
        - uuid: 815e082c2a804884bb25da4aaee18934
          name: 'VMware Hypervisor maintenance mode'
          mappings:
            - value: '0'
              newvalue: 'Normal mode'
            - value: '1'
              newvalue: 'Maintenance mode'
        - uuid: 64586743ecc74b5a8b7b849cd4521f48
          name: 'VMware Tools status'
          mappings:
            - value: '0'
              newvalue: 'Guest tools is executing scripts'
            - value: '1'
              newvalue: 'Guest tools is not running'
            - value: '2'
              newvalue: 'Guest tools is running'
            - value: '10'
              newvalue: Unknown
        - uuid: 78f08f5c5c0047b999a2e8daa96cf8b7
          name: 'VMware VirtualMachinePowerState'
          mappings:
            - value: '0'
              newvalue: 'Powered off'
            - value: '1'
              newvalue: 'Powered on'
            - value: '2'
              newvalue: Suspended
        - uuid: 68d712e1c43c4e2d84619c9fcb965919
          name: 'VMware Virtual Machine state'
          mappings:
            - value: '0'
              newvalue: 'Not running'
            - value: '1'
              newvalue: Resetting
            - value: '2'
              newvalue: Running
            - value: '3'
              newvalue: 'Shutting down'
            - value: '4'
              newvalue: Standby
            - value: '5'
              newvalue: Unknown
    - uuid: 5899b2f0aced4085b5ac25d0461b3425
      template: 'VMware Hypervisor'
      name: 'VMware Hypervisor'
      description: |
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/
        
        This template can be used in discovery as well as manually linked to a host. To use this template as manually linked to a host, attach it to the host and set manually the value of '{$VMWARE.HV.UUID}' macro.
        
        Note: To create custom performance counter see documentation: https://www.zabbix.com/documentation/7.2/manual/vm_monitoring/vmware_keys#footnotes
        
        Note: To get all supported counters and generate path for custom performance counter see documentation: https://www.zabbix.com/documentation/7.2/manual/appendix/items/perf_counters
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.4-1
      groups:
        - name: Templates/Applications
      items:
        - uuid: 3010cb082f23478b858912f944347530
          name: 'Hypervisor ping'
          type: SIMPLE
          key: 'icmpping[]'
          description: |
            Checks if the hypervisor is running and accepting ICMP pings. One of the following:
            - Down;
            - Up.
          valuemap:
            name: 'Service state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
          triggers:
            - uuid: ab84a61566a5402db59efd40d20714a5
              expression: 'last(/VMware Hypervisor/icmpping[])=0'
              name: 'VMware Hypervisor: Hypervisor is down'
              priority: AVERAGE
              description: 'The service is unavailable or is not accepting ICMP pings.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
        - uuid: af4d0877fda84753816c817ad76162f1
          name: 'Cluster name'
          type: SIMPLE
          key: 'vmware.hv.cluster.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Cluster name of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cluster
        - uuid: 0e9fd4e6d6e446f08afe7b4b9431bc62
          name: 'Connection state'
          type: SIMPLE
          key: 'vmware.hv.connectionstate[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            VMware hypervisor connection state. One of the following:
            - Connected;
            - Disconnected;
            - Not responding.
          valuemap:
            name: 'VMware Connection state'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                  	'connected',
                  	'disconnected',
                  	'notResponding'
                  ].indexOf(value);
                  return idx !== -1 ? idx : 3;
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            - tag: component
              value: availability
        - uuid: c4ebd62118464e7a8d1945f80d70f8ae
          name: 'CPU usage in percent'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval.'
          tags:
            - tag: component
              value: cpu
        - uuid: 1bff6fbd300d4455a787a273d957bba3
          name: 'CPU usage'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Aggregated CPU usage across all cores on the host in Hz. This is only available if the host is connected.'
          tags:
            - tag: component
              value: cpu
        - uuid: aad168c33cd14f76aa14ab5ca26498ec
          name: 'CPU utilization'
          type: SIMPLE
          key: 'vmware.hv.cpu.utilization[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU utilization as a percentage during the interval depends on power management or hyper-threading.'
          tags:
            - tag: component
              value: cpu
        - uuid: e4d27d7f9b9048d4ae6c60cbdd6c0091
          name: 'Datacenter name'
          type: SIMPLE
          key: 'vmware.hv.datacenter.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Datacenter name of the hypervisor.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: datacenter
        - uuid: 5c29837f75f04d7f9a5786691b3dd991
          name: 'Full name'
          type: SIMPLE
          key: 'vmware.hv.fullname[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The complete product name, including the version information.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: ad0053d57b834e6a9776c08e1c455d55
          name: 'CPU frequency'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.freq[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The speed of the CPU cores. This is an average value if there are multiple speeds. The product of CPU frequency and the number of cores is approximately equal to the sum of the MHz for all the individual cores on the host.'
          tags:
            - tag: component
              value: cpu
        - uuid: 3f0c35fcef9e4699ac5a1c51d80f8da4
          name: 'CPU model'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The CPU model.'
          tags:
            - tag: component
              value: cpu
        - uuid: c99a5bf2e3904f97b3d361ca20af7883
          name: 'CPU cores'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU cores on the host. Physical CPU cores are the processors contained by a CPU package.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cpu
        - uuid: 89cb0a4809e7454a862f398a0e9d6bed
          name: 'CPU threads'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.threads[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU threads on the host.'
          tags:
            - tag: component
              value: cpu
        - uuid: ce89c38e6e5d4338a30ee150be1b2b67
          name: 'Total memory'
          type: SIMPLE
          key: 'vmware.hv.hw.memory[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The physical memory size.'
          tags:
            - tag: component
              value: memory
        - uuid: 7ed7ac26da384bcda976badf24ebbec1
          name: Model
          type: SIMPLE
          key: 'vmware.hv.hw.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The system model identification.'
          tags:
            - tag: component
              value: system
        - uuid: 6c4aab55b3e640779a25ac90b9ca2a43
          name: 'Bios UUID'
          type: SIMPLE
          key: 'vmware.hv.hw.uuid[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware BIOS identification.'
          tags:
            - tag: component
              value: system
        - uuid: aec06090d16d4bdd8ed3494b448f19d8
          name: Vendor
          type: SIMPLE
          key: 'vmware.hv.hw.vendor[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware vendor identification.'
          tags:
            - tag: component
              value: system
        - uuid: 21020a79436a49c38caf8941f6b68da3
          name: 'Ballooned memory'
          type: SIMPLE
          key: 'vmware.hv.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is currently reclaimed through the balloon driver. Sum of all guest VMs.'
          tags:
            - tag: component
              value: memory
        - uuid: 93d680d6886d446badbbe995ddd9ba9c
          name: 'Used memory'
          type: SIMPLE
          key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Physical memory usage on the host.'
          tags:
            - tag: component
              value: memory
        - uuid: 33f78ab6ee6c4e7585a83a60cdecab6f
          name: 'Number of bytes received'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (bytes per second).'
          tags:
            - tag: component
              value: network
        - uuid: 8f935e9718294cd4a67d02f4723a1713
          name: 'Number of broadcasts received'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},broadcast]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (broadcasts).'
          tags:
            - tag: component
              value: network
        - uuid: 720c58685828440bacda845bfd848d6a
          name: 'Number of dropped received packets'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},dropped]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (packets dropped).'
          tags:
            - tag: component
              value: network
        - uuid: 0084eb8fd76241b8938bb1dad5a3f160
          name: 'Number of errors received'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},errors]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (errors).'
          tags:
            - tag: component
              value: network
        - uuid: b013afcba08b47f4a5b590a59f464a58
          name: 'Number of bytes transmitted'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (bytes per second).'
          tags:
            - tag: component
              value: network
        - uuid: 16496c407daa43b9863c05416b294992
          name: 'Number of broadcasts transmitted'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},broadcast]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (broadcasts).'
          tags:
            - tag: component
              value: network
        - uuid: f001256bbfc34cc0898c5eaef422973e
          name: 'Number of dropped transmitted packets'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},dropped]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (packets dropped).'
          tags:
            - tag: component
              value: network
        - uuid: 5f549d8708f24160b04a4a74db29042a
          name: 'Number of errors transmitted'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},errors]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (errors).'
          tags:
            - tag: component
              value: network
        - uuid: e4116d7c7e234c5ebd5784f42ade1f2e
          name: 'Power usage maximum allowed'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID},max]'
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Maximum allowed power usage.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 179a981cf30f4f77869e3b50dc2bc333
          name: 'Power usage'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Current power usage.'
          tags:
            - tag: component
              value: power
        - uuid: 3c9d6ffb53624758ad888bf70f69218c
          name: 'Get sensors'
          type: SIMPLE
          key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: '0'
          value_type: TEXT
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Master item for sensor data.'
          tags:
            - tag: component
              value: raw
        - uuid: 0cec294521314c5482233b5b96e90c8d
          name: 'Overall status'
          type: SIMPLE
          key: 'vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: |
            The overall alarm status of the host. One of the following:
            - Gray: Unknown;
            - Green: OK;
            - Yellow: It might have a problem;
            - Red: It has a problem.
          valuemap:
            name: 'VMware status'
          tags:
            - tag: component
              value: health
          triggers:
            - uuid: 378511e0f1794874a68aef1b43561ee5
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
              name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
              priority: HIGH
              description: 'One or more components in the appliance might be in an unusable status and the appliance might soon become unresponsive. Security patches might be available.'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
            - uuid: ef6ca4d7033c4c8cb963eb7d493b3c7b
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
              name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Yellow'
              priority: AVERAGE
              description: 'One or more components in the appliance might soon become overloaded.'
              dependencies:
                - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                  expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: ecad96137494476293b57a0440de3f65
          name: Uptime
          type: SIMPLE
          key: 'vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'System uptime.'
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 01d316b0a8cf4998b344f0c4ef1daa32
              expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              name: 'VMware Hypervisor: Hypervisor has been restarted'
              event_name: 'VMware Hypervisor: Hypervisor has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 222ad20887cf479b8e81a4c338078d17
          name: Version
          type: SIMPLE
          key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Dot-separated version string.'
          tags:
            - tag: component
              value: system
        - uuid: 2045df572e864834bd4bd97046353f4e
          name: 'Number of guest VMs'
          type: SIMPLE
          key: 'vmware.hv.vm.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of guest virtual machines.'
          tags:
            - tag: component
              value: system
      discovery_rules:
        - uuid: fb7774df87994355baff7402d9fabcc2
          name: 'Datastore discovery'
          type: SIMPLE
          key: 'vmware.hv.datastore.discovery[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of VMware datastores.'
          item_prototypes:
            - uuid: 65e6c165c3674953b2845d4101a9a6bf
              name: 'Multipath count for datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID}]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Number of available datastore paths.'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
              trigger_prototypes:
                - uuid: 8f1de4827ba446ef902ca5fa44109c6d
                  expression: 'last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID}],#1)<>last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID}],#2) and last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID}])<{#MULTIPATH.COUNT}'
                  name: 'VMware Hypervisor: The multipath count has been changed'
                  event_name: 'VMware Hypervisor: The multipath count for datastore [{#DATASTORE}] has been changed'
                  opdata: 'Current: {ITEM.LASTVALUE}, Registered: {#MULTIPATH.COUNT}'
                  priority: AVERAGE
                  description: 'The number of available datastore paths is less than registered (`{#MULTIPATH.COUNT}`).'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 259d1ff4bde143248f7ee2f7f880cb62
              name: 'Average read latency of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},latency]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a read operation from the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 1d7761e9ad0c48c1a3f6b1b48290c16b
              name: 'Average read IOPS of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},rps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average IOPS for a read operation from the datastore.'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: f36245398cc4460a9cb4ec741612693b
              name: 'Free space on datastore [{#DATASTORE}] (percentage)'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},pfree]'
              delay: 5m
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore free space (percentage from the total).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
              trigger_prototypes:
                - uuid: 79c83ed72685487a9ef139c42eea1106
                  expression: 'last(/VMware Hypervisor/vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},pfree])<{$VMWARE.HV.DATASTORE.SPACE.CRIT}'
                  name: 'VMware Hypervisor: [{#DATASTORE}]: Free space is critically low'
                  event_name: 'VMware Hypervisor: Datastore free space is critically low ([{#DATASTORE}] free space < {$VMWARE.HV.DATASTORE.SPACE.CRIT}%)'
                  priority: HIGH
                  description: 'Datastore free space has fallen below the critical threshold.'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 5bc64ee899444a01a5bc315290256cdf
                  expression: 'last(/VMware Hypervisor/vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},pfree])<{$VMWARE.HV.DATASTORE.SPACE.WARN}'
                  name: 'VMware Hypervisor: [{#DATASTORE}]: Free space is low'
                  event_name: 'VMware Hypervisor: Datastore free space is low ([{#DATASTORE}] free space < {$VMWARE.HV.DATASTORE.SPACE.WARN}%)'
                  priority: WARNING
                  description: 'Datastore free space has fallen below the warning threshold.'
                  dependencies:
                    - name: 'VMware Hypervisor: [{#DATASTORE}]: Free space is critically low'
                      expression: 'last(/VMware Hypervisor/vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},pfree])<{$VMWARE.HV.DATASTORE.SPACE.CRIT}'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: cc83e8f5ec08483db75482706bf01aba
              name: 'Total size of datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID}]'
              delay: 5m
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in bytes.'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 9db980d8f5f44af5ad11a5949d80031d
              name: 'Average write latency of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},latency]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a write operation to the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
            - uuid: 4514c4ccf00142e48b243f69dee0b533
              name: 'Average write IOPS of the datastore [{#DATASTORE}]'
              type: SIMPLE
              key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},rps]'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average IOPS for a write operation to the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
                - tag: type
                  value: '{#DATASTORE.TYPE}'
          overrides:
            - name: 'Disable IO perfCounter'
              step: '1'
              filter:
                conditions:
                  - macro: '{#DATASTORE.TYPE}'
                    value: vsan|nfs
              operations:
                - operator: LIKE
                  value: Average
                  discover: NO_DISCOVER
            - name: 'Disable Multipath perfCounter'
              step: '2'
              filter:
                conditions:
                  - macro: '{#DATASTORE.TYPE}'
                    value: vsan
              operations:
                - operator: LIKE
                  value: 'Multipath count for datastore'
                  discover: NO_DISCOVER
        - uuid: deb31adf69634837839e2d8f87167f28
          name: 'Healthcheck discovery'
          type: DEPENDENT
          key: vmware.hv.healthcheck.discovery
          description: 'VMware Rollup Health State sensor discovery.'
          item_prototypes:
            - uuid: fabb7524dd454daa942266e5565ce40e
              name: 'Health state rollup'
              type: DEPENDENT
              key: 'vmware.hv.sensor.health.state[{#SINGLETON}]'
              description: |
                The host's Rollup Health State sensor value. One of the following:
                - Gray: Unknown;
                - Green: OK;
                - Yellow: It might have a problem;
                - Red: It has a problem.
              valuemap:
                name: 'VMware status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$..HostNumericSensorInfo[?(@.name=="VMware Rollup Health State")].healthState.label.first()'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = [
                      	'gray',
                      	'green',
                      	'yellow',
                      	'red'
                      ].indexOf(value.toLowerCase());
                      return idx !== -1 ? idx : 0;
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
              tags:
                - tag: component
                  value: health
              trigger_prototypes:
                - uuid: 9f2a65161946436986aacf6c9a637673
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])=3'
                  name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                  priority: HIGH
                  description: 'One or more components in the appliance might be in an unusable status and the appliance might soon become unresponsive. Security patches might be available.'
                  dependencies:
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: dc4f84eb8d2143bb80999fbc58f38928
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])=2'
                  name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Yellow'
                  priority: AVERAGE
                  description: 'One or more components in the appliance might soon become overloaded.'
                  dependencies:
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])=3'
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Yellow'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$..HostNumericSensorInfo[?(@.name=="VMware Rollup Health State")]'
              error_handler: CUSTOM_VALUE
              error_handler_params: '[]'
            - type: JAVASCRIPT
              parameters:
                - 'return JSON.stringify(value != "[]" ? [{''{#SINGLETON}'': ''''}] : []);'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: cabe1fbdd4e04ef396afaa5dfd1a3423
          name: 'Network interface discovery'
          type: SIMPLE
          key: 'vmware.hv.net.if.discovery[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of VMware hypervisor network interfaces.'
          item_prototypes:
            - uuid: 706acba4535e4135b824d53763868a5f
              name: '[{#IFNAME}] network interface speed'
              type: SIMPLE
              key: 'vmware.hv.network.linkspeed[{$VMWARE.URL},{$VMWARE.HV.UUID},{#IFNAME}]'
              units: bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware hypervisor network interface speed.'
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '1000000'
              tags:
                - tag: component
                  value: network
                - tag: interface
                  value: '{#IFNAME}'
        - uuid: ace5c21254804024a6571a5d030383a0
          name: 'Sensor discovery'
          type: DEPENDENT
          key: vmware.hv.sensors.discovery
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NAME}'
                value: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.MATCHES}'
              - macro: '{#NAME}'
                value: 'VMware Rollup Health State'
                operator: NOT_MATCHES_REGEX
              - macro: '{#NAME}'
                value: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
          description: 'VMware hardware sensor discovery. The data is retrieved from numeric sensor probes and provides information about the health of the physical system.'
          item_prototypes:
            - uuid: d9a7725ccb0647069b331c5e3e51aeaf
              name: 'Sensor [{#NAME}] health state'
              type: DEPENDENT
              key: 'vmware.hv.sensor.state["{#NAME}"]'
              description: |
                VMware hardware sensor health state. One of the following:
                - Gray: Unknown;
                - Green: OK;
                - Yellow: It might have a problem;
                - Red: It has a problem.
              valuemap:
                name: 'VMware status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$..HostNumericSensorInfo[?(@.name=="{#NAME}")].healthState.label.first()'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = [
                      	'gray',
                      	'green',
                      	'yellow',
                      	'red'
                      ].indexOf(value.toLowerCase());
                      return idx !== -1 ? idx : 0;
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 6h
              master_item:
                key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
              tags:
                - tag: component
                  value: health
                - tag: component
                  value: sensor
                - tag: type
                  value: '{#TYPE}'
              trigger_prototypes:
                - uuid: f591aa480fb94996be8225176bc9c95c
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.state["{#NAME}"])=3'
                  name: 'VMware Hypervisor: Sensor [{#NAME}] health state is Red'
                  priority: HIGH
                  description: 'One or more components in the appliance might be in an unusable status and the appliance might soon become unresponsive.'
                  dependencies:
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: c49e1b853f07417abb3812fd03da0bc3
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.state["{#NAME}"])=2'
                  name: 'VMware Hypervisor: Sensor [{#NAME}] health state is Yellow'
                  priority: AVERAGE
                  description: 'One or more components in the appliance might soon become overloaded.'
                  dependencies:
                    - name: 'VMware Hypervisor: Sensor [{#NAME}] health state is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.sensor.state["{#NAME}"])=3'
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                    - name: 'VMware Hypervisor: The {$VMWARE.HV.UUID} health is Yellow'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  var result = [],
                  	sensors = JSON.parse(value)['val']['HostNumericSensorInfo'],
                  	discovery_flag = '{$VMWARE.HV.SENSOR.DISCOVERY}'.toLowerCase().trim();
                  
                  if (!(discovery_flag == 'true' || discovery_flag == 'false')) {
                  	throw 'Incorrect value of macro "{$' + 'VMWARE.HV.SENSOR.DISCOVERY}". Can be used only "true" or "false". Actual value: ' + discovery_flag;
                  }
                  
                  if (discovery_flag !== 'true' || typeof sensors === "undefined") {
                  	return JSON.stringify([]);
                  }
                  
                  sensors.forEach(function(sensor) {
                  	result.push({"{#NAME}": sensor['name'], "{#TYPE}": sensor['sensorType'].toLowerCase()});
                  })
                  
                  return JSON.stringify(result);
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
        - uuid: 7f7ed06754fb4c59ac2d893b85169981
          name: 'Serial number discovery'
          type: DEPENDENT
          key: vmware.hv.serial.number.discovery
          description: 'VMware hypervisor serial number discovery. This item works only with VMware hypervisor versions above 6.7.'
          item_prototypes:
            - uuid: fcd12a13f97848b78b610e86a24417b2
              name: 'Serial number'
              type: SIMPLE
              key: 'vmware.hv.hw.serialnumber[{$VMWARE.URL},{#VMWARE.HV.UUID}]'
              delay: 1h
              value_type: CHAR
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware hypervisor serial number.'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                - tag: component
                  value: system
          master_item:
            key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  function isGtOrEqVersion(first_version, second_version) {
                  	var first = first_version.split('.').map(Number),
                  	second = second_version.split('.').map(Number);
                  
                  	if (first.length > second.length) {
                  		const max_componens_length = first.length
                  	}
                  	else {
                  		const max_componens_length = second.length
                  	}
                  
                  	var num_components = first.length;
                  	while (num_components < max_componens_length) {
                  		first.push(0);
                  		num_components = num_components +1;
                  	}
                  
                  	var num_components = second.length;
                  	while (num_components < max_componens_length) {
                  		second.push(0);
                  		num_components = num_components +1;
                  	}
                  
                  	if (first[0] > second[0] ||
                  		(first[0] === second[0] && first[1] > second[1]) ||
                  		(first[0] === second[0] && first[1] === second[1] && first[2] >= second[2])) {
                  		
                  		return true;
                  	}
                  
                  	return false;
                  }
                  
                  try {
                  	const vmware_version = value;
                  	const hypervisor_uuid = '{$VMWARE.HV.UUID}';
                  
                  	if (isGtOrEqVersion(vmware_version, '6.7.0')) {
                  		return JSON.stringify([{'{#VMWARE.HV.UUID}': hypervisor_uuid}]);
                  	}
                  
                  	return JSON.stringify([]);
                  }
                  catch (error) {
                  	Zabbix.log(3, '[ VMware Serial Number Discovery ] ERROR: ' + error);
                  	throw 'Failed to process data:' + error;
                  }
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
      tags:
        - tag: class
          value: software
        - tag: target
          value: vmware
        - tag: target
          value: vmware-hypervisor
      macros:
        - macro: '{$VMWARE.HV.DATASTORE.SPACE.CRIT}'
          value: '10'
          description: 'The critical threshold of the datastore free space.'
        - macro: '{$VMWARE.HV.DATASTORE.SPACE.WARN}'
          value: '20'
          description: 'The warning threshold of the datastore free space.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY}'
          value: 'false'
          description: 'Set to "true"/"false" to enable or disable the monitoring of hardware sensors.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Sets the regex string of hardware sensor names to be allowed in discovery.'
        - macro: '{$VMWARE.HV.SENSOR.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Sets the regex string of hardware sensor names to be ignored in discovery.'
        - macro: '{$VMWARE.HV.UUID}'
          description: 'UUID of hypervisor.'
        - macro: '{$VMWARE.PASSWORD}'
          type: SECRET_TEXT
          description: 'VMware service `{$USERNAME}` user password.'
        - macro: '{$VMWARE.URL}'
          description: 'VMware service (vCenter or ESX hypervisor) SDK URL (https://servername/sdk).'
        - macro: '{$VMWARE.USERNAME}'
          description: 'VMware service user name.'
      dashboards:
        - uuid: 1d1da8e6d38a4ea5a99d39cc31a8c435
          name: 'Hypervisor overview'
          pages:
            - name: 'VMware: Hypervisor Overview'
              widgets:
                - type: gauge
                  name: 'CPU utilization'
                  width: '18'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: STRING
                      name: description
                      value: 'CPU utilization'
                    - type: INTEGER
                      name: desc_size
                      value: '10'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.cpu.utilization[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: scale_size
                      value: '10'
                    - type: STRING
                      name: thresholds.0.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '70'
                    - type: STRING
                      name: thresholds.2.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '90'
                    - type: INTEGER
                      name: th_show_arc
                      value: '1'
                    - type: INTEGER
                      name: th_show_labels
                      value: '1'
                    - type: STRING
                      name: units
                      value: '%'
                - type: item
                  name: 'Cluster name'
                  'y': '4'
                  width: '18'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.cluster.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: svggraph
                  name: 'Used memory'
                  'y': '6'
                  width: '51'
                  height: '6'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: FF465C
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: item
                  name: 'Hypervisor ping'
                  x: '18'
                  width: '12'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_size
                      value: '7'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'icmpping[]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: STRING
                      name: thresholds.0.color
                      value: F44336
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: 32CD32
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '25'
                - type: item
                  name: 'Datacenter name'
                  x: '18'
                  'y': '4'
                  width: '18'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datacenter.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Overall status'
                  x: '30'
                  width: '18'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_size
                      value: '7'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: STRING
                      name: thresholds.0.color
                      value: D2D2D2
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: 32CD32
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.2.color
                      value: FFF176
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '2'
                    - type: STRING
                      name: thresholds.3.color
                      value: F44336
                    - type: STRING
                      name: thresholds.3.threshold
                      value: '3'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '25'
                - type: item
                  name: 'Full name'
                  x: '36'
                  'y': '4'
                  width: '18'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.fullname[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Connection state'
                  x: '48'
                  width: '24'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.connectionstate[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: STRING
                      name: thresholds.0.color
                      value: 32CD32
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '0'
                    - type: STRING
                      name: thresholds.1.color
                      value: F44336
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '1'
                    - type: STRING
                      name: thresholds.2.color
                      value: FFDAB9
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '25'
                - type: item
                  name: Uptime
                  x: '48'
                  'y': '2'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'Total memory'
                  x: '51'
                  'y': '6'
                  width: '21'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_size
                      value: '10'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.hw.memory[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Used memory'
                  x: '51'
                  'y': '9'
                  width: '21'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_size
                      value: '10'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: Version
                  x: '54'
                  'y': '4'
                  width: '18'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
                - type: item
                  name: 'Number of guest VMs'
                  x: '60'
                  'y': '2'
                  width: '12'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.vm.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'VMware: CPU'
              widgets:
                - type: item
                  name: 'CPU cores'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.hw.cpu.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: svggraph
                  name: 'CPU utilization'
                  'y': '2'
                  width: '72'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.cpu.utilization[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: svggraph
                  name: 'CPU usage'
                  'y': '7'
                  width: '72'
                  height: '5'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.cpu.usage[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAI
                - type: item
                  name: 'CPU threads'
                  x: '15'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.hw.cpu.threads[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU frequency'
                  x: '30'
                  width: '15'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.hw.cpu.freq[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: item
                  name: 'CPU model'
                  x: '45'
                  width: '27'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: desc_v_pos
                      value: '0'
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.hw.cpu.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: INTEGER
                      name: show.0
                      value: '1'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                    - type: INTEGER
                      name: show.2
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '35'
            - name: 'VMware: Network'
              widgets:
                - type: svggraph
                  name: 'Number of broadcast'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},broadcast]'
                    - type: STRING
                      name: ds.1.color.0
                      value: FF465C
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.1.fill
                      value: '5'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},broadcast]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAD
                - type: svggraph
                  name: 'Number of bytes'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
                    - type: STRING
                      name: ds.1.color.0
                      value: FF465C
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.1.fill
                      value: '5'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: graphprototype
                  name: 'Network interface speed'
                  'y': '8'
                  width: '72'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.linkspeed[{$VMWARE.URL},{$VMWARE.HV.UUID},{#IFNAME}]'
                    - type: STRING
                      name: reference
                      value: AAAAF
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: svggraph
                  name: 'Number of dropped'
                  x: '36'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},dropped]'
                    - type: STRING
                      name: ds.1.color.0
                      value: FF465C
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.1.fill
                      value: '5'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},dropped]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAG
                - type: svggraph
                  name: 'Number of errors'
                  x: '36'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: STRING
                      name: ds.0.color.0
                      value: 00BFFF
                    - type: INTEGER
                      name: ds.0.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.0.fill
                      value: '5'
                    - type: ITEM
                      name: ds.0.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},errors]'
                    - type: STRING
                      name: ds.1.color.0
                      value: FF465C
                    - type: INTEGER
                      name: ds.1.dataset_type
                      value: '0'
                    - type: INTEGER
                      name: ds.1.fill
                      value: '5'
                    - type: ITEM
                      name: ds.1.itemids.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},errors]'
                    - type: INTEGER
                      name: legend_columns
                      value: '1'
                    - type: INTEGER
                      name: legend_lines
                      value: '2'
                    - type: INTEGER
                      name: legend_statistic
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAH
            - name: 'VMware: Datastore'
              widgets:
                - type: honeycomb
                  name: 'Total size of datastore'
                  width: '24'
                  height: '4'
                  fields:
                    - type: STRING
                      name: bg_color
                      value: 81D4FA
                    - type: STRING
                      name: items.0
                      value: 'Total size of datastore*'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("datastore.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAJ
                - type: graphprototype
                  name: 'Average read IOps of the datastore'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},rps]'
                    - type: STRING
                      name: reference
                      value: AAAAK
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average read latency of the datastore'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},latency]'
                    - type: STRING
                      name: reference
                      value: AAAAP
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: honeycomb
                  name: 'Free space on datastore'
                  x: '24'
                  width: '24'
                  height: '4'
                  fields:
                    - type: STRING
                      name: items.0
                      value: 'Free space on datastore*'
                    - type: STRING
                      name: primary_label
                      value: '{{ITEM.NAME}.regsub("datastore.\[(.*)\]", \1)}'
                    - type: INTEGER
                      name: primary_label_size_type
                      value: '1'
                    - type: STRING
                      name: reference
                      value: AAAAL
                    - type: STRING
                      name: thresholds.0.color
                      value: FF465C
                    - type: STRING
                      name: thresholds.0.threshold
                      value: '10'
                    - type: STRING
                      name: thresholds.1.color
                      value: FFD54F
                    - type: STRING
                      name: thresholds.1.threshold
                      value: '20'
                    - type: STRING
                      name: thresholds.2.color
                      value: 0EC9AC
                    - type: STRING
                      name: thresholds.2.threshold
                      value: '30'
                - type: graphprototype
                  name: 'Average write IOps of the datastore'
                  x: '36'
                  'y': '4'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},rps]'
                    - type: STRING
                      name: reference
                      value: AAAAM
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Average write latency of the datastore'
                  x: '36'
                  'y': '8'
                  width: '36'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},latency]'
                    - type: STRING
                      name: reference
                      value: AAAAN
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: graphprototype
                  name: 'Free space on datastore'
                  x: '48'
                  width: '24'
                  height: '4'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid.0
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE.UUID},pfree]'
                    - type: STRING
                      name: reference
                      value: AAAAO
                    - type: INTEGER
                      name: source_type
                      value: '3'
      valuemaps:
        - uuid: 25d04e2838af4fcca9ddd21df6781497
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
        - uuid: 66bedf62dffd4402a037a6ef0f93f228
          name: 'VMware Connection state'
          mappings:
            - value: '0'
              newvalue: Connected
            - value: '1'
              newvalue: Disconnected
            - value: '2'
              newvalue: 'Not responding'
            - value: '3'
              newvalue: Unknown
        - uuid: 2b324fd8d7624874a3a81449b62c2cd6
          name: 'VMware status'
          mappings:
            - value: '0'
              newvalue: Gray
            - value: '1'
              newvalue: Green
            - value: '2'
              newvalue: Yellow
            - value: '3'
              newvalue: Red
  triggers:
    - uuid: da703e83e2e146569c173fd9bc6988dd
      expression: '(between(last(/VMware Guest/vmware.vm.guest.osuptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]),1,10m)=1 or between(last(/VMware Guest/vmware.vm.uptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]),1,10m)=1) and last(/VMware Guest/vmware.vm.powerstate[{$VMWARE.URL},{$VMWARE.VM.UUID}]) = 1'
      name: 'VMware Guest: VM has been restarted'
      event_name: 'VMware Guest: VM has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'VMware Guest: Hypervisor is in the maintenance mode'
          expression: 'last(/VMware Guest/vmware.vm.hv.maintenance[{$VMWARE.URL},{$VMWARE.VM.UUID}])=1 and {$VMWARE.HYPERVISOR.MAINTENANCE}=1'
      tags:
        - tag: scope
          value: notice
