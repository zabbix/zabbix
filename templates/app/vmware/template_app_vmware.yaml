zabbix_export:
  version: '5.4'
  date: '2021-05-09T00:00:00Z'
  groups:
    -
      name: Templates/Applications
  templates:
    -
      template: 'VMware Guest'
      name: 'VMware Guest'
      description: 'Template tooling version used: 0.38'
      templates:
        -
          name: 'VMware macros'
      groups:
        -
          name: Templates/Applications
      items:
        -
          name: 'VMware: Cluster name'
          type: SIMPLE
          key: 'vmware.vm.cluster.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Cluster name of the guest VM.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU latency in percents'
          type: SIMPLE
          key: 'vmware.vm.cpu.latency[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of time the virtual machine is unable to run because it is contending for access to the physical CPU(s).'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Number of virtual CPUs'
          type: SIMPLE
          key: 'vmware.vm.cpu.num[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of virtual CPUs assigned to the guest.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU readiness latency in percents'
          type: SIMPLE
          key: 'vmware.vm.cpu.readiness[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of time that the virtual machine was ready, but could not get scheduled to run on the physical CPU.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU ready'
          type: SIMPLE
          key: 'vmware.vm.cpu.ready[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: ms
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Time that the virtual machine was ready, but could not get scheduled to run on the physical CPU during last measurement interval (VMware vCenter/ESXi Server performance counter sampling interval - 20 seconds)'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU swap-in latence in percents'
          type: SIMPLE
          key: 'vmware.vm.cpu.swapwait[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of CPU time spent waiting for swap-in.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU usage in percents'
          type: SIMPLE
          key: 'vmware.vm.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU usage'
          type: SIMPLE
          key: 'vmware.vm.cpu.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Current upper-bound on CPU usage. The upper-bound is based on the host the virtual machine is current running on, as well as limits configured on the virtual machine itself or any parent resource pool. Valid while the virtual machine is running.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Datacenter name'
          type: SIMPLE
          key: 'vmware.vm.datacenter.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Datacenter name of the guest VM.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Guest memory swapped'
          type: SIMPLE
          key: 'vmware.vm.guest.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of guest physical memory that is swapped out to the swap space.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Uptime of guest OS'
          type: SIMPLE
          key: 'vmware.vm.guest.osuptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total time elapsed since the last operating system boot-up (in seconds).'
          tags:
            -
              tag: Application
              value: VMware
          triggers:
            -
              expression: 'last(/VMware Guest/vmware.vm.guest.osuptime[{$VMWARE.URL},{$VMWARE.VM.UUID}])<10m'
              name: 'VMware: VM has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes'
              manual_close: 'YES'
        -
          name: 'VMware: Hypervisor name'
          type: SIMPLE
          key: 'vmware.vm.hv.name[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Hypervisor name of the guest VM.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Ballooned memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is currently reclaimed through the balloon driver.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Compressed memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.compressed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of memory currently in the compression cache for this VM.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Host memory consumed'
          type: SIMPLE
          key: 'vmware.vm.memory.size.consumed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of host physical memory consumed for backing up guest physical memory pages.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Private memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.private[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Amount of memory backed by host memory and not being shared.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Shared memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.shared[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory shared through transparent page sharing.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Swapped memory'
          type: SIMPLE
          key: 'vmware.vm.memory.size.swapped[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory swapped out to the VM''s swap device by ESX.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Guest memory usage'
          type: SIMPLE
          key: 'vmware.vm.memory.size.usage.guest[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is being used by the VM.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Host memory usage'
          type: SIMPLE
          key: 'vmware.vm.memory.size.usage.host[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of host physical memory allocated to the VM, accounting for saving from memory sharing with other VMs.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Memory size'
          type: SIMPLE
          key: 'vmware.vm.memory.size[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total size of configured memory.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Host memory usage in percents'
          type: SIMPLE
          key: 'vmware.vm.memory.usage[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Percentage of host physical memory that has been consumed.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Power state'
          type: SIMPLE
          key: 'vmware.vm.powerstate[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The current power state of the virtual machine.'
          valuemap:
            name: 'VMware VirtualMachinePowerState'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Committed storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.committed[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total storage space, in bytes, committed to this virtual machine across all datastores.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Uncommitted storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.uncommitted[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Additional storage space, in bytes, potentially used by this virtual machine on all datastores.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Unshared storage space'
          type: SIMPLE
          key: 'vmware.vm.storage.unshared[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Total storage space, in bytes, occupied by the virtual machine across all datastores, that is not shared with any other virtual machine.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Uptime'
          type: SIMPLE
          key: 'vmware.vm.uptime[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          history: 7d
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'System uptime.'
          tags:
            -
              tag: Application
              value: VMware
      discovery_rules:
        -
          name: 'Network device discovery'
          type: SIMPLE
          key: 'vmware.vm.net.if.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all network devices.'
          item_prototypes:
            -
              name: 'VMware: Number of bytes received on interface {#IFDESC}'
              type: SIMPLE
              key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
              history: 7d
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface input statistics (bytes per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Number of packets received on interface {#IFDESC}'
              type: SIMPLE
              key: 'vmware.vm.net.if.in[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface input statistics (packets per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Number of bytes transmitted on interface {#IFDESC}'
              type: SIMPLE
              key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},bps]'
              history: 7d
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface output statistics (bytes per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Number of packets transmitted on interface {#IFDESC}'
              type: SIMPLE
              key: 'vmware.vm.net.if.out[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME},pps]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network interface output statistics (packets per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Network utilization on interface {#IFDESC}'
              type: SIMPLE
              key: 'vmware.vm.net.if.usage[{$VMWARE.URL},{$VMWARE.VM.UUID},{#IFNAME}]'
              history: 7d
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine network utilization (combined transmit-rates and receive-rates) during the interval.'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1024'
              tags:
                -
                  tag: Application
                  value: VMware
        -
          name: 'Disk device discovery'
          type: SIMPLE
          key: 'vmware.vm.vfs.dev.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all disk devices.'
          item_prototypes:
            -
              name: 'VMware: Average number of outstanding read requests to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.storage.readoio[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average number of outstanding read requests to the virtual disk during the collection interval.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average read latency to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.storage.totalreadlatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              history: 7d
              units: '!ms'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'The average time a read from the virtual disk takes.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average write latency to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.storage.totalwritelatency[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              history: 7d
              units: '!ms'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'The average time a write to the virtual disk takes.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average number of outstanding write requests to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.storage.writeoio[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME}]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average number of outstanding write requests to the virtual disk during the collection interval.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average number of bytes read from the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.read[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
              history: 7d
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device read statistics (bytes per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average number of reads from the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.read[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},ops]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device read statistics (operations per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average number of bytes written to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.write[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},bps]'
              history: 7d
              units: Bps
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device write statistics (bytes per second).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average number of writes to the disk {#DISKDESC}'
              type: SIMPLE
              key: 'vmware.vm.vfs.dev.write[{$VMWARE.URL},{$VMWARE.VM.UUID},{#DISKNAME},ops]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine disk device write statistics (operations per second).'
              tags:
                -
                  tag: Application
                  value: VMware
        -
          name: 'Mounted filesystem discovery'
          type: SIMPLE
          key: 'vmware.vm.vfs.fs.discovery[{$VMWARE.URL},{$VMWARE.VM.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Discovery of all guest file systems.'
          item_prototypes:
            -
              name: 'VMware: Free disk space on {#FSNAME}'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},free]'
              history: 7d
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine file system statistics (bytes).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Free disk space on {#FSNAME} (percentage)'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},pfree]'
              history: 7d
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine file system statistics (percentages).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Total disk space on {#FSNAME}'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},total]'
              delay: 1h
              history: 7d
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine total disk space (bytes).'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Used disk space on {#FSNAME}'
              type: SIMPLE
              key: 'vmware.vm.vfs.fs.size[{$VMWARE.URL},{$VMWARE.VM.UUID},{#FSNAME},used]'
              history: 7d
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware virtual machine used disk space (bytes).'
              tags:
                -
                  tag: Application
                  value: VMware
      valuemaps:
        -
          name: 'VMware VirtualMachinePowerState'
          mappings:
            -
              value: '0'
              newvalue: poweredOff
            -
              value: '1'
              newvalue: poweredOn
            -
              value: '2'
              newvalue: suspended
    -
      template: 'VMware Hypervisor'
      name: 'VMware Hypervisor'
      description: 'Template tooling version used: 0.38'
      templates:
        -
          name: 'VMware macros'
      groups:
        -
          name: Templates/Applications
      items:
        -
          name: 'VMware: Hypervisor ping'
          type: SIMPLE
          key: 'icmpping[]'
          history: 7d
          description: 'Checks if the hypervisor is running and accepting ICMP pings.'
          valuemap:
            name: 'Service state'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            -
              tag: Application
              value: VMware
          triggers:
            -
              expression: 'last(/VMware Hypervisor/icmpping[])=0'
              name: 'VMware: Hypervisor is down'
              priority: AVERAGE
              description: 'The service is unavailable or does not accept ICMP ping.'
              manual_close: 'YES'
        -
          name: 'VMware: Cluster name'
          type: SIMPLE
          key: 'vmware.hv.cluster.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Cluster name of the guest VM.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU usage in percents'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU usage'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Aggregated CPU usage across all cores on the host in Hz. This is only available if the host is connected.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU utilization'
          type: SIMPLE
          key: 'vmware.hv.cpu.utilization[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval depends on power management or HT.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Datacenter name'
          type: SIMPLE
          key: 'vmware.hv.datacenter.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Datacenter name of the hypervisor.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Full name'
          type: SIMPLE
          key: 'vmware.hv.fullname[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The complete product name, including the version information.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU frequency'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.freq[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The speed of the CPU cores. This is an average value if there are multiple speeds. The product of CPU frequency and number of cores is approximately equal to the sum of the MHz for all the individual cores on the host.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU model'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The CPU model.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU cores'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU cores on the host. Physical CPU cores are the processors contained by a CPU package.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: CPU threads'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.threads[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU threads on the host.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Total memory'
          type: SIMPLE
          key: 'vmware.hv.hw.memory[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The physical memory size.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Model'
          type: SIMPLE
          key: 'vmware.hv.hw.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The system model identification.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Bios UUID'
          type: SIMPLE
          key: 'vmware.hv.hw.uuid[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware BIOS identification.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Vendor'
          type: SIMPLE
          key: 'vmware.hv.hw.vendor[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware vendor identification.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Ballooned memory'
          type: SIMPLE
          key: 'vmware.hv.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is currently reclaimed through the balloon driver. Sum of all guest VMs.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Used memory'
          type: SIMPLE
          key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Physical memory usage on the host.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Number of bytes received'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          history: 7d
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (bytes per second).'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Number of bytes transmitted'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          history: 7d
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (bytes per second).'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Power usage maximum allowed'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID},max]'
          history: 7d
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Maximum allowed power usage.'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Power usage'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Current power usage.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Health state rollup'
          type: SIMPLE
          key: 'vmware.hv.sensor.health.state[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The host health state rollup sensor value: gray - unknown, green - ok, red - it has a problem, yellow - it might have a problem.'
          valuemap:
            name: 'VMware status'
          tags:
            -
              tag: Application
              value: VMware
          triggers:
            -
              expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
              priority: HIGH
              description: 'One or more components in the appliance might be in an unusable status and the appliance might become unresponsive soon. Security patches might be available.'
              dependencies:
                -
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                  expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
            -
              expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
              priority: AVERAGE
              description: 'One or more components in the appliance might become overloaded soon.'
              dependencies:
                -
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                -
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                  expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                -
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
                  expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
        -
          name: 'VMware: Overall status'
          type: SIMPLE
          key: 'vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The overall alarm status of the host: gray - unknown, green - ok, red - it has a problem, yellow - it might have a problem.'
          valuemap:
            name: 'VMware status'
          tags:
            -
              tag: Application
              value: VMware
          triggers:
            -
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
              priority: HIGH
              description: 'One or more components in the appliance might be in an unusable status and the appliance might become unresponsive soon. Security patches might be available.'
            -
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
              priority: AVERAGE
              description: 'One or more components in the appliance might become overloaded soon.'
              dependencies:
                -
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                  expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
        -
          name: 'VMware: Uptime'
          type: SIMPLE
          key: 'vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'System uptime.'
          tags:
            -
              tag: Application
              value: VMware
          triggers:
            -
              expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              name: 'VMware: Hypervisor has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes'
              manual_close: 'YES'
        -
          name: 'VMware: Version'
          type: SIMPLE
          key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Dot-separated version string.'
          tags:
            -
              tag: Application
              value: VMware
        -
          name: 'VMware: Number of guest VMs'
          type: SIMPLE
          key: 'vmware.hv.vm.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of guest virtual machines.'
          tags:
            -
              tag: Application
              value: VMware
      discovery_rules:
        -
          name: 'Datastore discovery'
          type: SIMPLE
          key: 'vmware.hv.datastore.discovery[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          item_prototypes:
            -
              name: 'VMware: Multipath count for datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Number of available datastore paths.'
              tags:
                -
                  tag: Application
                  value: VMware
              trigger_prototypes:
                -
                  expression: '(last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}],#1)<>last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}],#2))=1 and last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}])<{#MULTIPATH.COUNT}'
                  name: 'VMware: The multipath count has been changed'
                  opdata: 'Current: {ITEM.LASTVALUE}, Registered: {#MULTIPATH.COUNT}'
                  priority: AVERAGE
                  description: 'The number of available datastore paths less than registered ({#MULTIPATH.COUNT}).'
                  manual_close: 'YES'
            -
              name: 'VMware: Average read latency of the datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a read operation from the datastore (milliseconds).'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Free space on datastore {#DATASTORE} (percentage)'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},pfree]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in percentage from total.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Total size of datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}]'
              delay: 5m
              history: 7d
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in bytes.'
              tags:
                -
                  tag: Application
                  value: VMware
            -
              name: 'VMware: Average write latency of the datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a write operation to the datastore (milliseconds).'
              tags:
                -
                  tag: Application
                  value: VMware
      valuemaps:
        -
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up
        -
          name: 'VMware status'
          mappings:
            -
              value: '0'
              newvalue: gray
            -
              value: '1'
              newvalue: green
            -
              value: '2'
              newvalue: yellow
            -
              value: '3'
              newvalue: red
    -
      template: 'VMware macros'
      name: 'VMware macros'
      description: 'Template tooling version used: 0.38'
      groups:
        -
          name: Templates/Applications
      macros:
        -
          macro: '{$VMWARE.PASSWORD}'
          description: 'VMware service {$USERNAME} user password'
        -
          macro: '{$VMWARE.URL}'
          description: 'VMware service (vCenter or ESX hypervisor) SDK URL (https://servername/sdk)'
        -
          macro: '{$VMWARE.USERNAME}'
          description: 'VMware service user name'
