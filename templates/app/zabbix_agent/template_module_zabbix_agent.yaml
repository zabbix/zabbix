zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    - uuid: 8aa4557f6c3f4aadbc03447fca3af9f6
      template: 'Zabbix agent'
      name: 'Zabbix agent'
      description: |
        Use this template for agents reachable from Zabbix server/proxy (passive mode).
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.0-0
      groups:
        - name: Templates/Applications
      items:
        - uuid: f46c6142cf434df1b6abe9334bf6c84c
          name: 'Zabbix agent: Host name of Zabbix agent running'
          key: agent.hostname
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: 37a952edc12f47d6ac6f3ca04eb41326
          name: 'Zabbix agent: Zabbix agent ping'
          key: agent.ping
          history: 7d
          description: 'The agent always returns 1 for this item. It could be used in combination with nodata() for availability check.'
          valuemap:
            name: 'Zabbix agent ping status'
          tags:
            - tag: component
              value: system
        - uuid: 3a6af03a083b4366bd1d4c6ccf06ca88
          name: 'Zabbix agent: Version of Zabbix agent running'
          key: agent.version
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: application
        - uuid: 49708b126e3844b898d2625f77c0030c
          name: 'Zabbix agent: Zabbix agent availability'
          type: INTERNAL
          key: 'zabbix[host,agent,available]'
          history: 7d
          description: 'Monitoring the availability status of the agent.'
          valuemap:
            name: zabbix.host.available
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 6767f9c764bb42dfa961baacf879f45c
              expression: 'max(/Zabbix agent/zabbix[host,agent,available],{$AGENT.TIMEOUT})=0'
              name: 'Zabbix agent: Zabbix agent is not available'
              event_name: 'Zabbix agent: Zabbix agent is not available (for {$AGENT.TIMEOUT})'
              priority: AVERAGE
              description: 'For passive only agents, host availability is used with {$AGENT.TIMEOUT} as time threshold.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
      tags:
        - tag: class
          value: software
        - tag: target
          value: zabbix-agent
      macros:
        - macro: '{$AGENT.TIMEOUT}'
          value: 3m
          description: 'Timeout after which agent is considered unavailable. Works only for agents reachable from Zabbix server/proxy (passive mode).'
      dashboards:
        - uuid: 9dbe822be2c0418592b33289b820256f
          name: 'Zabbix agent: Overview'
          pages:
            - name: Main
              widgets:
                - type: item
                  name: 'Agent availability'
                  width: '6'
                  height: '3'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent'
                        key: agent.ping
                    - type: INTEGER
                      name: show.0
                      value: '4'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                - type: item
                  name: Version
                  x: '6'
                  width: '6'
                  height: '3'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent'
                        key: agent.version
                    - type: INTEGER
                      name: show.0
                      value: '4'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                - type: graph
                  x: '12'
                  width: '12'
                  height: '5'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent'
                        key: agent.ping
                    - type: STRING
                      name: reference
                      value: AAAAA
                    - type: INTEGER
                      name: source_type
                      value: '1'
      valuemaps:
        - uuid: 0d5e922550954e6bad89b22f1d9d0c65
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
        - uuid: e5a39fd666b04b70b6eea53e2373b564
          name: 'Zabbix agent ping status'
          mappings:
            - value: '1'
              newvalue: Up
    - uuid: 650bec3f2f364a478b82317396949459
      template: 'Zabbix agent active'
      name: 'Zabbix agent active'
      description: |
        Use this template instead of 'Zabbix agent' for agents running in active mode only.
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 7.0-0
      groups:
        - name: Templates/Applications
      items:
        - uuid: ca27c17d8ca34643a7db8b99d2cc3025
          name: 'Zabbix agent active: Host name of Zabbix agent running'
          type: ZABBIX_ACTIVE
          key: agent.hostname
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: 0f86ec6cde2249f7946c678f9fd2665a
          name: 'Zabbix agent active: Zabbix agent ping'
          type: ZABBIX_ACTIVE
          key: agent.ping
          history: 7d
          description: 'The agent always returns 1 for this item. It could be used in combination with nodata() for availability check.'
          valuemap:
            name: 'Zabbix agent ping status'
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 6bbb74c522d44baea8c6ceb666423da2
              expression: 'nodata(/Zabbix agent active/agent.ping,{$AGENT.NODATA_TIMEOUT})=1'
              name: 'Zabbix agent active: Zabbix agent is not available'
              event_name: 'Zabbix agent active: Zabbix agent is not available (or nodata for {$AGENT.NODATA_TIMEOUT})'
              priority: AVERAGE
              description: 'For active agents, nodata() with agent.ping is used with {$AGENT.NODATA_TIMEOUT} as time threshold.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
        - uuid: 41fb0f76fa1d464f8ab67f744fc29e8b
          name: 'Zabbix agent active: Version of Zabbix agent running'
          type: ZABBIX_ACTIVE
          key: agent.version
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: application
        - uuid: 0fd83c56dce244738607cd6585a6acb3
          name: 'Zabbix agent active: Active agent availability'
          type: INTERNAL
          key: 'zabbix[host,active_agent,available]'
          history: 7d
          description: |
            Availability of active checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible value:
            0 - unknown
            1 - available
            2 - not available
          valuemap:
            name: zabbix.host.active_agent.available
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: e91c556b0ff64292b9b9b5709a5d74b3
              expression: 'min(/Zabbix agent active/zabbix[host,active_agent,available],{$AGENT.TIMEOUT})=2'
              name: 'Zabbix agent active: Active checks are not available'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'Active checks are considered unavailable. Agent is not sending heartbeat for prolonged time.'
              tags:
                - tag: scope
                  value: availability
      tags:
        - tag: class
          value: software
        - tag: target
          value: zabbix-agent
      macros:
        - macro: '{$AGENT.NODATA_TIMEOUT}'
          value: 30m
          description: 'No data timeout for active agents. Consider to keep it relatively high.'
        - macro: '{$AGENT.TIMEOUT}'
          value: 5m
          description: 'Timeout after which agent is considered unavailable.'
      dashboards:
        - uuid: 27dea14380314e67906525ad3d2a995a
          name: 'Zabbix agent active: Overview'
          pages:
            - name: Main
              widgets:
                - type: item
                  name: 'Agent availability'
                  width: '6'
                  height: '3'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent active'
                        key: agent.ping
                    - type: INTEGER
                      name: show.0
                      value: '4'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                - type: item
                  name: Version
                  x: '6'
                  width: '6'
                  height: '3'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent active'
                        key: agent.version
                    - type: INTEGER
                      name: show.0
                      value: '4'
                    - type: INTEGER
                      name: show.1
                      value: '2'
                - type: graph
                  x: '12'
                  width: '12'
                  height: '5'
                  fields:
                    - type: ITEM
                      name: itemid.0
                      value:
                        host: 'Zabbix agent active'
                        key: agent.ping
                    - type: STRING
                      name: reference
                      value: AAAAA
                    - type: INTEGER
                      name: source_type
                      value: '1'
      valuemaps:
        - uuid: 9f93aabb08794395b1c62cf784fc58c3
          name: zabbix.host.active_agent.available
          mappings:
            - value: '0'
              newvalue: unknown
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: 'not available'
        - uuid: 9bf3eef7e8d8402ca6f826b377ea2db6
          name: 'Zabbix agent ping status'
          mappings:
            - value: '1'
              newvalue: Up
