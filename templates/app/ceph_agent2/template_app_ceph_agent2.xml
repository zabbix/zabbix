<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
   <version>5.0</version>
   <date>2022-10-18T20:49:06Z</date>
   <groups>
      <group>
         <name>Templates/Applications</name>
      </group>
   </groups>
   <templates>
      <template>
         <template>Template App Ceph by Zabbix Agent2</template>
         <name>Template App Ceph by Zabbix Agent2</name>
         <description>You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/410059-discussion-thread-for-official-zabbix-template-ceph&#13;
&#13;
Template tooling version used: 0.39</description>
         <groups>
            <group>
               <name>Templates/Applications</name>
            </group>
         </groups>
         <applications>
            <application>
               <name>Ceph</name>
            </application>
            <application>
               <name>Zabbix raw items</name>
            </application>
         </applications>
         <items>
            <item>
               <name>Ceph: Get df</name>
               <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <history>0</history>
               <trends>0</trends>
               <value_type>TEXT</value_type>
               <applications>
                  <application>
                     <name>Zabbix raw items</name>
                  </application>
               </applications>
            </item>
            <item>
               <name>Ceph: Minimum Mon release version</name>
               <type>DEPENDENT</type>
               <key>ceph.min_mon_release_name</key>
               <delay>0</delay>
               <history>7d</history>
               <trends>0</trends>
               <value_type>CHAR</value_type>
               <description>min_mon_release_name</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.min_mon_release_name</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>1h</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
               <triggers>
                  <trigger>
                     <expression>{diff()}=1 and {strlen()}&gt;0</expression>
                     <name>Ceph: Minimum monitor release version has changed (new version: {ITEM.VALUE})</name>
                     <priority>INFO</priority>
                     <description>Ceph version has changed. Ack to close.</description>
                     <manual_close>YES</manual_close>
                  </trigger>
               </triggers>
            </item>
            <item>
               <name>Ceph: Number of Monitors</name>
               <type>DEPENDENT</type>
               <key>ceph.num_mon</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The number of Monitors configured in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_mon</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>30m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of OSDs</name>
               <type>DEPENDENT</type>
               <key>ceph.num_osd</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The number of the known storage daemons in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_osd</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of OSDs in state: IN</name>
               <type>DEPENDENT</type>
               <key>ceph.num_osd_in</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of the participating storage daemons in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_osd_in</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of OSDs in state: UP</name>
               <type>DEPENDENT</type>
               <key>ceph.num_osd_up</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of the online storage daemons in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_osd_up</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups</name>
               <type>DEPENDENT</type>
               <key>ceph.num_pg</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_pg</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Temporary state</name>
               <type>DEPENDENT</type>
               <key>ceph.num_pg_temp</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a *pg_temp* state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_pg_temp</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Pools</name>
               <type>DEPENDENT</type>
               <key>ceph.num_pools</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of pools in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.num_pools</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph backfill full ratio</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_backfillfull_ratio</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The backfill full ratio setting of the Ceph cluster as configured on OSDMap.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_backfillfull_ratio</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD avg fill</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_fill.avg</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>%</units>
               <description>The average fill of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_fill.avg</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD max fill</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_fill.max</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>%</units>
               <description>The percentage of the most filled OSD.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_fill.max</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD min fill</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_fill.min</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>%</units>
               <description>The percentage fill of the minimum filled OSD.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_fill.min</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph full ratio</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_full_ratio</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The full ratio setting of the Ceph cluster as configured on OSDMap.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_full_ratio</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Apply latency Avg</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_apply.avg</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The average apply latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_apply.avg</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Apply latency Max</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_apply.max</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The maximum apply latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_apply.max</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Apply latency Min</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_apply.min</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The minimum apply latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_apply.min</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Commit latency Avg</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_commit.avg</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The average commit latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_commit.avg</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Commit latency Max</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_commit.max</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The maximum commit latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_commit.max</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD Commit latency Min</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_latency_commit.min</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ms</units>
               <description>The minimum commit latency of OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_latency_commit.min</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph nearfull ratio</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_nearfull_ratio</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The near full ratio setting of the Ceph cluster as configured on OSDMap.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_nearfull_ratio</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD avg PGs</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_pgs.avg</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The average amount of Placement Groups on OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_pgs.avg</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD max PGs</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_pgs.max</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The maximum amount of Placement Groups on OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_pgs.max</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph OSD min PGs</name>
               <type>DEPENDENT</type>
               <key>ceph.osd_pgs.min</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <description>The minimum amount of Placement Groups on OSDs.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.osd_pgs.min</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Get OSD dump</name>
               <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <history>0</history>
               <trends>0</trends>
               <value_type>TEXT</value_type>
               <applications>
                  <application>
                     <name>Zabbix raw items</name>
                  </application>
               </applications>
            </item>
            <item>
               <name>Ceph: Get OSD stats</name>
               <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <history>0</history>
               <trends>0</trends>
               <value_type>TEXT</value_type>
               <applications>
                  <application>
                     <name>Zabbix raw items</name>
                  </application>
               </applications>
            </item>
            <item>
               <name>Ceph: Overall cluster status</name>
               <type>DEPENDENT</type>
               <key>ceph.overall_status</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The overall Ceph cluster status, eg 0 - HEALTH_OK, 1 - HEALTH_WARN or 2 - HEALTH_ERR.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <valuemap>
                  <name>Ceph cluster status</name>
               </valuemap>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.overall_status</params>
                  </step>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>10m</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
               <triggers>
                  <trigger>
                     <expression>{last()}=2</expression>
                     <name>Ceph: Cluster in ERROR state</name>
                     <priority>AVERAGE</priority>
                     <manual_close>YES</manual_close>
                  </trigger>
                  <trigger>
                     <expression>{last()}=1</expression>
                     <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                     <recovery_expression>{last()}=0</recovery_expression>
                     <name>Ceph: Cluster in WARNING state</name>
                     <priority>WARNING</priority>
                     <manual_close>YES</manual_close>
                     <dependencies>
                        <dependency>
                           <name>Ceph: Cluster in ERROR state</name>
                           <expression>{Template App Ceph by Zabbix Agent2:ceph.overall_status.last()}=2</expression>
                        </dependency>
                     </dependencies>
                  </trigger>
               </triggers>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Active state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.active</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in an active state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.active</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in backfill_toofull state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.backfill_toofull</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a *backfill_toofull state*.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.backfill_toofull</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in backfill_wait state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.backfill_wait</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a *backfill_wait* state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.backfill_wait</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Backfilling state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.backfilling</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a backfill state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.backfilling</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Clean state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.clean</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a clean state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.clean</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in degraded state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.degraded</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a degraded state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.degraded</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in inconsistent state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.inconsistent</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in an inconsistent state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.inconsistent</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Peering state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.peering</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a peering state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.peering</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in recovering state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.recovering</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a recovering state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.recovering</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in recovery_wait state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.recovery_wait</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a *recovery_wait* state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.recovery_wait</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in remapped state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.remapped</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a remapped state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.remapped</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Scrubbing state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.scrubbing</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in a scrubbing state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.scrubbing</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Undersized state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.undersized</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in an undersized state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.undersized</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Number of Placement Groups in Unknown state</name>
               <type>DEPENDENT</type>
               <key>ceph.pg_states.unknown</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of Placement Groups in an unknown state.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.pg_states.unknown</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ping</name>
               <key>ceph.ping["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <history>7d</history>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <valuemap>
                  <name>Service state</name>
               </valuemap>
               <preprocessing>
                  <step>
                     <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                     <params>30m</params>
                  </step>
               </preprocessing>
               <triggers>
                  <trigger>
                     <expression>{last()}=0</expression>
                     <name>Ceph: Can not connect to cluster</name>
                     <priority>AVERAGE</priority>
                     <description>Connection to Ceph RESTful module is broken (if there is any error presented including AUTH and configuration issues).</description>
                  </trigger>
               </triggers>
            </item>
            <item>
               <name>Ceph: Ceph Read bandwidth</name>
               <type>DEPENDENT</type>
               <key>ceph.rd_bytes.rate</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>Bps</units>
               <description>The global read bytes per second.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.rd_bytes</params>
                  </step>
                  <step>
                     <type>CHANGE_PER_SECOND</type>
                     <params/>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph Read operations per sec</name>
               <type>DEPENDENT</type>
               <key>ceph.rd_ops.rate</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ops</units>
               <description>The global read operations per second.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.rd_ops</params>
                  </step>
                  <step>
                     <type>CHANGE_PER_SECOND</type>
                     <params/>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Get overall cluster status</name>
               <key>ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <history>0</history>
               <trends>0</trends>
               <value_type>TEXT</value_type>
               <applications>
                  <application>
                     <name>Zabbix raw items</name>
                  </application>
               </applications>
            </item>
            <item>
               <name>Ceph: Total bytes available</name>
               <type>DEPENDENT</type>
               <key>ceph.total_avail_bytes</key>
               <delay>0</delay>
               <history>7d</history>
               <units>B</units>
               <description>The total bytes available in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.total_avail_bytes</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Total bytes</name>
               <type>DEPENDENT</type>
               <key>ceph.total_bytes</key>
               <delay>0</delay>
               <history>7d</history>
               <units>B</units>
               <description>The total (RAW) capacity of a Ceph cluster in bytes.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.total_bytes</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Total number of objects</name>
               <type>DEPENDENT</type>
               <key>ceph.total_objects</key>
               <delay>0</delay>
               <history>7d</history>
               <description>The total number of objects in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.total_objects</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Total bytes used</name>
               <type>DEPENDENT</type>
               <key>ceph.total_used_bytes</key>
               <delay>0</delay>
               <history>7d</history>
               <units>B</units>
               <description>The total bytes used in a Ceph cluster.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.total_used_bytes</params>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph Write bandwidth</name>
               <type>DEPENDENT</type>
               <key>ceph.wr_bytes.rate</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>Bps</units>
               <description>The global write bytes per second.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.wr_bytes</params>
                  </step>
                  <step>
                     <type>CHANGE_PER_SECOND</type>
                     <params/>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
            <item>
               <name>Ceph: Ceph Write operations per sec</name>
               <type>DEPENDENT</type>
               <key>ceph.wr_ops.rate</key>
               <delay>0</delay>
               <history>7d</history>
               <value_type>FLOAT</value_type>
               <units>ops</units>
               <description>The global write operations per second.</description>
               <applications>
                  <application>
                     <name>Ceph</name>
                  </application>
               </applications>
               <preprocessing>
                  <step>
                     <type>JSONPATH</type>
                     <params>$.wr_ops</params>
                  </step>
                  <step>
                     <type>CHANGE_PER_SECOND</type>
                     <params/>
                  </step>
               </preprocessing>
               <master_item>
                  <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               </master_item>
            </item>
         </items>
         <discovery_rules>
            <discovery_rule>
               <name>OSD</name>
               <key>ceph.osd.discovery["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <delay>1h</delay>
               <item_prototypes>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD fill</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},fill]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>%</units>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.osd_fill</params>
                           <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{min(15m)} &gt; {Template App Ceph by Zabbix Agent2:ceph.osd_nearfull_ratio.last()}*100</expression>
                           <name>Ceph: Ceph OSD osd.{#OSDNAME} is near full</name>
                           <priority>WARNING</priority>
                           <dependencies>
                              <dependency>
                                 <name>Ceph: OSD osd.{#OSDNAME} is full</name>
                                 <expression>{Template App Ceph by Zabbix Agent2:ceph.osd[{#OSDNAME},fill].min(15m)} &gt; {Template App Ceph by Zabbix Agent2:ceph.osd_full_ratio.last()}*100</expression>
                              </dependency>
                           </dependencies>
                        </trigger_prototype>
                        <trigger_prototype>
                           <expression>{min(15m)} &gt; {Template App Ceph by Zabbix Agent2:ceph.osd_full_ratio.last()}*100</expression>
                           <name>Ceph: OSD osd.{#OSDNAME} is full</name>
                           <priority>AVERAGE</priority>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD in</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},in]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.in</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>10m</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD latency apply</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},latency_apply]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>ms</units>
                     <description>The time taken to flush an update to disks.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.osd_latency_apply</params>
                           <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD latency commit</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},latency_commit]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>ms</units>
                     <description>The time taken to commit an operation to the journal.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.osd_latency_commit</params>
                           <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD PGs</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},num_pgs]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.num_pgs</params>
                           <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD up</name>
                     <type>DEPENDENT</type>
                     <key>ceph.osd[{#OSDNAME},up]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph {#HOST} OSD [{#CLASS}]</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.osds.{#OSDNAME}.up</params>
                        </step>
                        <step>
                           <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                           <params>10m</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                     <trigger_prototypes>
                        <trigger_prototype>
                           <expression>{last()} = 0</expression>
                           <name>Ceph: OSD osd.{#OSDNAME} is down</name>
                           <priority>AVERAGE</priority>
                           <description>OSD osd.{#OSDNAME} is marked "down" in the osdmap.&#13;
The OSD daemon may have been stopped, or peer OSDs may be unable to reach the OSD over the network.</description>
                        </trigger_prototype>
                     </trigger_prototypes>
                  </item_prototype>
               </item_prototypes>
               <graph_prototypes>
                  <graph_prototype>
                     <name>Ceph: [osd.{#OSDNAME}] OSD latency</name>
                     <graph_items>
                        <graph_item>
                           <color>1A7C11</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.osd[{#OSDNAME},latency_apply]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>2774A4</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.osd[{#OSDNAME},latency_commit]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
               </graph_prototypes>
            </discovery_rule>
            <discovery_rule>
               <name>Pool</name>
               <key>ceph.pool.discovery["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
               <delay>1h</delay>
               <item_prototypes>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Used</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",bytes_used]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>B</units>
                     <description>The total bytes used in a pool.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].bytes_used</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Max available</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",max_avail]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>B</units>
                     <description>The maximum available space in the given pool.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].max_avail</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool objects</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",objects]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <description>The number of objects in the pool.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].objects</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Percent Used</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",percent_used]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>%</units>
                     <description>The percentage of the storage used per pool.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].percent_used</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Read bandwidth</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",rd_bytes.rate]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>Bps</units>
                     <description>The read rate per pool (bytes per second).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].rd_bytes</params>
                        </step>
                        <step>
                           <type>CHANGE_PER_SECOND</type>
                           <params/>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Read operations</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",rd_ops.rate]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>ops</units>
                     <description>The read rate per pool (operations per second).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].rd_ops</params>
                        </step>
                        <step>
                           <type>CHANGE_PER_SECOND</type>
                           <params/>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool RAW Used</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",stored_raw]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <units>B</units>
                     <description>Bytes used in pool including the copies made.</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].stored_raw</params>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Write bandwidth</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",wr_bytes.rate]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>Bps</units>
                     <description>The write rate per pool (bytes per second).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].wr_bytes</params>
                        </step>
                        <step>
                           <type>CHANGE_PER_SECOND</type>
                           <params/>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
                  <item_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Write operations</name>
                     <type>DEPENDENT</type>
                     <key>ceph.pool["{#POOLNAME}",wr_ops.rate]</key>
                     <delay>0</delay>
                     <history>7d</history>
                     <value_type>FLOAT</value_type>
                     <units>ops</units>
                     <description>The read rate per pool (operations per second).</description>
                     <application_prototypes>
                        <application_prototype>
                           <name>Ceph CRUSH [{#CRUSHRULE}] Pool</name>
                        </application_prototype>
                     </application_prototypes>
                     <preprocessing>
                        <step>
                           <type>JSONPATH</type>
                           <params>$.pools["{#POOLNAME}"].wr_ops</params>
                        </step>
                        <step>
                           <type>CHANGE_PER_SECOND</type>
                           <params/>
                        </step>
                     </preprocessing>
                     <master_item>
                        <key>ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]</key>
                     </master_item>
                  </item_prototype>
               </item_prototypes>
               <graph_prototypes>
                  <graph_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool bandwidth</name>
                     <graph_items>
                        <graph_item>
                           <color>1A7C11</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",rd_bytes.rate]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>2774A4</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",wr_bytes.rate]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
                  <graph_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool I/O</name>
                     <graph_items>
                        <graph_item>
                           <color>1A7C11</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",rd_ops.rate]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>2774A4</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",wr_ops.rate]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
                  <graph_prototype>
                     <name>Ceph: [{#POOLNAME}] Pool Usage</name>
                     <graph_items>
                        <graph_item>
                           <color>1A7C11</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",bytes_used]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>1</sortorder>
                           <color>2774A4</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",max_avail]</key>
                           </item>
                        </graph_item>
                        <graph_item>
                           <sortorder>2</sortorder>
                           <color>F63100</color>
                           <item>
                              <host>Template App Ceph by Zabbix Agent2</host>
                              <key>ceph.pool["{#POOLNAME}",stored_raw]</key>
                           </item>
                        </graph_item>
                     </graph_items>
                  </graph_prototype>
               </graph_prototypes>
            </discovery_rule>
         </discovery_rules>
         <macros>
            <macro>
               <macro>{$CEPH.API.KEY}</macro>
               <value>zabbix_pass</value>
            </macro>
            <macro>
               <macro>{$CEPH.CONNSTRING}</macro>
               <value>https://localhost:8003</value>
            </macro>
            <macro>
               <macro>{$CEPH.USER}</macro>
               <value>zabbix</value>
            </macro>
         </macros>
      </template>
   </templates>
   <graphs>
      <graph>
         <name>Ceph: Cluster bandwidth</name>
         <graph_items>
            <graph_item>
               <color>1A7C11</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.rd_bytes.rate</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>1</sortorder>
               <color>2774A4</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.wr_bytes.rate</key>
               </item>
            </graph_item>
         </graph_items>
      </graph>
      <graph>
         <name>Ceph: Cluster I/O</name>
         <graph_items>
            <graph_item>
               <color>1A7C11</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.wr_ops.rate</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>1</sortorder>
               <color>2774A4</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.rd_ops.rate</key>
               </item>
            </graph_item>
         </graph_items>
      </graph>
      <graph>
         <name>Ceph: Free space</name>
         <type>STACKED</type>
         <graph_items>
            <graph_item>
               <drawtype>FILLED_REGION</drawtype>
               <color>1A7C11</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.total_used_bytes</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>1</sortorder>
               <drawtype>FILLED_REGION</drawtype>
               <color>2774A4</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.total_avail_bytes</key>
               </item>
            </graph_item>
         </graph_items>
      </graph>
      <graph>
         <name>Ceph: Overall OSD latency</name>
         <graph_items>
            <graph_item>
               <drawtype>BOLD_LINE</drawtype>
               <color>1A7C11</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_commit.avg</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>1</sortorder>
               <color>2774A4</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_commit.max</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>2</sortorder>
               <color>F63100</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_commit.min</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>3</sortorder>
               <drawtype>BOLD_LINE</drawtype>
               <color>A54F10</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_apply.avg</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>4</sortorder>
               <color>FC6EA3</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_apply.max</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>5</sortorder>
               <color>6C59DC</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_latency_apply.min</key>
               </item>
            </graph_item>
         </graph_items>
      </graph>
      <graph>
         <name>Ceph: Overall OSD utilization</name>
         <graph_items>
            <graph_item>
               <drawtype>BOLD_LINE</drawtype>
               <color>1A7C11</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_fill.avg</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>1</sortorder>
               <color>2774A4</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_fill.max</key>
               </item>
            </graph_item>
            <graph_item>
               <sortorder>2</sortorder>
               <color>F63100</color>
               <item>
                  <host>Template App Ceph by Zabbix Agent2</host>
                  <key>ceph.osd_fill.min</key>
               </item>
            </graph_item>
         </graph_items>
      </graph>
   </graphs>
   <value_maps>
      <value_map>
         <name>Ceph cluster status</name>
         <mappings>
            <mapping>
               <value>0</value>
               <newvalue>HEALTH_OK</newvalue>
            </mapping>
            <mapping>
               <value>1</value>
               <newvalue>HEALTH_WARN</newvalue>
            </mapping>
            <mapping>
               <value>2</value>
               <newvalue>HEALTH_ERR</newvalue>
            </mapping>
         </mappings>
      </value_map>
      <value_map>
         <name>Service state</name>
         <mappings>
            <mapping>
               <value>0</value>
               <newvalue>Down</newvalue>
            </mapping>
            <mapping>
               <value>1</value>
               <newvalue>Up</newvalue>
            </mapping>
         </mappings>
      </value_map>
   </value_maps>
</zabbix_export>
