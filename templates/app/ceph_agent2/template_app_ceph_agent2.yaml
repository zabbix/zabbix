zabbix_export:
  version: '6.2'
  date: '2022-10-18T16:57:55Z'
  template_groups:
    -
      uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    -
      uuid: 09fb25d089f7467f860895f6e71d3fa2
      template: 'Ceph by Zabbix agent 2'
      name: 'Ceph by Zabbix agent 2'
      description: |
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/410059-discussion-thread-for-official-zabbix-template-ceph
        
        Template tooling version used: 0.42
      groups:
        -
          name: Templates/Applications
      items:
        -
          uuid: af3e6faf835f41ef93cbbc44aa57f97e
          name: 'Ceph: Get df'
          key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: component
              value: disk
            -
              tag: component
              value: raw
        -
          uuid: 45c9df734d424e6a8d3fea99c4a66246
          name: 'Ceph: Minimum Mon release version'
          type: DEPENDENT
          key: ceph.min_mon_release_name
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: min_mon_release_name
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.min_mon_release_name
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: monitors
          triggers:
            -
              uuid: 716f166b3943443aba70a4faed882ffb
              expression: 'last(/Ceph by Zabbix agent 2/ceph.min_mon_release_name,#1)<>last(/Ceph by Zabbix agent 2/ceph.min_mon_release_name,#2) and length(last(/Ceph by Zabbix agent 2/ceph.min_mon_release_name))>0'
              name: 'Ceph: Minimum monitor release version has changed'
              event_name: 'Ceph: Minimum monitor release version has changed (new version: {ITEM.VALUE})'
              priority: INFO
              description: 'A Ceph version has changed. Perform Ack to close manually.'
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: notice
        -
          uuid: 5d5276504d6c41eebe8e18846edcff45
          name: 'Ceph: Number of Monitors'
          type: DEPENDENT
          key: ceph.num_mon
          delay: '0'
          history: 7d
          description: 'The number of Monitors configured in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_mon
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 30m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: monitors
        -
          uuid: 09d7a872f35349c6ba7d4a678bf71652
          name: 'Ceph: Number of OSDs'
          type: DEPENDENT
          key: ceph.num_osd
          delay: '0'
          history: 7d
          description: 'The number of the known storage daemons in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_osd
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 795939e16e70475381e917b213bf6f70
          name: 'Ceph: Number of OSDs in state: IN'
          type: DEPENDENT
          key: ceph.num_osd_in
          delay: '0'
          history: 7d
          description: 'The total number of the participating storage daemons in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_osd_in
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: d2d5caaad2914fb1ba07343956edb5b8
          name: 'Ceph: Number of OSDs in state: UP'
          type: DEPENDENT
          key: ceph.num_osd_up
          delay: '0'
          history: 7d
          description: 'The total number of the online storage daemons in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_osd_up
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 46ea920b0951408daa5d678f298b1097
          name: 'Ceph: Number of Placement Groups'
          type: DEPENDENT
          key: ceph.num_pg
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_pg
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: placement-groups
        -
          uuid: 97fbecc8ee824e658dd95d8115fec5e9
          name: 'Ceph: Number of Placement Groups in Temporary state'
          type: DEPENDENT
          key: ceph.num_pg_temp
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a *pg_temp* state'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_pg_temp
          master_item:
            key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: b0e36ff76db049ab870fa26c29e5e69c
          name: 'Ceph: Number of Pools'
          type: DEPENDENT
          key: ceph.num_pools
          delay: '0'
          history: 7d
          description: 'The total number of pools in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_pools
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: pools
        -
          uuid: e7eb1f67d81c4e2ba7c57cfbc81d1a00
          name: 'Ceph: Get OSD dump'
          key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: component
              value: osd
            -
              tag: component
              value: raw
        -
          uuid: 35b63ca6519e4137bb7655e37ed08e51
          name: 'Ceph: Get OSD stats'
          key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: component
              value: osd
            -
              tag: component
              value: raw
        -
          uuid: 0d6cffa1f06748738431524667ea8db0
          name: 'Ceph: Ceph backfill full ratio'
          type: DEPENDENT
          key: ceph.osd_backfillfull_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The backfill full ratio setting of the Ceph cluster as configured on OSDMap.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_backfillfull_ratio
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
        -
          uuid: 52c5efe132b8404f8fc4ac995c3d5c2c
          name: 'Ceph: Ceph OSD avg fill'
          type: DEPENDENT
          key: ceph.osd_fill.avg
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The average fill of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_fill.avg
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 453cebeed3214153ba4e3a5b224c063d
          name: 'Ceph: Ceph OSD max fill'
          type: DEPENDENT
          key: ceph.osd_fill.max
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of the most filled OSD.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_fill.max
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: f6efbd37e8104272be131d686a700808
          name: 'Ceph: Ceph OSD min fill'
          type: DEPENDENT
          key: ceph.osd_fill.min
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage fill of the minimum filled OSD.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_fill.min
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 532891a1d8934211a016524b136cfb1e
          name: 'Ceph: Ceph full ratio'
          type: DEPENDENT
          key: ceph.osd_full_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The full ratio setting of the Ceph cluster as configured on OSDMap.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_full_ratio
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
        -
          uuid: 074c0881384446ea90e99d355afe4f4f
          name: 'Ceph: Ceph OSD Apply latency Avg'
          type: DEPENDENT
          key: ceph.osd_latency_apply.avg
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The average apply latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_apply.avg
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: ef0a76f0c16147d1a280e00e66d3806f
          name: 'Ceph: Ceph OSD Apply latency Max'
          type: DEPENDENT
          key: ceph.osd_latency_apply.max
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The maximum apply latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_apply.max
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: d45ad876b0a04345be347af54211aa69
          name: 'Ceph: Ceph OSD Apply latency Min'
          type: DEPENDENT
          key: ceph.osd_latency_apply.min
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The minimum apply latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_apply.min
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 52e1b146c36e4c2e82acf36f1c7d12eb
          name: 'Ceph: Ceph OSD Commit latency Avg'
          type: DEPENDENT
          key: ceph.osd_latency_commit.avg
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The average commit latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_commit.avg
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 3027a1dbdd8e4f9bbef8927b92eb8e77
          name: 'Ceph: Ceph OSD Commit latency Max'
          type: DEPENDENT
          key: ceph.osd_latency_commit.max
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The maximum commit latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_commit.max
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: b9900b84c22843dab4ad335b9642e040
          name: 'Ceph: Ceph OSD Commit latency Min'
          type: DEPENDENT
          key: ceph.osd_latency_commit.min
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ms
          description: 'The minimum commit latency of OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_latency_commit.min
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
        -
          uuid: 477d94bd838d4273a556537de36bb1f6
          name: 'Ceph: Ceph nearfull ratio'
          type: DEPENDENT
          key: ceph.osd_nearfull_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The near full ratio setting of the Ceph cluster as configured on OSDMap.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_nearfull_ratio
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
        -
          uuid: 27ea5688271347bca429d91ace62d4e2
          name: 'Ceph: Ceph OSD avg PGs'
          type: DEPENDENT
          key: ceph.osd_pgs.avg
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The average amount of Placement Groups on OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_pgs.avg
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
            -
              tag: component
              value: placement-groups
        -
          uuid: 4174d7d3190e47ccb55b1e50da4cedc5
          name: 'Ceph: Ceph OSD max PGs'
          type: DEPENDENT
          key: ceph.osd_pgs.max
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The maximum amount of Placement Groups on OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_pgs.max
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
            -
              tag: component
              value: placement-groups
        -
          uuid: 47f56243cd1c430fae217d1a0cbc4a99
          name: 'Ceph: Ceph OSD min PGs'
          type: DEPENDENT
          key: ceph.osd_pgs.min
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The minimum amount of Placement Groups on OSDs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.osd_pgs.min
          master_item:
            key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: osd
            -
              tag: component
              value: placement-groups
        -
          uuid: 4023ca309692470eab2651f69d49419a
          name: 'Ceph: Overall cluster status'
          type: DEPENDENT
          key: ceph.overall_status
          delay: '0'
          history: 7d
          description: 'The overall Ceph cluster status, eg 0 - HEALTH_OK, 1 - HEALTH_WARN or 2 - HEALTH_ERR.'
          valuemap:
            name: 'Ceph cluster status'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.overall_status
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: health
          triggers:
            -
              uuid: 6ab06350bd8b426681f1b8bddde76a13
              expression: 'last(/Ceph by Zabbix agent 2/ceph.overall_status)=2'
              name: 'Ceph: Cluster in ERROR state'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                -
                  tag: scope
                  value: availability
            -
              uuid: 8b6ba1a7ae014e80a5287ffd13b5d8aa
              expression: 'last(/Ceph by Zabbix agent 2/ceph.overall_status)=1'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Ceph by Zabbix agent 2/ceph.overall_status)=0'
              name: 'Ceph: Cluster in WARNING state'
              priority: WARNING
              manual_close: 'YES'
              dependencies:
                -
                  name: 'Ceph: Cluster in ERROR state'
                  expression: 'last(/Ceph by Zabbix agent 2/ceph.overall_status)=2'
              tags:
                -
                  tag: scope
                  value: availability
        -
          uuid: 9b073153d7474b0abfccb1844d0e6981
          name: 'Ceph: Number of Placement Groups in Active state'
          type: DEPENDENT
          key: ceph.pg_states.active
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in an active state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.active
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 1471a13aaadc48c7a265835abcb93a03
          name: 'Ceph: Number of Placement Groups in Backfilling state'
          type: DEPENDENT
          key: ceph.pg_states.backfilling
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a backfill state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.backfilling
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 3b44c79e03d4402ba442331593dbdfa3
          name: 'Ceph: Number of Placement Groups in backfill_toofull state'
          type: DEPENDENT
          key: ceph.pg_states.backfill_toofull
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a *backfill_toofull state*.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.backfill_toofull
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: ada3f638ee2e48eeb8889526898aed2f
          name: 'Ceph: Number of Placement Groups in backfill_wait state'
          type: DEPENDENT
          key: ceph.pg_states.backfill_wait
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a *backfill_wait* state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.backfill_wait
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: b1af2b88fe424723b97c9aa4eee12d83
          name: 'Ceph: Number of Placement Groups in Clean state'
          type: DEPENDENT
          key: ceph.pg_states.clean
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a clean state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.clean
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: f8acf8f66fbc401799d3515eb3e2ea43
          name: 'Ceph: Number of Placement Groups in degraded state'
          type: DEPENDENT
          key: ceph.pg_states.degraded
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a degraded state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.degraded
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 79e056b9e3af40eabab0f927fb326491
          name: 'Ceph: Number of Placement Groups in inconsistent state'
          type: DEPENDENT
          key: ceph.pg_states.inconsistent
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in an inconsistent state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.inconsistent
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 9ddef3d2e7df43eda7d2835ceac19d32
          name: 'Ceph: Number of Placement Groups in Peering state'
          type: DEPENDENT
          key: ceph.pg_states.peering
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a peering state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.peering
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 573461fc94e84f96b8ae6f6d89916424
          name: 'Ceph: Number of Placement Groups in recovering state'
          type: DEPENDENT
          key: ceph.pg_states.recovering
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a recovering state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.recovering
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: c150a9414fee40acaa65d532fd110c4e
          name: 'Ceph: Number of Placement Groups in recovery_wait state'
          type: DEPENDENT
          key: ceph.pg_states.recovery_wait
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a *recovery_wait* state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.recovery_wait
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: bac3270faf854267a466eaa6a4acad91
          name: 'Ceph: Number of Placement Groups in remapped state'
          type: DEPENDENT
          key: ceph.pg_states.remapped
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a remapped state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.remapped
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 8a0117845436492d951e96b46eb67e1c
          name: 'Ceph: Number of Placement Groups in Scrubbing state'
          type: DEPENDENT
          key: ceph.pg_states.scrubbing
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in a scrubbing state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.scrubbing
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 4998e4542ed746f08f82ecf53b553c36
          name: 'Ceph: Number of Placement Groups in Undersized state'
          type: DEPENDENT
          key: ceph.pg_states.undersized
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in an undersized state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.undersized
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: c922613c5ffb4f689c01f13143633ec3
          name: 'Ceph: Number of Placement Groups in Unknown state'
          type: DEPENDENT
          key: ceph.pg_states.unknown
          delay: '0'
          history: 7d
          description: 'The total number of Placement Groups in an unknown state.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.pg_states.unknown
          master_item:
            key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: placement-groups
        -
          uuid: 911e8a654ca44e7ca56b8010ac7381c8
          name: 'Ceph: Ping'
          key: 'ceph.ping["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          history: 7d
          valuemap:
            name: 'Service state'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 30m
          tags:
            -
              tag: component
              value: application
            -
              tag: component
              value: health
          triggers:
            -
              uuid: 9ffc9a5c3d1c47d288c665c8be7d2fbb
              expression: 'last(/Ceph by Zabbix agent 2/ceph.ping["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"])=0'
              name: 'Ceph: Can not connect to cluster'
              priority: AVERAGE
              description: 'The connection to the Ceph RESTful module is broken (if there is any error presented including *AUTH* and the configuration issues).'
              tags:
                -
                  tag: scope
                  value: availability
        -
          uuid: 89d7df2ebfbc4aa88b4ff4de44dc4b8b
          name: 'Ceph: Ceph Read bandwidth'
          type: DEPENDENT
          key: ceph.rd_bytes.rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Bps
          description: 'The global read bytes per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.rd_bytes
            -
              type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: 8a35a37de63746498291993d4f3fc1cc
          name: 'Ceph: Ceph Read operations per sec'
          type: DEPENDENT
          key: ceph.rd_ops.rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ops
          description: 'The global read operations per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.rd_ops
            -
              type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: 8b43d105f9d64a3a94196f3f3bc7eac3
          name: 'Ceph: Get overall cluster status'
          key: 'ceph.status["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: component
              value: raw
        -
          uuid: 5e400c932acf4ad498e17daca0ad4943
          name: 'Ceph: Total bytes available'
          type: DEPENDENT
          key: ceph.total_avail_bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total bytes available in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.total_avail_bytes
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: c4b1a31efb5f47518cc5dd6082f3a42b
          name: 'Ceph: Total bytes'
          type: DEPENDENT
          key: ceph.total_bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total (RAW) capacity of a Ceph cluster in bytes.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.total_bytes
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: d3910275462b43dba1fa8022a398ed1c
          name: 'Ceph: Total number of objects'
          type: DEPENDENT
          key: ceph.total_objects
          delay: '0'
          history: 7d
          description: 'The total number of objects in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.total_objects
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
        -
          uuid: 6ad8e289eef349ab8ebfd4cc92a35c18
          name: 'Ceph: Total bytes used'
          type: DEPENDENT
          key: ceph.total_used_bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total bytes used in a Ceph cluster.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.total_used_bytes
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: 51e100668e5344d29afd50dc9b9eabc9
          name: 'Ceph: Ceph Write bandwidth'
          type: DEPENDENT
          key: ceph.wr_bytes.rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Bps
          description: 'The global write bytes per second'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.wr_bytes
            -
              type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
        -
          uuid: 0a7203defa7147f7b975b404e6706b60
          name: 'Ceph: Ceph Write operations per sec'
          type: DEPENDENT
          key: ceph.wr_ops.rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: ops
          description: 'The global write operations per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.wr_ops
            -
              type: CHANGE_PER_SECOND
              parameters:
                - ''
          master_item:
            key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          tags:
            -
              tag: component
              value: cluster
            -
              tag: component
              value: disk
      discovery_rules:
        -
          uuid: 374557a43a824d938e9a8e656151e0c9
          name: OSD
          key: 'ceph.osd.discovery["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          delay: 1h
          item_prototypes:
            -
              uuid: 4f7a72a5c4c14b9da63ddbae9e2ebf5f
              name: 'Ceph: [osd.{#OSDNAME}] OSD fill'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},fill]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: '%'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.osd_fill'
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
            -
              uuid: fc2518ca8b9341d8befc6f9b1cbd4b79
              name: 'Ceph: [osd.{#OSDNAME}] OSD in'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},in]'
              delay: '0'
              history: 7d
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.in'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 10m
              master_item:
                key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
            -
              uuid: 2eb6a0d999d14906a4737ed32834ccc7
              name: 'Ceph: [osd.{#OSDNAME}] OSD latency apply'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},latency_apply]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: ms
              description: 'The time taken to flush an update to disks.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.osd_latency_apply'
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
            -
              uuid: 14f392b369504f10b7e068522ac4a086
              name: 'Ceph: [osd.{#OSDNAME}] OSD latency commit'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},latency_commit]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: ms
              description: 'The time taken to commit an operation to the journal.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.osd_latency_commit'
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
            -
              uuid: 63234342c0bd49e6b1f8737bf595851f
              name: 'Ceph: [osd.{#OSDNAME}] OSD PGs'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},num_pgs]'
              delay: '0'
              history: 7d
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.num_pgs'
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'ceph.osd.stats["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
            -
              uuid: 12c20b2fbf10466bba7e1097c014e968
              name: 'Ceph: [osd.{#OSDNAME}] OSD up'
              type: DEPENDENT
              key: 'ceph.osd[{#OSDNAME},up]'
              delay: '0'
              history: 7d
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.osds.{#OSDNAME}.up'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 10m
              master_item:
                key: 'ceph.osd.dump["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: class
                  value: '{#CLASS}'
                -
                  tag: component
                  value: osd
                -
                  tag: host
                  value: '{#HOST}'
                -
                  tag: osd
                  value: '{#OSDNAME}'
              trigger_prototypes:
                -
                  uuid: 21535bb935b44b3aa073542db3cc7827
                  expression: 'last(/Ceph by Zabbix agent 2/ceph.osd[{#OSDNAME},up]) = 0'
                  name: 'Ceph: OSD osd.{#OSDNAME} is down'
                  priority: AVERAGE
                  description: |
                    OSD osd.{#OSDNAME} is marked "down" in the *osdmap*.
                    The OSD daemon may have been stopped, or peer OSDs may be unable to reach the OSD over the network.
                  tags:
                    -
                      tag: scope
                      value: availability
          trigger_prototypes:
            -
              uuid: cd04e8d542a04bdf89abad7ee4719e75
              expression: 'min(/Ceph by Zabbix agent 2/ceph.osd[{#OSDNAME},fill],15m) > last(/Ceph by Zabbix agent 2/ceph.osd_nearfull_ratio)*100'
              name: 'Ceph: Ceph OSD osd.{#OSDNAME} is near full'
              priority: WARNING
              dependencies:
                -
                  name: 'Ceph: OSD osd.{#OSDNAME} is full'
                  expression: 'min(/Ceph by Zabbix agent 2/ceph.osd[{#OSDNAME},fill],15m) > last(/Ceph by Zabbix agent 2/ceph.osd_full_ratio)*100'
              tags:
                -
                  tag: scope
                  value: capacity
            -
              uuid: 5d7a028166584c29b959914ce904a713
              expression: 'min(/Ceph by Zabbix agent 2/ceph.osd[{#OSDNAME},fill],15m) > last(/Ceph by Zabbix agent 2/ceph.osd_full_ratio)*100'
              name: 'Ceph: OSD osd.{#OSDNAME} is full'
              priority: AVERAGE
              tags:
                -
                  tag: scope
                  value: capacity
          graph_prototypes:
            -
              uuid: c88d53bfa7b8456aa70b4d7a2cb63ef5
              name: 'Ceph: [osd.{#OSDNAME}] OSD latency'
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.osd[{#OSDNAME},latency_apply]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.osd[{#OSDNAME},latency_commit]'
        -
          uuid: fb6b4d27f46e4160ad978244aa845d0e
          name: Pool
          key: 'ceph.pool.discovery["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
          delay: 1h
          item_prototypes:
            -
              uuid: 1090dc09ce79458e9471863fcb973460
              name: 'Ceph: [{#POOLNAME}] Pool Used'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",bytes_used]'
              delay: '0'
              history: 7d
              units: B
              description: 'The total bytes used in a pool.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].bytes_used'
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 4e49ce8a11084dd287f89b076cc70535
              name: 'Ceph: [{#POOLNAME}] Max available'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",max_avail]'
              delay: '0'
              history: 7d
              units: B
              description: 'The maximum available space in the given pool.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].max_avail'
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 5c7bd85f9d944215acaced87b0eb216f
              name: 'Ceph: [{#POOLNAME}] Pool objects'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",objects]'
              delay: '0'
              history: 7d
              description: 'The number of objects in the pool.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].objects'
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: eda166ae6c4c46cf8c01c2b928f07ec5
              name: 'Ceph: [{#POOLNAME}] Pool Percent Used'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",percent_used]'
              delay: '0'
              history: 7d
              units: '%'
              description: 'The percentage of the storage used per pool.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].percent_used'
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 5311f1a539284c5483458e1820496be3
              name: 'Ceph: [{#POOLNAME}] Pool Read bandwidth'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",rd_bytes.rate]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: Bps
              description: 'The read rate per pool (bytes per second).'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].rd_bytes'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 76871b86d66d4307a83e813a8d9fc1b0
              name: 'Ceph: [{#POOLNAME}] Pool Read operations'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",rd_ops.rate]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: ops
              description: 'The read rate per pool (operations per second).'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].rd_ops'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 4c053bbaaf6946bcaf5288cc154d6fdd
              name: 'Ceph: [{#POOLNAME}] Pool RAW Used'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",stored_raw]'
              delay: '0'
              history: 7d
              units: B
              description: 'Bytes used in pool including the copies made.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].stored_raw'
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: 955353da182243e29d326b3b2807286a
              name: 'Ceph: [{#POOLNAME}] Pool Write bandwidth'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",wr_bytes.rate]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: Bps
              description: 'The write rate per pool (bytes per second).'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].wr_bytes'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
            -
              uuid: acb3081d772444dab060a055fb3f4304
              name: 'Ceph: [{#POOLNAME}] Pool Write operations'
              type: DEPENDENT
              key: 'ceph.pool["{#POOLNAME}",wr_ops.rate]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: ops
              description: 'The write rate per pool (operations per second).'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.pools["{#POOLNAME}"].wr_ops'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'ceph.df.details["{$CEPH.CONNSTRING}","{$CEPH.USER}","{$CEPH.API.KEY}"]'
              tags:
                -
                  tag: component
                  value: pools
                -
                  tag: crushrule
                  value: '{#CRUSHRULE}'
                -
                  tag: pool
                  value: '{#POOLNAME}'
          graph_prototypes:
            -
              uuid: 1a469f2c99214b1ba7fe3a7520e43439
              name: 'Ceph: [{#POOLNAME}] Pool bandwidth'
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",rd_bytes.rate]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",wr_bytes.rate]'
            -
              uuid: 7870932ea335481db1c23224dfb33f60
              name: 'Ceph: [{#POOLNAME}] Pool I/O'
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",rd_ops.rate]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",wr_ops.rate]'
            -
              uuid: 3da48042fdaa4c01825c3eea7ab5af6b
              name: 'Ceph: [{#POOLNAME}] Pool Usage'
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",bytes_used]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",max_avail]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'Ceph by Zabbix agent 2'
                    key: 'ceph.pool["{#POOLNAME}",stored_raw]'
      tags:
        -
          tag: class
          value: application
        -
          tag: target
          value: ceph
      macros:
        -
          macro: '{$CEPH.API.KEY}'
          value: zabbix_pass
        -
          macro: '{$CEPH.CONNSTRING}'
          value: 'https://localhost:8003'
        -
          macro: '{$CEPH.USER}'
          value: zabbix
      valuemaps:
        -
          uuid: 2a4b2a8c55ba48b2a815e4123c9ea7fa
          name: 'Ceph cluster status'
          mappings:
            -
              value: '0'
              newvalue: HEALTH_OK
            -
              value: '1'
              newvalue: HEALTH_WARN
            -
              value: '2'
              newvalue: HEALTH_ERR
        -
          uuid: 22fe6d6c74454775994f07fc05d7bafd
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up
  graphs:
    -
      uuid: fac43ab599344f1da374bd091f6b618b
      name: 'Ceph: Cluster bandwidth'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.rd_bytes.rate
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.wr_bytes.rate
    -
      uuid: 4191a30a9a7c4e5aa48d96238ca8f20c
      name: 'Ceph: Cluster I/O'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.wr_ops.rate
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.rd_ops.rate
    -
      uuid: 515e2c5239f94ee7a52ecdb834079e06
      name: 'Ceph: Free space'
      type: STACKED
      graph_items:
        -
          drawtype: FILLED_REGION
          color: 1A7C11
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.total_used_bytes
        -
          sortorder: '1'
          drawtype: FILLED_REGION
          color: 2774A4
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.total_avail_bytes
    -
      uuid: 8714a8cf50bd43c2b54e410a439d320b
      name: 'Ceph: Overall OSD latency'
      graph_items:
        -
          drawtype: BOLD_LINE
          color: 1A7C11
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_commit.avg
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_commit.max
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_commit.min
        -
          sortorder: '3'
          drawtype: BOLD_LINE
          color: A54F10
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_apply.avg
        -
          sortorder: '4'
          color: FC6EA3
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_apply.max
        -
          sortorder: '5'
          color: 6C59DC
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_latency_apply.min
    -
      uuid: 716d959b255a47779b9aaf376be8ba03
      name: 'Ceph: Overall OSD utilization'
      graph_items:
        -
          drawtype: BOLD_LINE
          color: 1A7C11
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_fill.avg
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_fill.max
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Ceph by Zabbix agent 2'
            key: ceph.osd_fill.min
